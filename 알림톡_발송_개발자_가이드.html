<!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>&#xc54c;&#xb9bc;&#xd1a1; &#xbc1c;&#xc1a1; &#xac1c;&#xbc1c;&#xc790; &#xac00;&#xc774;&#xb4dc;</title>
            <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only],
.vscode-high-contrast:not(.vscode-high-contrast-light) img[src$=\#gh-light-mode-only],
.vscode-high-contrast-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
<style>
:root {
  --color-note: #0969da;
  --color-tip: #1a7f37;
  --color-warning: #9a6700;
  --color-severe: #bc4c00;
  --color-caution: #d1242f;
  --color-important: #8250df;
}

</style>
<style>
@media (prefers-color-scheme: dark) {
  :root {
    --color-note: #2f81f7;
    --color-tip: #3fb950;
    --color-warning: #d29922;
    --color-severe: #db6d28;
    --color-caution: #f85149;
    --color-important: #a371f7;
  }
}

</style>
<style>
.markdown-alert {
  padding: 0.5rem 1rem;
  margin-bottom: 16px;
  color: inherit;
  border-left: .25em solid #888;
}

.markdown-alert>:first-child {
  margin-top: 0
}

.markdown-alert>:last-child {
  margin-bottom: 0
}

.markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: 500;
  align-items: center;
  line-height: 1
}

.markdown-alert .markdown-alert-title .octicon {
  margin-right: 0.5rem;
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-alert.markdown-alert-note {
  border-left-color: var(--color-note);
}

.markdown-alert.markdown-alert-note .markdown-alert-title {
  color: var(--color-note);
}

.markdown-alert.markdown-alert-important {
  border-left-color: var(--color-important);
}

.markdown-alert.markdown-alert-important .markdown-alert-title {
  color: var(--color-important);
}

.markdown-alert.markdown-alert-warning {
  border-left-color: var(--color-warning);
}

.markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: var(--color-warning);
}

.markdown-alert.markdown-alert-tip {
  border-left-color: var(--color-tip);
}

.markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: var(--color-tip);
}

.markdown-alert.markdown-alert-caution {
  border-left-color: var(--color-caution);
}

.markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: var(--color-caution);
}

</style>
        
        </head>
        <body class="vscode-body vscode-light">
            <h1 id="ì•Œë¦¼í†¡-ë°œì†¡-ê°œë°œì-ê°€ì´ë“œ">ì•Œë¦¼í†¡ ë°œì†¡ ê°œë°œì ê°€ì´ë“œ</h1>
<h2 id="-ê°œìš”">ğŸ“Œ ê°œìš”</h2>
<p>NotificationServiceë¥¼ í†µí•´ ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ì„ ì‰½ê²Œ ë°œì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
ë‹¤ë¥¸ MSA ì„œë¹„ìŠ¤(MemberService, AuthService ë“±)ì—ì„œ REST APIë¥¼ í˜¸ì¶œí•˜ì—¬ ì•Œë¦¼í†¡ì„ ë°œì†¡í•˜ì„¸ìš”.</p>
<hr>
<h2 id="-ë¹ ë¥¸-ì‹œì‘-5ë¶„-ì™„ì„±">ğŸš€ ë¹ ë¥¸ ì‹œì‘ (5ë¶„ ì™„ì„±)</h2>
<h3 id="1ë‹¨ê³„-ì‚¬ìš©-ê°€ëŠ¥í•œ-í…œí”Œë¦¿-í™•ì¸">1ë‹¨ê³„: ì‚¬ìš© ê°€ëŠ¥í•œ í…œí”Œë¦¿ í™•ì¸</h3>
<pre><code class="language-bash"><span class="hljs-comment"># í™œì„±í™”ëœ í…œí”Œë¦¿ ëª©ë¡ ì¡°íšŒ</span>
curl -X GET <span class="hljs-string">&quot;http://localhost/api/alimtalk/templates?activeOnly=true&quot;</span>
</code></pre>
<p><strong>ì‘ë‹µ ì˜ˆì‹œ:</strong></p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;success&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;templateId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;amano_hub_member_registered&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;templateName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;íšŒì›ê°€ì… ì™„ë£Œ&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;[ì•„ë§ˆë…¸íŒŒí‚¹]\níšŒì›ê°€ì…ì„ ì¶•í•˜í•©ë‹ˆë‹¤!\n...\nì•„ì´ë””: #{ì•„ì´ë””ëª…}\nê°€ì… ì¼ì‹œ: #{ê°€ì…ë‚ ì§œ}&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;requiredParams&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ì•„ì´ë””ëª…,ê°€ì…ë‚ ì§œ&quot;</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="2ë‹¨ê³„-ì•Œë¦¼í†¡-ë°œì†¡">2ë‹¨ê³„: ì•Œë¦¼í†¡ ë°œì†¡</h3>
<pre><code class="language-bash">curl -X POST http://localhost/api/alimtalk/send \
  -H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span> \
  -H <span class="hljs-string">&quot;X-Service-Name: MemberService&quot;</span> \
  -d <span class="hljs-string">&#x27;{
    &quot;templateId&quot;: &quot;amano_hub_member_registered&quot;,
    &quot;phoneNumber&quot;: &quot;010-1234-5678&quot;,
    &quot;templateParams&quot;: {
      &quot;ì•„ì´ë””ëª…&quot;: &quot;hong@example.com&quot;,
      &quot;ê°€ì…ë‚ ì§œ&quot;: &quot;2025-11-16 14:30&quot;
    }
  }&#x27;</span>
</code></pre>
<hr>
<h2 id="-ì„œë¹„ìŠ¤-ì½”ë“œì—ì„œ-ì‚¬ìš©í•˜ê¸°">ğŸ’» ì„œë¹„ìŠ¤ ì½”ë“œì—ì„œ ì‚¬ìš©í•˜ê¸°</h2>
<h3 id="ë°©ë²•-1-resttemplate-ì‚¬ìš©-ê¶Œì¥">ë°©ë²• 1: RestTemplate ì‚¬ìš© (ê¶Œì¥)</h3>
<h4 id="step-1-resttemplate-bean-ë“±ë¡">Step 1: RestTemplate Bean ë“±ë¡</h4>
<pre><code class="language-java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RestTemplateConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title function_">restTemplate</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RestTemplate</span> <span class="hljs-variable">restTemplate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();
        
        <span class="hljs-comment">// X-Service-Name í—¤ë” ìë™ ì¶”ê°€ (ì„œë¹„ìŠ¤ëª…ì€ application.ymlì—ì„œ ê´€ë¦¬)</span>
        restTemplate.getInterceptors().add((request, body, execution) -&gt; {
            request.getHeaders().set(<span class="hljs-string">&quot;X-Service-Name&quot;</span>, <span class="hljs-string">&quot;MemberService&quot;</span>); <span class="hljs-comment">// ì„œë¹„ìŠ¤ëª… ë³€ê²½ í•„ìš”</span>
            <span class="hljs-keyword">return</span> execution.execute(request, body);
        });
        
        <span class="hljs-keyword">return</span> restTemplate;
    }
}
</code></pre>
<h4 id="step-2-ì•Œë¦¼í†¡-ë°œì†¡-í´ë¼ì´ì–¸íŠ¸-ì‘ì„±">Step 2: ì•Œë¦¼í†¡ ë°œì†¡ í´ë¼ì´ì–¸íŠ¸ ì‘ì„±</h4>
<pre><code class="language-java"><span class="hljs-keyword">package</span> com.akc.b2c.memberservice.client;

<span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Value;
<span class="hljs-keyword">import</span> org.springframework.http.*;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> org.springframework.web.client.RestTemplate;

<span class="hljs-keyword">import</span> java.time.LocalDateTime;
<span class="hljs-keyword">import</span> java.time.format.DateTimeFormatter;
<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * ì•Œë¦¼í†¡ ë°œì†¡ í´ë¼ì´ì–¸íŠ¸
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AlimtalkClient</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RestTemplate restTemplate;
    
    <span class="hljs-meta">@Value(&quot;${notification-service.url:http://localhost}&quot;)</span>
    <span class="hljs-keyword">private</span> String notificationServiceUrl;
    
    <span class="hljs-comment">/**
     * íšŒì›ê°€ì… í™˜ì˜ ì•Œë¦¼í†¡ ë°œì†¡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendWelcomeMessage</span><span class="hljs-params">(String phoneNumber, String email)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> notificationServiceUrl + <span class="hljs-string">&quot;/api/alimtalk/send&quot;</span>;
        
        <span class="hljs-comment">// ìš”ì²­ ë°ì´í„° ìƒì„±</span>
        Map&lt;String, Object&gt; request = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        request.put(<span class="hljs-string">&quot;templateId&quot;</span>, <span class="hljs-string">&quot;amano_hub_member_registered&quot;</span>);
        request.put(<span class="hljs-string">&quot;phoneNumber&quot;</span>, phoneNumber);
        
        <span class="hljs-comment">// í…œí”Œë¦¿ íŒŒë¼ë¯¸í„°</span>
        Map&lt;String, String&gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        params.put(<span class="hljs-string">&quot;ì•„ì´ë””ëª…&quot;</span>, email);
        params.put(<span class="hljs-string">&quot;ê°€ì…ë‚ ì§œ&quot;</span>, LocalDateTime.now()
            .format(DateTimeFormatter.ofPattern(<span class="hljs-string">&quot;yyyy-MM-dd HH:mm&quot;</span>)));
        request.put(<span class="hljs-string">&quot;templateParams&quot;</span>, params);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// NotificationService í˜¸ì¶œ</span>
            ResponseEntity&lt;Map&gt; response = restTemplate.postForEntity(
                url, 
                request, 
                Map.class
            );
            
            log.info(<span class="hljs-string">&quot;ì•Œë¦¼í†¡ ë°œì†¡ ì„±ê³µ: phoneNumber={}, response={}&quot;</span>, 
                     phoneNumber, response.getBody());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// ì•Œë¦¼í†¡ ì‹¤íŒ¨ëŠ” í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ì— ì˜í–¥ ì£¼ì§€ ì•Šë„ë¡</span>
            log.error(<span class="hljs-string">&quot;ì•Œë¦¼í†¡ ë°œì†¡ ì‹¤íŒ¨: phoneNumber={}, error={}&quot;</span>, 
                      phoneNumber, e.getMessage(), e);
        }
    }
    
    <span class="hljs-comment">/**
     * ë™í˜¸ìˆ˜ ìŠ¹ì¸ ì•Œë¦¼í†¡ ë°œì†¡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendUnitApprovalMessage</span><span class="hljs-params">(String phoneNumber, String parkingLotName, 
                                        String dong, String ho, LocalDateTime approvedAt)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> notificationServiceUrl + <span class="hljs-string">&quot;/api/alimtalk/send&quot;</span>;
        
        Map&lt;String, Object&gt; request = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        request.put(<span class="hljs-string">&quot;templateId&quot;</span>, <span class="hljs-string">&quot;member_unit_approved&quot;</span>);
        request.put(<span class="hljs-string">&quot;phoneNumber&quot;</span>, phoneNumber);
        
        Map&lt;String, String&gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        params.put(<span class="hljs-string">&quot;ì£¼ì°¨ì¥ëª…&quot;</span>, parkingLotName);
        params.put(<span class="hljs-string">&quot;ë™&quot;</span>, dong);
        params.put(<span class="hljs-string">&quot;í˜¸&quot;</span>, ho);
        params.put(<span class="hljs-string">&quot;ìŠ¹ì¸ì¼ì‹œ&quot;</span>, approvedAt.format(DateTimeFormatter.ofPattern(<span class="hljs-string">&quot;yyyy-MM-dd HH:mm&quot;</span>)));
        request.put(<span class="hljs-string">&quot;templateParams&quot;</span>, params);
        
        <span class="hljs-keyword">try</span> {
            restTemplate.postForEntity(url, request, Map.class);
            log.info(<span class="hljs-string">&quot;ë™í˜¸ìˆ˜ ìŠ¹ì¸ ì•Œë¦¼í†¡ ë°œì†¡ ì„±ê³µ: phoneNumber={}&quot;</span>, phoneNumber);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">&quot;ë™í˜¸ìˆ˜ ìŠ¹ì¸ ì•Œë¦¼í†¡ ë°œì†¡ ì‹¤íŒ¨: phoneNumber={}, error={}&quot;</span>, 
                      phoneNumber, e.getMessage());
        }
    }
}
</code></pre>
<h4 id="step-3-ì„œë¹„ìŠ¤ì—ì„œ-ì‚¬ìš©">Step 3: ì„œë¹„ìŠ¤ì—ì„œ ì‚¬ìš©</h4>
<pre><code class="language-java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemberService</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AlimtalkClient alimtalkClient;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MemberRepository memberRepository;
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">signUp</span><span class="hljs-params">(SignUpRequest request)</span> {
        <span class="hljs-comment">// 1. íšŒì› ë“±ë¡</span>
        <span class="hljs-type">Member</span> <span class="hljs-variable">member</span> <span class="hljs-operator">=</span> Member.builder()
            .email(request.getEmail())
            .phoneNumber(request.getPhoneNumber())
            .build();
        
        memberRepository.save(member);
        
        <span class="hljs-comment">// 2. ì•Œë¦¼í†¡ ë°œì†¡ (ë¹„ë™ê¸° ê¶Œì¥)</span>
        <span class="hljs-keyword">try</span> {
            alimtalkClient.sendWelcomeMessage(
                member.getPhoneNumber(), 
                member.getEmail()
            );
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// ì•Œë¦¼í†¡ ì‹¤íŒ¨í•´ë„ íšŒì›ê°€ì…ì€ ì„±ê³µ ì²˜ë¦¬</span>
            log.warn(<span class="hljs-string">&quot;ì•Œë¦¼í†¡ ë°œì†¡ ì‹¤íŒ¨í–ˆì§€ë§Œ íšŒì›ê°€ì…ì€ ì™„ë£Œ: memberId={}&quot;</span>, member.getId());
        }
    }
}
</code></pre>
<hr>
<h3 id="ë°©ë²•-2-webclient-ì‚¬ìš©-reactive">ë°©ë²• 2: WebClient ì‚¬ìš© (Reactive)</h3>
<pre><code class="language-java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AlimtalkWebClient</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> WebClient webClient;
    
    <span class="hljs-meta">@Value(&quot;${notification-service.url:http://localhost}&quot;)</span>
    <span class="hljs-keyword">private</span> String notificationServiceUrl;
    
    <span class="hljs-keyword">public</span> Mono&lt;Map&gt; <span class="hljs-title function_">sendAlimtalk</span><span class="hljs-params">(String templateId, String phoneNumber, 
                                   Map&lt;String, String&gt; templateParams)</span> {
        
        Map&lt;String, Object&gt; request = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        request.put(<span class="hljs-string">&quot;templateId&quot;</span>, templateId);
        request.put(<span class="hljs-string">&quot;phoneNumber&quot;</span>, phoneNumber);
        request.put(<span class="hljs-string">&quot;templateParams&quot;</span>, templateParams);
        
        <span class="hljs-keyword">return</span> webClient.post()
            .uri(notificationServiceUrl + <span class="hljs-string">&quot;/api/alimtalk/send&quot;</span>)
            .header(<span class="hljs-string">&quot;X-Service-Name&quot;</span>, <span class="hljs-string">&quot;MemberService&quot;</span>) <span class="hljs-comment">// ì„œë¹„ìŠ¤ëª… ë³€ê²½ í•„ìš”</span>
            .contentType(MediaType.APPLICATION_JSON)
            .bodyValue(request)
            .retrieve()
            .bodyToMono(Map.class)
            .doOnSuccess(response -&gt; 
                log.info(<span class="hljs-string">&quot;ì•Œë¦¼í†¡ ë°œì†¡ ì„±ê³µ: response={}&quot;</span>, response))
            .doOnError(error -&gt; 
                log.error(<span class="hljs-string">&quot;ì•Œë¦¼í†¡ ë°œì†¡ ì‹¤íŒ¨: error={}&quot;</span>, error.getMessage()));
    }
}
</code></pre>
<hr>
<h3 id="ë°©ë²•-3-feignclient-ì‚¬ìš©">ë°©ë²• 3: FeignClient ì‚¬ìš©</h3>
<pre><code class="language-java"><span class="hljs-meta">@FeignClient(name = &quot;notification-service&quot;, url = &quot;${notification-service.url:http://localhost}&quot;)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">NotificationServiceClient</span> {
    
    <span class="hljs-meta">@PostMapping(&quot;/api/alimtalk/send&quot;)</span>
    Map&lt;String, Object&gt; <span class="hljs-title function_">sendAlimtalk</span><span class="hljs-params">(
        <span class="hljs-meta">@RequestHeader(&quot;X-Service-Name&quot;)</span> String serviceName,
        <span class="hljs-meta">@RequestBody</span> AlimtalkSendRequest request
    )</span>;
}

<span class="hljs-comment">// ì‚¬ìš© ì˜ˆì‹œ</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SomeService</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> NotificationServiceClient notificationClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendAlimtalk</span><span class="hljs-params">()</span> {
        <span class="hljs-type">AlimtalkSendRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> AlimtalkSendRequest.builder()
            .templateId(<span class="hljs-string">&quot;amano_hub_member_registered&quot;</span>)
            .phoneNumber(<span class="hljs-string">&quot;010-1234-5678&quot;</span>)
            .templateParams(Map.of(<span class="hljs-string">&quot;ì•„ì´ë””ëª…&quot;</span>, <span class="hljs-string">&quot;test@example.com&quot;</span>))
            .build();
        
        notificationClient.sendAlimtalk(<span class="hljs-string">&quot;MemberService&quot;</span>, request);
    }
}
</code></pre>
<hr>
<h2 id="-ì‚¬ìš©-ê°€ëŠ¥í•œ-í…œí”Œë¦¿">ğŸ“‹ ì‚¬ìš© ê°€ëŠ¥í•œ í…œí”Œë¦¿</h2>
<h3 id="1-íšŒì›ê°€ì…-ì™„ë£Œ-amano_hub_member_registered">1. íšŒì›ê°€ì… ì™„ë£Œ (amano_hub_member_registered)</h3>
<p><strong>í•„ìˆ˜ íŒŒë¼ë¯¸í„°:</strong></p>
<ul>
<li><code>ì•„ì´ë””ëª…</code>: ì‚¬ìš©ì ì´ë©”ì¼ ë˜ëŠ” ì•„ì´ë””</li>
<li><code>ê°€ì…ë‚ ì§œ</code>: ê°€ì… ì¼ì‹œ (ì˜ˆ: &quot;2025-11-16 14:30&quot;)</li>
</ul>
<p><strong>ì‚¬ìš© ì˜ˆì‹œ:</strong></p>
<pre><code class="language-java">Map&lt;String, String&gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
params.put(<span class="hljs-string">&quot;ì•„ì´ë””ëª…&quot;</span>, <span class="hljs-string">&quot;hong@example.com&quot;</span>);
params.put(<span class="hljs-string">&quot;ê°€ì…ë‚ ì§œ&quot;</span>, <span class="hljs-string">&quot;2025-11-16 14:30&quot;</span>);
</code></pre>
<hr>
<h3 id="2-ë™í˜¸ìˆ˜-ìŠ¹ì¸-ì™„ë£Œ-member_unit_approved">2. ë™í˜¸ìˆ˜ ìŠ¹ì¸ ì™„ë£Œ (member_unit_approved)</h3>
<p><strong>í•„ìˆ˜ íŒŒë¼ë¯¸í„°:</strong></p>
<ul>
<li><code>ì£¼ì°¨ì¥ëª…</code>: ì£¼ì°¨ì¥ ì´ë¦„</li>
<li><code>ë™</code>: ë™ ë²ˆí˜¸</li>
<li><code>í˜¸</code>: í˜¸ ë²ˆí˜¸</li>
<li><code>ìŠ¹ì¸ì¼ì‹œ</code>: ìŠ¹ì¸ ì¼ì‹œ</li>
</ul>
<p><strong>ì‚¬ìš© ì˜ˆì‹œ:</strong></p>
<pre><code class="language-java">Map&lt;String, String&gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
params.put(<span class="hljs-string">&quot;ì£¼ì°¨ì¥ëª…&quot;</span>, <span class="hljs-string">&quot;ì¢…ì•”ìš°ë¦¼ì¹´ì´ì €&quot;</span>);
params.put(<span class="hljs-string">&quot;ë™&quot;</span>, <span class="hljs-string">&quot;101&quot;</span>);
params.put(<span class="hljs-string">&quot;í˜¸&quot;</span>, <span class="hljs-string">&quot;1503&quot;</span>);
params.put(<span class="hljs-string">&quot;ìŠ¹ì¸ì¼ì‹œ&quot;</span>, <span class="hljs-string">&quot;2025-11-16 15:00&quot;</span>);
</code></pre>
<hr>
<h3 id="3-ë™í˜¸ìˆ˜-ìŠ¹ì¸-ê±°ë¶€-member_unit_rejected">3. ë™í˜¸ìˆ˜ ìŠ¹ì¸ ê±°ë¶€ (member_unit_rejected)</h3>
<p><strong>í•„ìˆ˜ íŒŒë¼ë¯¸í„°:</strong></p>
<ul>
<li><code>ì£¼ì°¨ì¥ëª…</code>: ì£¼ì°¨ì¥ ì´ë¦„</li>
<li><code>ë™</code>: ë™ ë²ˆí˜¸</li>
<li><code>í˜¸</code>: í˜¸ ë²ˆí˜¸</li>
<li><code>ê±°ë¶€ì‚¬ìœ </code>: ê±°ë¶€ ì‚¬ìœ </li>
</ul>
<p><strong>ì‚¬ìš© ì˜ˆì‹œ:</strong></p>
<pre><code class="language-java">Map&lt;String, String&gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
params.put(<span class="hljs-string">&quot;ì£¼ì°¨ì¥ëª…&quot;</span>, <span class="hljs-string">&quot;ì¢…ì•”ìš°ë¦¼ì¹´ì´ì €&quot;</span>);
params.put(<span class="hljs-string">&quot;ë™&quot;</span>, <span class="hljs-string">&quot;101&quot;</span>);
params.put(<span class="hljs-string">&quot;í˜¸&quot;</span>, <span class="hljs-string">&quot;1503&quot;</span>);
params.put(<span class="hljs-string">&quot;ê±°ë¶€ì‚¬ìœ &quot;</span>, <span class="hljs-string">&quot;ë“±ë¡ ì„œë¥˜ ë¶ˆì¼ì¹˜&quot;</span>);
</code></pre>
<hr>
<h2 id="-ì„¤ì •-applicationyml">ğŸ”§ ì„¤ì • (application.yml)</h2>
<pre><code class="language-yaml"><span class="hljs-comment"># NotificationService URL ì„¤ì •</span>
<span class="hljs-attr">notification-service:</span>
  <span class="hljs-attr">url:</span> <span class="hljs-string">http://localhost</span>  <span class="hljs-comment"># ë¡œì»¬ ê°œë°œ í™˜ê²½</span>
  <span class="hljs-comment"># url: http://notification-service:8080  # Docker í™˜ê²½</span>
</code></pre>
<hr>
<h2 id="-ë°œì†¡-ì´ë ¥-í™•ì¸">ğŸ“Š ë°œì†¡ ì´ë ¥ í™•ì¸</h2>
<h3 id="1-ì „ì²´-ë¡œê·¸-ì¡°íšŒ">1. ì „ì²´ ë¡œê·¸ ì¡°íšŒ</h3>
<pre><code class="language-bash">curl -X GET <span class="hljs-string">&quot;http://localhost/api/alimtalk/logs?page=0&amp;size=20&quot;</span>
</code></pre>
<h3 id="2-íŠ¹ì •-ì „í™”ë²ˆí˜¸-ì´ë ¥-ì¡°íšŒ">2. íŠ¹ì • ì „í™”ë²ˆí˜¸ ì´ë ¥ ì¡°íšŒ</h3>
<pre><code class="language-bash">curl -X GET <span class="hljs-string">&quot;http://localhost/api/alimtalk/logs/phone/010-1234-5678&quot;</span>
</code></pre>
<h3 id="3-ì‹¤íŒ¨í•œ-ì•Œë¦¼í†¡ë§Œ-ì¡°íšŒ">3. ì‹¤íŒ¨í•œ ì•Œë¦¼í†¡ë§Œ ì¡°íšŒ</h3>
<pre><code class="language-bash">curl -X GET <span class="hljs-string">&quot;http://localhost/api/alimtalk/logs?sendStatus=FAILED&quot;</span>
</code></pre>
<h3 id="4-íŠ¹ì •-ì„œë¹„ìŠ¤ì˜-ë°œì†¡-ì´ë ¥">4. íŠ¹ì • ì„œë¹„ìŠ¤ì˜ ë°œì†¡ ì´ë ¥</h3>
<pre><code class="language-bash">curl -X GET <span class="hljs-string">&quot;http://localhost/api/alimtalk/logs?serviceName=MemberService&quot;</span>
</code></pre>
<hr>
<h2 id="ï¸-ì£¼ì˜ì‚¬í•­">âš ï¸ ì£¼ì˜ì‚¬í•­</h2>
<h3 id="1-ì—ëŸ¬-ì²˜ë¦¬">1. ì—ëŸ¬ ì²˜ë¦¬</h3>
<p>ì•Œë¦¼í†¡ ë°œì†¡ ì‹¤íŒ¨ëŠ” <strong>í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šë„ë¡</strong> ì²˜ë¦¬í•˜ì„¸ìš”.</p>
<pre><code class="language-java"><span class="hljs-comment">// âŒ ë‚˜ìœ ì˜ˆ: ì•Œë¦¼í†¡ ì‹¤íŒ¨ ì‹œ íšŒì›ê°€ì… ë¡¤ë°±</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">signUp</span><span class="hljs-params">(SignUpRequest request)</span> {
    <span class="hljs-type">Member</span> <span class="hljs-variable">member</span> <span class="hljs-operator">=</span> memberRepository.save(newMember);
    alimtalkClient.sendWelcomeMessage(...); <span class="hljs-comment">// ì˜ˆì™¸ ë°œìƒ ì‹œ ë¡¤ë°±ë¨</span>
}

<span class="hljs-comment">// âœ… ì¢‹ì€ ì˜ˆ: ì•Œë¦¼í†¡ ì‹¤íŒ¨í•´ë„ íšŒì›ê°€ì…ì€ ì„±ê³µ</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">signUp</span><span class="hljs-params">(SignUpRequest request)</span> {
    <span class="hljs-type">Member</span> <span class="hljs-variable">member</span> <span class="hljs-operator">=</span> memberRepository.save(newMember);
    
    <span class="hljs-keyword">try</span> {
        alimtalkClient.sendWelcomeMessage(...);
    } <span class="hljs-keyword">catch</span> (Exception e) {
        log.warn(<span class="hljs-string">&quot;ì•Œë¦¼í†¡ ë°œì†¡ ì‹¤íŒ¨ (íšŒì›ê°€ì…ì€ ì™„ë£Œ): memberId={}&quot;</span>, member.getId());
    }
}
</code></pre>
<h3 id="2-ë¹„ë™ê¸°-ë°œì†¡-ê¶Œì¥">2. ë¹„ë™ê¸° ë°œì†¡ ê¶Œì¥</h3>
<p>ëŒ€ëŸ‰ ë°œì†¡ì´ë‚˜ ì„±ëŠ¥ì´ ì¤‘ìš”í•œ ê²½ìš° ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.</p>
<pre><code class="language-java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AlimtalkAsyncClient</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AlimtalkClient alimtalkClient;
    
    <span class="hljs-meta">@Async</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Void&gt; <span class="hljs-title function_">sendAsync</span><span class="hljs-params">(String phoneNumber, String email)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.runAsync(() -&gt; 
            alimtalkClient.sendWelcomeMessage(phoneNumber, email)
        );
    }
}
</code></pre>
<h3 id="3-ì¬ì‹œë„-ë¡œì§-ì„ íƒì‚¬í•­">3. ì¬ì‹œë„ ë¡œì§ (ì„ íƒì‚¬í•­)</h3>
<p>ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ë¥¼ ì›í•˜ë©´ Spring Retryë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.</p>
<pre><code class="language-java"><span class="hljs-meta">@Retryable(
    value = {HttpClientErrorException.class},
    maxAttempts = 3,
    backoff = @Backoff(delay = 2000)
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendAlimtalk</span><span class="hljs-params">(...)</span> {
    <span class="hljs-comment">// ë°œì†¡ ë¡œì§</span>
}
</code></pre>
<h3 id="4-ì „í™”ë²ˆí˜¸-í˜•ì‹">4. ì „í™”ë²ˆí˜¸ í˜•ì‹</h3>
<ul>
<li><strong>í•˜ì´í”ˆ í¬í•¨</strong>: <code>010-1234-5678</code> (ê¶Œì¥)</li>
<li><strong>í•˜ì´í”ˆ ì—†ìŒ</strong>: <code>01012345678</code> (ì§€ì›)</li>
</ul>
<hr>
<h2 id="-ìƒˆ-í…œí”Œë¦¿-ì¶”ê°€-ìš”ì²­">ğŸ†• ìƒˆ í…œí”Œë¦¿ ì¶”ê°€ ìš”ì²­</h2>
<p>ìƒˆë¡œìš´ ì•Œë¦¼í†¡ í…œí”Œë¦¿ì´ í•„ìš”í•˜ë©´ ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì„œ ìš”ì²­í•˜ì„¸ìš”:</p>
<ol>
<li><strong>í…œí”Œë¦¿ ID</strong>: ì˜ë¬¸ ì†Œë¬¸ì + ì–¸ë”ìŠ¤ì½”ì–´ (ì˜ˆ: <code>password_reset</code>)</li>
<li><strong>í…œí”Œë¦¿ ëª…ì¹­</strong>: í•œê¸€ ëª…ì¹­ (ì˜ˆ: &quot;ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •&quot;)</li>
<li><strong>ë©”ì‹œì§€ ë‚´ìš©</strong>: ì‹¤ì œ ë°œì†¡ë  ë©”ì‹œì§€</li>
<li><strong>í•„ìˆ˜ íŒŒë¼ë¯¸í„°</strong>: ì¹˜í™˜ë  íŒŒë¼ë¯¸í„° ëª©ë¡ (ì˜ˆ: <code>ì¸ì¦ë²ˆí˜¸,ìœ íš¨ì‹œê°„</code>)</li>
<li><strong>ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤</strong>: ì–¸ì œ ë°œì†¡ë˜ëŠ”ì§€ ì„¤ëª…</li>
</ol>
<p><strong>ì˜ˆì‹œ:</strong></p>
<pre><code>í…œí”Œë¦¿ ID: password_reset
í…œí”Œë¦¿ ëª…ì¹­: ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •
ë©”ì‹œì§€ ë‚´ìš©:
[ì•„ë§ˆë…¸íŒŒí‚¹]
ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ìš”ì²­

ì¸ì¦ë²ˆí˜¸: #{ì¸ì¦ë²ˆí˜¸}
ìœ íš¨ì‹œê°„: #{ìœ íš¨ì‹œê°„}

í•„ìˆ˜ íŒŒë¼ë¯¸í„°: ì¸ì¦ë²ˆí˜¸, ìœ íš¨ì‹œê°„
ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤: ì‚¬ìš©ìê°€ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •ì„ ìš”ì²­í•  ë•Œ
</code></pre>
<hr>
<h2 id="-ë¬¸ì œ-í•´ê²°">ğŸ› ë¬¸ì œ í•´ê²°</h2>
<h3 id="ë¬¸ì œ-1-í…œí”Œë¦¿ì„-ì°¾ì„-ìˆ˜-ì—†ìŠµë‹ˆë‹¤">ë¬¸ì œ 1: &quot;í…œí”Œë¦¿ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤&quot;</h3>
<p><strong>ì›ì¸</strong>: í…œí”Œë¦¿ IDê°€ ì˜ëª»ë˜ì—ˆê±°ë‚˜ ë¹„í™œì„±í™” ìƒíƒœ</p>
<p><strong>í•´ê²°ì±…:</strong></p>
<pre><code class="language-bash"><span class="hljs-comment"># í™œì„±í™”ëœ í…œí”Œë¦¿ í™•ì¸</span>
curl -X GET <span class="hljs-string">&quot;http://localhost/api/alimtalk/templates?activeOnly=true&quot;</span>
</code></pre>
<h3 id="ë¬¸ì œ-2-í•„ìˆ˜-íŒŒë¼ë¯¸í„°-ëˆ„ë½">ë¬¸ì œ 2: &quot;í•„ìˆ˜ íŒŒë¼ë¯¸í„° ëˆ„ë½&quot;</h3>
<p><strong>ì›ì¸</strong>: <code>templateParams</code>ì— í•„ìˆ˜ íŒŒë¼ë¯¸í„°ê°€ ì—†ìŒ</p>
<p><strong>í•´ê²°ì±…:</strong> í…œí”Œë¦¿ì˜ <code>requiredParams</code>ë¥¼ í™•ì¸í•˜ê³  ëª¨ë“  íŒŒë¼ë¯¸í„°ë¥¼ ì „ë‹¬í•˜ì„¸ìš”.</p>
<pre><code class="language-java"><span class="hljs-comment">// âŒ ë‚˜ìœ ì˜ˆ: í•„ìˆ˜ íŒŒë¼ë¯¸í„° ëˆ„ë½</span>
Map&lt;String, String&gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
params.put(<span class="hljs-string">&quot;ì•„ì´ë””ëª…&quot;</span>, <span class="hljs-string">&quot;hong@example.com&quot;</span>);
<span class="hljs-comment">// ê°€ì…ë‚ ì§œ ëˆ„ë½!</span>

<span class="hljs-comment">// âœ… ì¢‹ì€ ì˜ˆ: ëª¨ë“  í•„ìˆ˜ íŒŒë¼ë¯¸í„° í¬í•¨</span>
Map&lt;String, String&gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
params.put(<span class="hljs-string">&quot;ì•„ì´ë””ëª…&quot;</span>, <span class="hljs-string">&quot;hong@example.com&quot;</span>);
params.put(<span class="hljs-string">&quot;ê°€ì…ë‚ ì§œ&quot;</span>, <span class="hljs-string">&quot;2025-11-16 14:30&quot;</span>);
</code></pre>
<h3 id="ë¬¸ì œ-3-ë°œì†¡ì€-ì„±ê³µí–ˆëŠ”ë°-ë¡œê·¸ì—-ë°œì†¡-ëŒ€ê¸°-ì¤‘">ë¬¸ì œ 3: ë°œì†¡ì€ ì„±ê³µí–ˆëŠ”ë° ë¡œê·¸ì— &quot;ë°œì†¡ ëŒ€ê¸° ì¤‘...&quot;</h3>
<p><strong>ì›ì¸</strong>: ì´ì „ ë²„ì „ ì½”ë“œ ì‚¬ìš© ì¤‘ (ë©”ì‹œì§€ ì—…ë°ì´íŠ¸ ì•ˆ ë¨)</p>
<p><strong>í•´ê²°ì±…:</strong> NotificationServiceë¥¼ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.</p>

            <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
            
        </body>
        </html>