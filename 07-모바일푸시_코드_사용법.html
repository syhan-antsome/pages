<!DOCTYPE html>
<html>

<head>
    <title>07-ëª¨ë°”ì¼í‘¸ì‹œ_ì½”ë“œ_ì‚¬ìš©ë²•.md</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    
<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

html,footer,header{
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Base16 Atelier Cave Light - Theme */
/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/cave) */
/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */

/* Atelier-Cave Comment */
.hljs-comment,
.hljs-quote {
  color: #655f6d;
}

/* Atelier-Cave Red */
.hljs-variable,
.hljs-template-variable,
.hljs-attribute,
.hljs-tag,
.hljs-name,
.hljs-regexp,
.hljs-link,
.hljs-name,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class {
  color: #be4678;
}

/* Atelier-Cave Orange */
.hljs-number,
.hljs-meta,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params {
  color: #aa573c;
}

/* Atelier-Cave Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet {
  color: #2a9292;
}

/* Atelier-Cave Blue */
.hljs-title,
.hljs-section {
  color: #576ddb;
}

/* Atelier-Cave Purple */
.hljs-keyword,
.hljs-selector-tag {
  color: #955ae7;
}

.hljs-deletion,
.hljs-addition {
  color: #19171c;
  display: inline-block;
  width: 100%;
}

.hljs-deletion {
  background-color: #be4678;
}

.hljs-addition {
  background-color: #2a9292;
}

.hljs {
  display: block;
  overflow-x: auto;
  background: #efecf4;
  color: #585260;
  padding: 0.5em;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}

</style>

<style>
/*
 * Custom MD PDF CSS
 */
html,footer,header{
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";

 }
body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>
<link rel="stylesheet" href="file:///Users/sangyonghan/development/Amano/akc-b2c/R%3A%5C2.Travail%5C1.Enseignement%5CCours%5C_1.Outils%5C2.Developpement%5C1.SCSS%5Cmain.css" type="text/css"><link rel="stylesheet" href="file:///Users/sangyonghan/development/Amano/akc-b2c/D%3A%5Crdaros%5CCours%5C_1.Outils%5C2.Developpement%5C1.SCSS%5Cmain.css" type="text/css">
</head>

<body>
    <h1 id="%F0%9F%94%94-%EB%AA%A8%EB%B0%94%EC%9D%BC-%ED%91%B8%EC%8B%9C-%EC%95%8C%EB%A6%BC-%EC%82%AC%EC%9A%A9-%EA%B0%80%EC%9D%B4%EB%93%9C">ğŸ”” ëª¨ë°”ì¼ í‘¸ì‹œ ì•Œë¦¼ ì‚¬ìš© ê°€ì´ë“œ</h1>
<hr>
<h3 id="1-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85">1. ì˜ì¡´ì„± ì£¼ì…</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> com.akc.b2c.common.push.service.IPushNotificationService;
<span class="hljs-keyword">import</span> com.akc.b2c.common.push.dto.PushNotificationResponse;
<span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-meta">@Slf</span>4j
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">YourService</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> IPushNotificationService pushNotificationService;
}
</div></code></pre>
<h3 id="2-%ED%91%B8%EC%8B%9C-%EC%A0%84%EC%86%A1">2. í‘¸ì‹œ ì „ì†¡</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// íšŒì› IDë§Œ ì•Œë©´ ë!</span>
PushNotificationResponse response = pushNotificationService.sendByMemberId(
    <span class="hljs-number">222L</span>,  <span class="hljs-comment">// íšŒì› ID</span>
    <span class="hljs-string">"ì£¼ë¬¸ í™•ì •"</span>,
    <span class="hljs-string">"ì£¼ë¬¸ë²ˆí˜¸ #12345ê°€ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤"</span>,
    <span class="hljs-keyword">null</span>
);
</div></code></pre>
<h3 id="3-%EA%B2%B0%EA%B3%BC-%ED%99%95%EC%9D%B8">3. ê²°ê³¼ í™•ì¸</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">if</span> (response.isSuccess()) {
    log.info(<span class="hljs-string">"ì „ì†¡ ì„±ê³µ: {}"</span>, response.getMessageId());
}
</div></code></pre>
<hr>
<h2 id="%F0%9F%93%9A-%EA%B5%AC%ED%98%84%EB%90%9C-8%EA%B0%80%EC%A7%80-api-%EC%A0%84%EC%B2%B4-%EC%99%84%EB%A3%8C">ğŸ“š êµ¬í˜„ëœ 8ê°€ì§€ API (ì „ì²´ ì™„ë£Œ!)</h2>
<table>
<thead>
<tr>
<th>API</th>
<th>ì‚¬ìš© ì‹œì </th>
<th>ì»¤ë²„ë¦¬ì§€</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>#1 Token ë‹¨ì¼</strong></td>
<td>íŠ¹ì • ë””ë°”ì´ìŠ¤ ì§€ì • ì „ì†¡</td>
<td>3%</td>
</tr>
<tr>
<td><strong>#2 Token ë‹¤ìˆ˜</strong></td>
<td>ì—¬ëŸ¬ ë””ë°”ì´ìŠ¤ ë™ì‹œ ì „ì†¡</td>
<td>2%</td>
</tr>
<tr>
<td><strong>#3 Token + í…œí”Œë¦¿</strong></td>
<td>í…œí”Œë¦¿ ê¸°ë°˜ ë‹¨ì¼ ì „ì†¡</td>
<td>3%</td>
</tr>
<tr>
<td><strong>#4 Token ë‹¤ìˆ˜ + í…œí”Œë¦¿</strong></td>
<td>í…œí”Œë¦¿ ë©€í‹°ìºìŠ¤íŠ¸</td>
<td>2%</td>
</tr>
<tr>
<td><strong>#5 íšŒì› ID ë‹¨ì¼</strong> â­</td>
<td>ê°œì¸í™” ì•Œë¦¼ (ê°€ì¥ ë§ì´ ì‚¬ìš©)</td>
<td>50%</td>
</tr>
<tr>
<td><strong>#6 íšŒì› ID ë‹¤ìˆ˜</strong></td>
<td>ëŒ€ëŸ‰ ë°œì†¡ (ê³µì§€, ì´ë²¤íŠ¸)</td>
<td>20%</td>
</tr>
<tr>
<td><strong>#7 íšŒì› ID ë‹¨ì¼ + í…œí”Œë¦¿</strong></td>
<td>í…œí”Œë¦¿ ê°œì¸í™” ì•Œë¦¼</td>
<td>15%</td>
</tr>
<tr>
<td><strong>#8 íšŒì› ID ë‹¤ìˆ˜ + í…œí”Œë¦¿</strong></td>
<td>í…œí”Œë¦¿ ëŒ€ëŸ‰ ë°œì†¡</td>
<td>5%</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="1%EF%B8%8F%E2%83%A3-token-%EB%8B%A8%EC%9D%BC-%EC%A0%84%EC%86%A1">1ï¸âƒ£ Token ë‹¨ì¼ ì „ì†¡</h2>
<h3 id="java-%EC%BD%94%EB%93%9C">Java ì½”ë“œ</h3>
<pre class="hljs"><code><div>PushNotificationRequest request = PushNotificationRequest.builder()
    .deviceToken(<span class="hljs-string">"dpanRX1ZSkw...FCM_í† í°"</span>)
    .title(<span class="hljs-string">"ì£¼ë¬¸ í™•ì •"</span>)
    .body(<span class="hljs-string">"ì£¼ë¬¸ë²ˆí˜¸ #12345ê°€ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤"</span>)
    .data(Map.of(
        <span class="hljs-string">"orderId"</span>, <span class="hljs-string">"12345"</span>,
        <span class="hljs-string">"deepLink"</span>, <span class="hljs-string">"amano://order/12345"</span>
    ))
    .build();

PushNotificationResponse response = pushNotificationService.send(request);
</div></code></pre>
<h3 id="rest-api-test-%EC%9A%A9%EB%8F%84%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%A0%EC%88%98-%EC%9E%88%EC%9D%8C">REST API (test ìš©ë„ë¡œ ì‚¬ìš©í• ìˆ˜ ìˆìŒ)</h3>
<pre class="hljs"><code><div>POST /api/notifications/push/send?memberId=222
Content-Type: application/json

{
  <span class="hljs-string">"deviceToken"</span>: <span class="hljs-string">"dpanRX1ZSkw...FCM_í† í°"</span>,
  <span class="hljs-string">"title"</span>: <span class="hljs-string">"ì£¼ë¬¸ í™•ì •"</span>,
  <span class="hljs-string">"body"</span>: <span class="hljs-string">"ì£¼ë¬¸ë²ˆí˜¸ #12345ê°€ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤"</span>,
  <span class="hljs-string">"data"</span>: {
    <span class="hljs-string">"orderId"</span>: <span class="hljs-string">"12345"</span>,
    <span class="hljs-string">"deepLink"</span>: <span class="hljs-string">"amano://order/12345"</span>
  }
}
</div></code></pre>
<hr>
<h2 id="2%EF%B8%8F%E2%83%A3-token-%EB%8B%A4%EC%88%98-%EC%A0%84%EC%86%A1-%EB%A9%80%ED%8B%B0%EC%BA%90%EC%8A%A4%ED%8A%B8">2ï¸âƒ£ Token ë‹¤ìˆ˜ ì „ì†¡ (ë©€í‹°ìºìŠ¤íŠ¸)</h2>
<h3 id="java-%EC%BD%94%EB%93%9C">Java ì½”ë“œ</h3>
<pre class="hljs"><code><div>PushNotificationRequest request = PushNotificationRequest.builder()
    .deviceTokens(List.of(<span class="hljs-string">"token1"</span>, <span class="hljs-string">"token2"</span>, <span class="hljs-string">"token3"</span>))
    .title(<span class="hljs-string">"ì‹œìŠ¤í…œ ì ê²€ ì•ˆë‚´"</span>)
    .body(<span class="hljs-string">"ì˜¤ëŠ˜ ë°¤ 11ì‹œë¶€í„° ì ê²€ì´ ì§„í–‰ë©ë‹ˆë‹¤"</span>)
    .build();

PushNotificationResponse response = pushNotificationService.send(request);
log.info(<span class="hljs-string">"ì„±ê³µ: {}, ì‹¤íŒ¨: {}"</span>, response.getSuccessCount(), response.getFailureCount());
</div></code></pre>
<h3 id="rest-api-test-%EC%9A%A9%EB%8F%84%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%A0%EC%88%98-%EC%9E%88%EC%9D%8C">REST API (test ìš©ë„ë¡œ ì‚¬ìš©í• ìˆ˜ ìˆìŒ)</h3>
<pre class="hljs"><code><div>POST /api/notifications/push/send-multicast?memberId=222
Content-Type: application/json

{
  <span class="hljs-string">"deviceTokens"</span>: [<span class="hljs-string">"token1"</span>, <span class="hljs-string">"token2"</span>, <span class="hljs-string">"token3"</span>],
  <span class="hljs-string">"title"</span>: <span class="hljs-string">"ì‹œìŠ¤í…œ ì ê²€ ì•ˆë‚´"</span>,
  <span class="hljs-string">"body"</span>: <span class="hljs-string">"ì˜¤ëŠ˜ ë°¤ 11ì‹œë¶€í„° ì ê²€ì´ ì§„í–‰ë©ë‹ˆë‹¤"</span>
}
</div></code></pre>
<hr>
<h2 id="3%EF%B8%8F%E2%83%A3-token--%ED%85%9C%ED%94%8C%EB%A6%BF-%EC%A0%84%EC%86%A1">3ï¸âƒ£ Token + í…œí”Œë¦¿ ì „ì†¡</h2>
<p><strong>íŠ¹ì§•</strong>:</p>
<ul>
<li>âœ… title, body, data ëª¨ë‘ ë³€ìˆ˜ ì¹˜í™˜ ê°€ëŠ¥</li>
<li>âœ… <code>${ë³€ìˆ˜ëª…}</code> í˜•íƒœë¡œ ì‚¬ìš©</li>
<li>âœ… ì¼ê´€ëœ ë©”ì‹œì§€ ê´€ë¦¬ ìš©ì´</li>
</ul>
<h3 id="java-%EC%BD%94%EB%93%9C">Java ì½”ë“œ</h3>
<pre class="hljs"><code><div>Map&lt;String, String&gt; params = Map.of(
    <span class="hljs-string">"orderNo"</span>, <span class="hljs-string">"20260117-001"</span>,
    <span class="hljs-string">"orderDate"</span>, <span class="hljs-string">"2026-01-17"</span>,
    <span class="hljs-string">"amount"</span>, <span class="hljs-string">"50,000"</span>
);

PushNotificationResponse response = pushNotificationService.sendByTemplate(
    <span class="hljs-string">"dpanRX1ZSkw...FCM_í† í°"</span>,
    <span class="hljs-string">"PUSH0001"</span>,  <span class="hljs-comment">// í…œí”Œë¦¿ ID</span>
    params
);
</div></code></pre>
<h3 id="rest-api-test-%EC%9A%A9%EB%8F%84%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%A0%EC%88%98-%EC%9E%88%EC%9D%8C">REST API (test ìš©ë„ë¡œ ì‚¬ìš©í• ìˆ˜ ìˆìŒ)</h3>
<pre class="hljs"><code><div>POST /api/notifications/push/send-by-template?memberId=222
Content-Type: application/json

{
  <span class="hljs-string">"deviceToken"</span>: <span class="hljs-string">"dpanRX1ZSkw...FCM_í† í°"</span>,
  <span class="hljs-string">"templateId"</span>: <span class="hljs-string">"PUSH0001"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"orderNo"</span>: <span class="hljs-string">"20260117-001"</span>,
    <span class="hljs-string">"orderDate"</span>: <span class="hljs-string">"2026-01-17"</span>,
    <span class="hljs-string">"amount"</span>: <span class="hljs-string">"50,000"</span>
  }
}
</div></code></pre>
<h3 id="%ED%85%9C%ED%94%8C%EB%A6%BF-%EC%98%88%EC%8B%9C-%EC%8B%A4%EC%A0%9C-%EB%8D%B0%EC%9D%B4%ED%83%80-%EC%95%84%EB%8B%98">í…œí”Œë¦¿ ì˜ˆì‹œ  (ì‹¤ì œ ë°ì´íƒ€ ì•„ë‹˜)</h3>
<table>
<thead>
<tr>
<th>í…œí”Œë¦¿ ID</th>
<th>ì œëª©</th>
<th>ë‚´ìš©</th>
<th>íŒŒë¼ë¯¸í„°</th>
</tr>
</thead>
<tbody>
<tr>
<td>PUSH0001</td>
<td>ì£¼ë¬¸ í™•ì •</td>
<td>ì£¼ë¬¸ë²ˆí˜¸ ${orderNo}ê°€ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤</td>
<td>orderNo, amount</td>
</tr>
<tr>
<td>PUSH0002</td>
<td>ì´ë²¤íŠ¸ ì•Œë¦¼</td>
<td>${eventName} - ${discount} í• ì¸!</td>
<td>eventName, discount</td>
</tr>
<tr>
<td>PUSH0003</td>
<td>ê²°ì œ ì™„ë£Œ</td>
<td>${amount}ì› ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤</td>
<td>amount, method</td>
</tr>
</tbody>
</table>
<h3 id="%F0%9F%94%A5-%EB%B3%80%EC%88%98-%EC%B9%98%ED%99%98-%EC%83%81%EC%84%B8-%EC%98%88%EC%8B%9C">ğŸ”¥ ë³€ìˆ˜ ì¹˜í™˜ ìƒì„¸ ì˜ˆì‹œ</h3>
<p>**í…œí”Œë¦¿ (PUSH0001) DB ì €ì¥ ë‚´ìš© **:</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"templateId"</span>: <span class="hljs-string">"PUSH0001"</span>,
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"ì£¼ë¬¸ í™•ì •"</span>,
  <span class="hljs-attr">"body"</span>: <span class="hljs-string">"ì£¼ë¬¸ë²ˆí˜¸ ${orderNo}ê°€ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ê¸ˆì•¡: ${amount}ì›"</span>,
  <span class="hljs-attr">"dataKeys"</span>: {
    <span class="hljs-attr">"orderId"</span>: <span class="hljs-string">"${orderNo}"</span>,
    <span class="hljs-attr">"deepLink"</span>: <span class="hljs-string">"amano://order/${orderNo}"</span>,
    <span class="hljs-attr">"amount"</span>: <span class="hljs-string">"${amount}"</span>
  }
}
</div></code></pre>
<p><strong>ì „ì†¡ ì½”ë“œ</strong>:</p>
<pre class="hljs"><code><div>Map&lt;String, String&gt; params = Map.of(
    <span class="hljs-string">"orderNo"</span>, <span class="hljs-string">"20260117-001"</span>,
    <span class="hljs-string">"amount"</span>, <span class="hljs-string">"50,000"</span>
);

pushNotificationService.sendByTemplate(token, <span class="hljs-string">"PUSH0001"</span>, params);
</div></code></pre>
<p><strong>ì‹¤ì œ ì „ì†¡ë˜ëŠ” ë©”ì‹œì§€</strong>:</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"ì£¼ë¬¸ í™•ì •"</span>,
  <span class="hljs-attr">"body"</span>: <span class="hljs-string">"ì£¼ë¬¸ë²ˆí˜¸ 20260117-001ê°€ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ê¸ˆì•¡: 50,000ì›"</span>,
  <span class="hljs-attr">"data"</span>: {
    <span class="hljs-attr">"orderId"</span>: <span class="hljs-string">"20260117-001"</span>,
    <span class="hljs-attr">"deepLink"</span>: <span class="hljs-string">"amano://order/20260117-001"</span>,
    <span class="hljs-attr">"amount"</span>: <span class="hljs-string">"50,000"</span>
  }
}
</div></code></pre>
<blockquote>
<p>ğŸ’¡ <strong>ì¤‘ìš”</strong>: title, bodyë¿ë§Œ ì•„ë‹ˆë¼ <strong>data í•„ë“œì˜ ê°’ë“¤ë„ ëª¨ë‘ ë³€ìˆ˜ ì¹˜í™˜</strong>ë©ë‹ˆë‹¤!</p>
</blockquote>
<hr>
<h2 id="4%EF%B8%8F%E2%83%A3-token-%EB%8B%A4%EC%88%98--%ED%85%9C%ED%94%8C%EB%A6%BF-%EC%A0%84%EC%86%A1">4ï¸âƒ£ Token ë‹¤ìˆ˜ + í…œí”Œë¦¿ ì „ì†¡</h2>
<p><strong>ì–¸ì œ?</strong> íŠ¹ì • ë””ë°”ì´ìŠ¤ ê·¸ë£¹ì— í…œí”Œë¦¿ ë©”ì‹œì§€ ì „ì†¡</p>
<h3 id="java-%EC%BD%94%EB%93%9C">Java ì½”ë“œ</h3>
<pre class="hljs"><code><div>List&lt;String&gt; deviceTokens = List.of(<span class="hljs-string">"token1"</span>, <span class="hljs-string">"token2"</span>, <span class="hljs-string">"token3"</span>);
Map&lt;String, String&gt; params = Map.of(
    <span class="hljs-string">"eventName"</span>, <span class="hljs-string">"VIP ì „ìš© ì´ë²¤íŠ¸"</span>,
    <span class="hljs-string">"discount"</span>, <span class="hljs-string">"30%"</span>
);

PushNotificationResponse response = pushNotificationService.sendMulticastByTemplate(
    deviceTokens,
    <span class="hljs-string">"PUSH0002"</span>,  <span class="hljs-comment">// í…œí”Œë¦¿ ID</span>
    params
);
</div></code></pre>
<h3 id="rest-api-test-%EC%9A%A9%EB%8F%84%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%A0%EC%88%98-%EC%9E%88%EC%9D%8C">REST API (test ìš©ë„ë¡œ ì‚¬ìš©í• ìˆ˜ ìˆìŒ)</h3>
<pre class="hljs"><code><div>POST /api/notifications/push/send-multicast-by-template?memberId=222
Content-Type: application/json

{
  <span class="hljs-string">"deviceTokens"</span>: [<span class="hljs-string">"token1"</span>, <span class="hljs-string">"token2"</span>, <span class="hljs-string">"token3"</span>],
  <span class="hljs-string">"templateId"</span>: <span class="hljs-string">"PUSH0002"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"eventName"</span>: <span class="hljs-string">"VIP ì „ìš© ì´ë²¤íŠ¸"</span>,
    <span class="hljs-string">"discount"</span>: <span class="hljs-string">"30%"</span>
  }
}
</div></code></pre>
<hr>
<h2 id="5%EF%B8%8F%E2%83%A3-%ED%9A%8C%EC%9B%90-id-%EB%8B%A8%EC%9D%BC-%EC%A0%84%EC%86%A1-%E2%AD%90-%EA%B0%80%EC%9E%A5-%EB%A7%8E%EC%9D%B4-%EC%82%AC%EC%9A%A9">5ï¸âƒ£ íšŒì› ID ë‹¨ì¼ ì „ì†¡ â­ (ê°€ì¥ ë§ì´ ì‚¬ìš©)</h2>
<p><strong>ì–¸ì œ?</strong> ì£¼ë¬¸, ê²°ì œ, ì¿ í° ì§€ê¸‰ ë“± ê°œì¸í™” ì•Œë¦¼</p>
<p><strong>ì¥ì </strong>:</p>
<ul>
<li>âœ… í† í° ê´€ë¦¬ ë¶ˆí•„ìš”</li>
<li>âœ… íšŒì›ì˜ ëª¨ë“  ë””ë°”ì´ìŠ¤(ì•„ì´í°+ì•ˆë“œë¡œì´ë“œ)ì— ìë™ ì „ì†¡</li>
<li>âœ… ë¹„í™œì„± í† í° ìë™ í•„í„°ë§</li>
</ul>
<h3 id="java-%EC%BD%94%EB%93%9C">Java ì½”ë“œ</h3>
<pre class="hljs"><code><div>Map&lt;String, String&gt; data = Map.of(
    <span class="hljs-string">"couponId"</span>, <span class="hljs-string">"CP001"</span>,
    <span class="hljs-string">"deepLink"</span>, <span class="hljs-string">"amano://coupon/CP001"</span>
);

PushNotificationResponse response = pushNotificationService.sendByMemberId(
    <span class="hljs-number">222L</span>,  <span class="hljs-comment">// íšŒì› ID</span>
    <span class="hljs-string">"ğŸ ì¿ í° ì§€ê¸‰ ì™„ë£Œ"</span>,
    <span class="hljs-string">"5,000ì› í• ì¸ ì¿ í°ì´ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤"</span>,
    data
);
</div></code></pre>
<h3 id="rest-api-test-%EC%9A%A9%EB%8F%84%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%A0%EC%88%98-%EC%9E%88%EC%9D%8C">REST API (test ìš©ë„ë¡œ ì‚¬ìš©í• ìˆ˜ ìˆìŒ)</h3>
<pre class="hljs"><code><div>POST /api/notifications/push/send-to-all-devices?memberId=222
Content-Type: application/json

{
  <span class="hljs-string">"title"</span>: <span class="hljs-string">"ğŸ ì¿ í° ì§€ê¸‰ ì™„ë£Œ"</span>,
  <span class="hljs-string">"body"</span>: <span class="hljs-string">"5,000ì› í• ì¸ ì¿ í°ì´ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤"</span>,
  <span class="hljs-string">"data"</span>: {
    <span class="hljs-string">"couponId"</span>: <span class="hljs-string">"CP001"</span>,
    <span class="hljs-string">"deepLink"</span>: <span class="hljs-string">"amano://coupon/CP001"</span>
  }
}
</div></code></pre>
<h3 id="%EC%8B%A4%EC%A0%84-%EC%98%88%EC%8B%9C">ì‹¤ì „ ì˜ˆì‹œ</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// ì£¼ë¬¸ í™•ì • ì‹œ</span>
orderService.confirmOrder(orderId);
pushNotificationService.sendByMemberId(
    order.getMemberId(),
    <span class="hljs-string">"ì£¼ë¬¸ í™•ì •"</span>,
    <span class="hljs-string">"ì£¼ë¬¸ë²ˆí˜¸ #"</span> + orderId + <span class="hljs-string">"ê°€ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤"</span>,
    Map.of(<span class="hljs-string">"orderId"</span>, orderId.toString())
);

<span class="hljs-comment">// ê²°ì œ ì™„ë£Œ ì‹œ</span>
paymentService.completePayment(paymentId);
pushNotificationService.sendByMemberId(
    payment.getMemberId(),
    <span class="hljs-string">"ê²°ì œ ì™„ë£Œ"</span>,
    payment.getAmount() + <span class="hljs-string">"ì› ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤"</span>,
    Map.of(<span class="hljs-string">"paymentId"</span>, paymentId.toString())
);
</div></code></pre>
<hr>
<h2 id="6%EF%B8%8F%E2%83%A3-%ED%9A%8C%EC%9B%90-id-%EB%8B%A4%EC%88%98-%EC%A0%84%EC%86%A1-%E2%AD%90-%EB%8C%80%EB%9F%89-%EB%B0%9C%EC%86%A1">6ï¸âƒ£ íšŒì› ID ë‹¤ìˆ˜ ì „ì†¡ â­ (ëŒ€ëŸ‰ ë°œì†¡)</h2>
<p><strong>ì–¸ì œ?</strong> ê³µì§€ì‚¬í•­, ì´ë²¤íŠ¸, VIP í˜œíƒ ë“± ì—¬ëŸ¬ íšŒì›ì—ê²Œ ì¼ê´„ ì „ì†¡</p>
<h3 id="java-%EC%BD%94%EB%93%9C">Java ì½”ë“œ</h3>
<pre class="hljs"><code><div>List&lt;Long&gt; vipMembers = memberRepository.findVipMemberIds();

PushNotificationResponse response = pushNotificationService.sendByMemberIds(
    vipMembers,
    <span class="hljs-string">"ğŸ’ VIP ì „ìš© í˜œíƒ"</span>,
    <span class="hljs-string">"VIP íšŒì›ë‹˜ê»˜ íŠ¹ë³„ í• ì¸ ì¿ í°ì„ ë“œë¦½ë‹ˆë‹¤"</span>,
    Map.of(<span class="hljs-string">"vipLevel"</span>, <span class="hljs-string">"GOLD"</span>)
);
</div></code></pre>
<h3 id="rest-api-test-%EC%9A%A9%EB%8F%84%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%A0%EC%88%98-%EC%9E%88%EC%9D%8C">REST API (test ìš©ë„ë¡œ ì‚¬ìš©í• ìˆ˜ ìˆìŒ)</h3>
<pre class="hljs"><code><div>POST /api/notifications/push/send-to-multiple-users
Content-Type: application/json

{
  <span class="hljs-string">"memberIds"</span>: [100, 200, 300],
  <span class="hljs-string">"title"</span>: <span class="hljs-string">"ì‹œìŠ¤í…œ ì ê²€ ì•ˆë‚´"</span>,
  <span class="hljs-string">"body"</span>: <span class="hljs-string">"ê¸ˆì¼ 23:00 ~ 01:00 ì‹œìŠ¤í…œ ì ê²€ì´ ì§„í–‰ë©ë‹ˆë‹¤"</span>
}
</div></code></pre>
<h3 id="%EC%8B%A4%EC%A0%84-%EC%98%88%EC%8B%9C">ì‹¤ì „ ì˜ˆì‹œ</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// ì´ë²¤íŠ¸ ë‹¹ì²¨ì ë°œí‘œ</span>
List&lt;Long&gt; winners = eventService.getWinners(eventId);
pushNotificationService.sendByMemberIds(
    winners,
    <span class="hljs-string">"ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ë‹¹ì²¨ë˜ì…¨ìŠµë‹ˆë‹¤"</span>,
    <span class="hljs-string">"ì‹ ë…„ ì´ë²¤íŠ¸ ì¶”ì²¨ ê²°ê³¼ ë‹¹ì²¨ë˜ì…¨ìŠµë‹ˆë‹¤"</span>,
    Map.of(<span class="hljs-string">"eventId"</span>, eventId.toString())
);

<span class="hljs-comment">// ì¿ í° ë§Œë£Œ ì•Œë¦¼ (ë§Œë£Œ 7ì¼ ì „)</span>
List&lt;Long&gt; expiringMembers = couponService.getMembersWithExpiringCoupons();
pushNotificationService.sendByMemberIds(
    expiringMembers,
    <span class="hljs-string">"â° ì¿ í° ë§Œë£Œ ì„ë°•"</span>,
    <span class="hljs-string">"7ì¼ í›„ ì¿ í°ì´ ë§Œë£Œë©ë‹ˆë‹¤. ì§€ê¸ˆ ì‚¬ìš©í•˜ì„¸ìš”!"</span>,
    <span class="hljs-keyword">null</span>
);
</div></code></pre>
<hr>
<h2 id="7%EF%B8%8F%E2%83%A3-%ED%9A%8C%EC%9B%90-id-%EB%8B%A8%EC%9D%BC--%ED%85%9C%ED%94%8C%EB%A6%BF-%EC%A0%84%EC%86%A1-%E2%AD%90">7ï¸âƒ£ íšŒì› ID ë‹¨ì¼ + í…œí”Œë¦¿ ì „ì†¡ â­</h2>
<p><strong>ì–¸ì œ?</strong> í…œí”Œë¦¿ì„ ì‚¬ìš©í•œ ê°œì¸í™” ì•Œë¦¼ (ì£¼ë¬¸, ê²°ì œ ë“±)</p>
<h3 id="java-%EC%BD%94%EB%93%9C">Java ì½”ë“œ</h3>
<pre class="hljs"><code><div>Map&lt;String, String&gt; params = Map.of(
    <span class="hljs-string">"orderNo"</span>, <span class="hljs-string">"20260117-001"</span>,
    <span class="hljs-string">"amount"</span>, <span class="hljs-string">"50,000"</span>
);

PushNotificationResponse response = pushNotificationService.sendByMemberIdWithTemplate(
    <span class="hljs-number">222L</span>,  <span class="hljs-comment">// íšŒì› ID</span>
    <span class="hljs-string">"PUSH0001"</span>,  <span class="hljs-comment">// í…œí”Œë¦¿ ID</span>
    params
);
</div></code></pre>
<h3 id="rest-api-test-%EC%9A%A9%EB%8F%84%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%A0%EC%88%98-%EC%9E%88%EC%9D%8C">REST API (test ìš©ë„ë¡œ ì‚¬ìš©í• ìˆ˜ ìˆìŒ)</h3>
<pre class="hljs"><code><div>POST /api/notifications/push/send-by-member-template?memberId=222
Content-Type: application/json

{
  <span class="hljs-string">"templateId"</span>: <span class="hljs-string">"PUSH0001"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"orderNo"</span>: <span class="hljs-string">"20260117-001"</span>,
    <span class="hljs-string">"amount"</span>: <span class="hljs-string">"50,000"</span>
  }
}
</div></code></pre>
<h3 id="%EC%8B%A4%EC%A0%84-%EC%98%88%EC%8B%9C">ì‹¤ì „ ì˜ˆì‹œ</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// ì£¼ë¬¸ í™•ì • (í…œí”Œë¦¿ ì‚¬ìš©)</span>
Map&lt;String, String&gt; params = Map.of(
    <span class="hljs-string">"orderNo"</span>, order.getOrderNo(),
    <span class="hljs-string">"orderDate"</span>, order.getCreatedAt().format(DateTimeFormatter.ISO_DATE),
    <span class="hljs-string">"amount"</span>, String.valueOf(order.getTotalAmount())
);

pushNotificationService.sendByMemberIdWithTemplate(
    order.getMemberId(),
    <span class="hljs-string">"PUSH0001"</span>,  <span class="hljs-comment">// ì£¼ë¬¸ í™•ì • í…œí”Œë¦¿</span>
    params
);
</div></code></pre>
<hr>
<h2 id="8%EF%B8%8F%E2%83%A3-%ED%9A%8C%EC%9B%90-id-%EB%8B%A4%EC%88%98--%ED%85%9C%ED%94%8C%EB%A6%BF-%EC%A0%84%EC%86%A1-%E2%AD%90">8ï¸âƒ£ íšŒì› ID ë‹¤ìˆ˜ + í…œí”Œë¦¿ ì „ì†¡ â­</h2>
<p><strong>ì–¸ì œ?</strong> í…œí”Œë¦¿ì„ ì‚¬ìš©í•œ ëŒ€ëŸ‰ ë°œì†¡ (ì´ë²¤íŠ¸, VIP í˜œíƒ ë“±)</p>
<h3 id="java-%EC%BD%94%EB%93%9C">Java ì½”ë“œ</h3>
<pre class="hljs"><code><div>List&lt;Long&gt; vipMembers = memberRepository.findVipMemberIds();
Map&lt;String, String&gt; params = Map.of(
    <span class="hljs-string">"eventName"</span>, <span class="hljs-string">"VIP ì „ìš© ì´ë²¤íŠ¸"</span>,
    <span class="hljs-string">"discount"</span>, <span class="hljs-string">"30%"</span>,
    <span class="hljs-string">"endDate"</span>, <span class="hljs-string">"2026-01-31"</span>
);

PushNotificationResponse response = pushNotificationService.sendByMemberIdsWithTemplate(
    vipMembers,
    <span class="hljs-string">"PUSH0002"</span>,  <span class="hljs-comment">// ì´ë²¤íŠ¸ í…œí”Œë¦¿</span>
    params
);
</div></code></pre>
<h3 id="rest-api-test-%EC%9A%A9%EB%8F%84%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%A0%EC%88%98-%EC%9E%88%EC%9D%8C">REST API (test ìš©ë„ë¡œ ì‚¬ìš©í• ìˆ˜ ìˆìŒ)</h3>
<pre class="hljs"><code><div>POST /api/notifications/push/send-to-multiple-users-by-template
Content-Type: application/json

{
  <span class="hljs-string">"memberIds"</span>: [100, 200, 300],
  <span class="hljs-string">"templateId"</span>: <span class="hljs-string">"PUSH0002"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"eventName"</span>: <span class="hljs-string">"VIP ì „ìš© ì´ë²¤íŠ¸"</span>,
    <span class="hljs-string">"discount"</span>: <span class="hljs-string">"30%"</span>,
    <span class="hljs-string">"endDate"</span>: <span class="hljs-string">"2026-01-31"</span>
  }
}
</div></code></pre>
<h3 id="%EC%8B%A4%EC%A0%84-%EC%98%88%EC%8B%9C">ì‹¤ì „ ì˜ˆì‹œ</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// ì¿ í° ë§Œë£Œ ì•Œë¦¼ (í…œí”Œë¦¿ ì‚¬ìš©)</span>
List&lt;Long&gt; expiringMembers = couponService.getMembersWithExpiringCoupons();
Map&lt;String, String&gt; params = Map.of(
    <span class="hljs-string">"days"</span>, <span class="hljs-string">"7"</span>,
    <span class="hljs-string">"couponName"</span>, <span class="hljs-string">"ì‹ ê·œê°€ì… ì¿ í°"</span>
);

pushNotificationService.sendByMemberIdsWithTemplate(
    expiringMembers,
    <span class="hljs-string">"PUSH0004"</span>,  <span class="hljs-comment">// ì¿ í° ë§Œë£Œ í…œí”Œë¦¿</span>
    params
);
</div></code></pre>
<hr>

</body>

</html>