<!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>&#xc18c;&#xc15c; &#xb85c;&#xadf8;&#xc778; &amp; &#xc18c;&#xc15c; &#xd68c;&#xc6d0;&#xac00;&#xc785; &#xc808;&#xcc28; &#xb3c4;&#xc2dd;&#xd654;</title>
            <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only],
.vscode-high-contrast:not(.vscode-high-contrast-light) img[src$=\#gh-light-mode-only],
.vscode-high-contrast-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true });
    </script>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
<style>
:root {
  --color-note: #0969da;
  --color-tip: #1a7f37;
  --color-warning: #9a6700;
  --color-severe: #bc4c00;
  --color-caution: #d1242f;
  --color-important: #8250df;
}

</style>
<style>
@media (prefers-color-scheme: dark) {
  :root {
    --color-note: #2f81f7;
    --color-tip: #3fb950;
    --color-warning: #d29922;
    --color-severe: #db6d28;
    --color-caution: #f85149;
    --color-important: #a371f7;
  }
}

</style>
<style>
.markdown-alert {
  padding: 0.5rem 1rem;
  margin-bottom: 16px;
  color: inherit;
  border-left: .25em solid #888;
}

.markdown-alert>:first-child {
  margin-top: 0
}

.markdown-alert>:last-child {
  margin-bottom: 0
}

.markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: 500;
  align-items: center;
  line-height: 1
}

.markdown-alert .markdown-alert-title .octicon {
  margin-right: 0.5rem;
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-alert.markdown-alert-note {
  border-left-color: var(--color-note);
}

.markdown-alert.markdown-alert-note .markdown-alert-title {
  color: var(--color-note);
}

.markdown-alert.markdown-alert-important {
  border-left-color: var(--color-important);
}

.markdown-alert.markdown-alert-important .markdown-alert-title {
  color: var(--color-important);
}

.markdown-alert.markdown-alert-warning {
  border-left-color: var(--color-warning);
}

.markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: var(--color-warning);
}

.markdown-alert.markdown-alert-tip {
  border-left-color: var(--color-tip);
}

.markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: var(--color-tip);
}

.markdown-alert.markdown-alert-caution {
  border-left-color: var(--color-caution);
}

.markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: var(--color-caution);
}

</style>
        
        </head>
        <body class="vscode-body vscode-light">
            <h1 id="ì†Œì…œ-ë¡œê·¸ì¸--ì†Œì…œ-íšŒì›ê°€ì…-ì ˆì°¨-ë„ì‹í™”">ì†Œì…œ ë¡œê·¸ì¸ &amp; ì†Œì…œ íšŒì›ê°€ì… ì ˆì°¨ ë„ì‹í™”</h1>
<h2 id="ï¸-ë³´ì•ˆ-ì£¼ì˜ì‚¬í•­">âš ï¸ ë³´ì•ˆ ì£¼ì˜ì‚¬í•­</h2>
<p><strong>ì¤‘ìš”</strong>: ì´ ë¬¸ì„œì˜ ëª¨ë“  API í‚¤ì™€ ì‹œí¬ë¦¿ ê°’ë“¤ì€ ì˜ˆì‹œìš© í”Œë ˆì´ìŠ¤í™€ë”ì…ë‹ˆë‹¤.</p>
<ul>
<li>ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ë°˜ë“œì‹œ ë³¸ì¸ì˜ ì‹¤ì œ í‚¤ê°’ì„ ì‚¬ìš©í•˜ì„¸ìš”</li>
<li>ëª¨ë“  ë¯¼ê°í•œ ì •ë³´ëŠ” í™˜ê²½ ë³€ìˆ˜(<code>.env</code> íŒŒì¼)ë¡œ ê´€ë¦¬í•˜ì„¸ìš”</li>
<li>ì´ëŸ° ë¯¼ê°í•œ ì •ë³´ëŠ” ì ˆëŒ€ ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œ(Git)ì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”</li>
</ul>
<h2 id="-ëª©ì°¨">ğŸ“‹ ëª©ì°¨</h2>
<ol>
<li><a href="#%EC%A0%84%EC%B2%B4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EA%B0%9C%EC%9A%94">ì „ì²´ ì•„í‚¤í…ì²˜ ê°œìš”</a></li>
<li><a href="#%EB%B0%B1%EC%97%94%EB%93%9C-%EA%B5%AC%ED%98%84-%EC%84%B8%EB%B6%80%EC%82%AC%ED%95%AD">ë°±ì—”ë“œ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­</a></li>
<li><a href="#%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EA%B5%AC%ED%98%84-%EA%B0%80%EC%9D%B4%EB%93%9C">í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ ê°€ì´ë“œ</a></li>
<li><a href="#%ED%94%8C%EB%9E%AB%ED%8F%BC%EB%B3%84-%EC%83%81%EC%84%B8-%ED%94%8C%EB%A1%9C%EC%9A%B0">í”Œë«í¼ë³„ ìƒì„¸ í”Œë¡œìš°</a></li>
<li><a href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B5%AC%EC%A1%B0-%EB%B0%8F-api-%EC%8A%A4%ED%8E%99">ë°ì´í„° êµ¬ì¡° ë° API ìŠ¤í™</a></li>
<li><a href="#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%B0%8F-%EB%94%94%EB%B2%84%EA%B9%85-%EA%B0%80%EC%9D%B4%EB%93%9C">í…ŒìŠ¤íŠ¸ ë° ë””ë²„ê¹… ê°€ì´ë“œ</a></li>
</ol>
<hr>
<h2 id="ï¸-ì „ì²´-ì•„í‚¤í…ì²˜-ê°œìš”">ğŸ—ï¸ ì „ì²´ ì•„í‚¤í…ì²˜ ê°œìš”</h2>
<h3 id="ì‹œìŠ¤í…œ-êµ¬ì¡°">ì‹œìŠ¤í…œ êµ¬ì¡°</h3>
<pre class="mermaid">graph TB
    subgraph &quot;í”„ë¡ íŠ¸ì—”ë“œ ê³„ì¸µ&quot;
        WEB[ì›¹ ë¸Œë¼ìš°ì €]
        MOBILE[ëª¨ë°”ì¼ ì•±]
        ADMIN[ê´€ë¦¬ì í˜ì´ì§€]
    end
    
    subgraph &quot;ì†Œì…œ í”Œë«í¼&quot;
        GOOGLE[Google OAuth 2.0]
        KAKAO[ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸]
        NAVER[ë„¤ì´ë²„ ë¡œê·¸ì¸]
    end
    
    subgraph &quot;AuthService (í¬íŠ¸: 8082)&quot;
        CONTROLLER[SocialAuthController]
        SERVICE[SocialAuthService]
        GOOGLE_SVC[GoogleAuthService]
        KAKAO_SVC[KakaoAuthService]
        NAVER_SVC[NaverAuthService]
        USER_SVC[SocialUserService]
    end
    
    subgraph &quot;ë°ì´í„° ì €ì¥ì†Œ&quot;
        MYSQL[(MySQL Database)]
        REDIS[(Redis Cache)]
    end
    
    WEB --&gt; CONTROLLER
    MOBILE --&gt; CONTROLLER
    ADMIN --&gt; CONTROLLER
    
    CONTROLLER --&gt; SERVICE
    SERVICE --&gt; GOOGLE_SVC
    SERVICE --&gt; KAKAO_SVC
    SERVICE --&gt; NAVER_SVC
    SERVICE --&gt; USER_SVC
    
    GOOGLE_SVC --&gt; GOOGLE
    KAKAO_SVC --&gt; KAKAO
    NAVER_SVC --&gt; NAVER
    
    USER_SVC --&gt; MYSQL
    SERVICE --&gt; REDIS
</pre>
<h3 id="í•µì‹¬-ê°œë…-í†µí•©-ì†Œì…œ-ì¸ì¦-ì‹œìŠ¤í…œ">í•µì‹¬ ê°œë…: í†µí•© ì†Œì…œ ì¸ì¦ ì‹œìŠ¤í…œ</h3>
<ul>
<li><strong>í•˜ë‚˜ì˜ ì—”ë“œí¬ì¸íŠ¸</strong>: <code>/api/auth/social/{provider}</code> (GET/POST)</li>
<li><strong>ìë™ íŒë‹¨ ë¡œì§</strong>: ë¡œê·¸ì¸/íšŒì›ê°€ì…ì„ ì„œë²„ê°€ ìë™ ê²°ì •</li>
<li><strong>3ë‹¨ê³„ ìš°ì„ ìˆœìœ„</strong>: ì†Œì…œID â†’ ì´ë©”ì¼ â†’ ì‹ ê·œìƒì„±</li>
</ul>
<hr>
<h2 id="-ë°±ì—”ë“œ-êµ¬í˜„-ì„¸ë¶€ì‚¬í•­">ğŸ”§ ë°±ì—”ë“œ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­</h2>
<h3 id="1-ì»¨íŠ¸ë¡¤ëŸ¬-ê³„ì¸µ-socialauthcontroller">1. ì»¨íŠ¸ë¡¤ëŸ¬ ê³„ì¸µ (SocialAuthController)</h3>
<p><strong>íŒŒì¼</strong>: <code>com.akc.b2c.authservice.controller.SocialAuthController</code></p>
<p><strong>ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸</strong>:</p>
<pre><code class="language-java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping(&quot;/api/auth/social&quot;)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocialAuthController</span> {
    
    <span class="hljs-comment">// 1. í†µí•© API ì—”ë“œí¬ì¸íŠ¸ë“¤</span>
    <span class="hljs-meta">@PostMapping(&quot;/google&quot;)</span>    <span class="hljs-comment">// Google ID Token ì²˜ë¦¬</span>
    <span class="hljs-meta">@PostMapping(&quot;/kakao&quot;)</span>     <span class="hljs-comment">// Kakao Access Token ì²˜ë¦¬  </span>
    <span class="hljs-meta">@PostMapping(&quot;/naver&quot;)</span>     <span class="hljs-comment">// Naver Access Token ì²˜ë¦¬</span>
    <span class="hljs-meta">@PostMapping(&quot;/signup&quot;)</span>    <span class="hljs-comment">// ì†Œì…œ íšŒì›ê°€ì… í†µí•© ì²˜ë¦¬</span>
    
    <span class="hljs-comment">// 2. ë„¤ì´ë²„ OAuth í”Œë¡œìš° (íŒì—… ì „ìš©)</span>
    <span class="hljs-meta">@GetMapping(&quot;/naver/login&quot;)</span>      <span class="hljs-comment">// ë„¤ì´ë²„ ì¸ì¦ ì‹œì‘</span>
    <span class="hljs-meta">@GetMapping(&quot;/naver/callback&quot;)</span>   <span class="hljs-comment">// ë„¤ì´ë²„ ì½œë°± ì²˜ë¦¬</span>
    
    <span class="hljs-comment">// 3. í—¬ìŠ¤ì²´í¬ &amp; ë©”íƒ€ë°ì´í„°</span>
    <span class="hljs-meta">@GetMapping(&quot;/providers&quot;)</span>  <span class="hljs-comment">// ì§€ì› í”Œë«í¼ ëª©ë¡</span>
    <span class="hljs-meta">@GetMapping(&quot;/health&quot;)</span>     <span class="hljs-comment">// ì„œë¹„ìŠ¤ ìƒíƒœ</span>
}
</code></pre>
<p><strong>ì˜ì¡´ì„± ì£¼ì…</strong>:</p>
<pre><code class="language-java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SocialAuthService socialAuthService;      <span class="hljs-comment">// í†µí•© ë¡œì§ ì²˜ë¦¬</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> NaverAuthService naverAuthService;        <span class="hljs-comment">// ë„¤ì´ë²„ OAuth ì „ìš©</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SocialUserService socialUserService;     <span class="hljs-comment">// DB ì‚¬ìš©ì ê´€ë¦¬</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JwtTokenProvider jwtTokenProvider;       <span class="hljs-comment">// JWT í† í° ìƒì„±</span>
</code></pre>
<h3 id="2-ì„œë¹„ìŠ¤-ê³„ì¸µ-êµ¬ì¡°">2. ì„œë¹„ìŠ¤ ê³„ì¸µ êµ¬ì¡°</h3>
<h4 id="21-í†µí•©-ì„œë¹„ìŠ¤-socialauthservice">2.1 í†µí•© ì„œë¹„ìŠ¤ (SocialAuthService)</h4>
<p><strong>íŒŒì¼</strong>: <code>com.akc.b2c.authservice.service.social.SocialAuthService</code></p>
<p><strong>í•µì‹¬ ë©”ì„œë“œ</strong>:</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocialAuthService</span> {
    <span class="hljs-comment">// ê° í”Œë«í¼ë³„ ë¡œê·¸ì¸ ì²˜ë¦¬ (ë™ì¼í•œ êµ¬ì¡°)</span>
    <span class="hljs-keyword">public</span> SocialLoginResponse <span class="hljs-title function_">googleLogin</span><span class="hljs-params">(GoogleLoginRequest request)</span>
    <span class="hljs-keyword">public</span> SocialLoginResponse <span class="hljs-title function_">kakaoLogin</span><span class="hljs-params">(KakaoLoginRequest request)</span>  
    <span class="hljs-keyword">public</span> SocialLoginResponse <span class="hljs-title function_">naverLogin</span><span class="hljs-params">(NaverLoginRequest request)</span>
    
    <span class="hljs-comment">// ì†Œì…œ íšŒì›ê°€ì… í†µí•© ì²˜ë¦¬</span>
    <span class="hljs-keyword">public</span> SocialSignUpResponse <span class="hljs-title function_">socialSignUp</span><span class="hljs-params">(SocialSignUpRequest request)</span>
}
</code></pre>
<p><strong>ê³µí†µ ì²˜ë¦¬ ë¡œì§</strong>:</p>
<ol>
<li>ì†Œì…œ í”Œë«í¼ì—ì„œ ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ</li>
<li><code>SocialUserService.findOrCreateUserBySocial()</code> í˜¸ì¶œ</li>
<li>JWT í† í° ìƒì„± ë° Redis ìºì‹±</li>
<li>í†µì¼ëœ ì‘ë‹µ êµ¬ì¡° ë°˜í™˜</li>
</ol>
<h4 id="22-google-ì¸ì¦-ì„œë¹„ìŠ¤-googleauthservice">2.2 Google ì¸ì¦ ì„œë¹„ìŠ¤ (GoogleAuthService)</h4>
<p><strong>íŒŒì¼</strong>: <code>com.akc.b2c.authservice.service.social.GoogleAuthService</code></p>
<p><strong>íŠ¹ì§•</strong>:</p>
<ul>
<li><strong>í† í° íƒ€ì…</strong>: ID Token (JWT í˜•íƒœ)</li>
<li><strong>ê²€ì¦ ë°©ì‹</strong>: Google TokenInfo API í˜¸ì¶œ</li>
<li><strong>ê°œë°œ ëª¨ë“œ</strong>: ë”ë¯¸ ë°ì´í„° ì§€ì›</li>
</ul>
<p><strong>í•µì‹¬ ë©”ì„œë“œ</strong>:</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GoogleAuthService</span> {
    <span class="hljs-keyword">public</span> SocialUserInfo <span class="hljs-title function_">getUserInfo</span><span class="hljs-params">(String idToken)</span> {
        <span class="hljs-comment">// 1. ê°œë°œëª¨ë“œ ë˜ëŠ” ë”ë¯¸í† í° ì²´í¬</span>
        <span class="hljs-keyword">if</span> (devMode || isDummyToken(idToken)) {
            <span class="hljs-keyword">return</span> createDummyGoogleUserInfo(idToken);
        }
        
        <span class="hljs-comment">// 2. ì‹¤ì œ Google API í† í° ê²€ì¦</span>
        Map&lt;String, Object&gt; tokenInfo = verifyGoogleIdToken(idToken);
        
        <span class="hljs-comment">// 3. ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ ë° ë³€í™˜</span>
        <span class="hljs-keyword">return</span> extractUserInfoFromGoogle(tokenInfo);
    }
}
</code></pre>
<h4 id="23-ì¹´ì¹´ì˜¤-ì¸ì¦-ì„œë¹„ìŠ¤-kakaoauthservice">2.3 ì¹´ì¹´ì˜¤ ì¸ì¦ ì„œë¹„ìŠ¤ (KakaoAuthService)</h4>
<p><strong>íŒŒì¼</strong>: <code>com.akc.b2c.authservice.service.social.KakaoAuthService</code></p>
<p><strong>íŠ¹ì§•</strong>:</p>
<ul>
<li><strong>í† í° íƒ€ì…</strong>: Access Token</li>
<li><strong>ê²€ì¦ ë°©ì‹</strong>: ì¹´ì¹´ì˜¤ User Me API í˜¸ì¶œ</li>
<li><strong>í—¤ë”</strong>: <code>Authorization: Bearer {access_token}</code></li>
</ul>
<p><strong>í•µì‹¬ ë©”ì„œë“œ</strong>:</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">KakaoAuthService</span> {
    <span class="hljs-keyword">public</span> SocialUserInfo <span class="hljs-title function_">getUserInfo</span><span class="hljs-params">(String accessToken)</span> {
        <span class="hljs-comment">// 1. ê°œë°œëª¨ë“œ ì²´í¬</span>
        <span class="hljs-keyword">if</span> (devMode) {
            <span class="hljs-keyword">return</span> createDevModeUserInfo();
        }
        
        <span class="hljs-comment">// 2. ì¹´ì¹´ì˜¤ User Info API í˜¸ì¶œ</span>
        Map&lt;String, Object&gt; userInfo = callKakaoUserInfoApi(accessToken);
        
        <span class="hljs-comment">// 3. ì¹´ì¹´ì˜¤ íŠ¹ìœ ì˜ ì¤‘ì²© êµ¬ì¡° íŒŒì‹±</span>
        <span class="hljs-keyword">return</span> parseKakaoUserInfo(userInfo);
    }
    
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; <span class="hljs-title function_">callKakaoUserInfoApi</span><span class="hljs-params">(String accessToken)</span> {
        <span class="hljs-type">HttpHeaders</span> <span class="hljs-variable">headers</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHeaders</span>();
        headers.set(<span class="hljs-string">&quot;Authorization&quot;</span>, <span class="hljs-string">&quot;Bearer &quot;</span> + accessToken);
        headers.set(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;application/x-www-form-urlencoded;charset=utf-8&quot;</span>);
        
        <span class="hljs-comment">// ì¹´ì¹´ì˜¤ API: https://kapi.kakao.com/v2/user/me</span>
        ResponseEntity&lt;Map&gt; response = restTemplate.exchange(kakaoUserInfoUrl, HttpMethod.GET, entity, Map.class);
    }
}
</code></pre>
<h4 id="24-ë„¤ì´ë²„-ì¸ì¦-ì„œë¹„ìŠ¤-naverauthservice">2.4 ë„¤ì´ë²„ ì¸ì¦ ì„œë¹„ìŠ¤ (NaverAuthService)</h4>
<p><strong>íŒŒì¼</strong>: <code>com.akc.b2c.authservice.service.social.NaverAuthService</code></p>
<p><strong>íŠ¹ì§•</strong>:</p>
<ul>
<li><strong>í† í° íƒ€ì…</strong>: Access Token</li>
<li><strong>OAuth í”Œë¡œìš°</strong>: Authorization Code Grant (2ë‹¨ê³„)</li>
<li><strong>íŒì—… ì§€ì›</strong>: í”„ë¡ íŠ¸ì—”ë“œ íŒì—…ì°½ í†µì‹ </li>
</ul>
<p><strong>í•µì‹¬ ë©”ì„œë“œ</strong>:</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NaverAuthService</span> {
    <span class="hljs-comment">// 1. OAuth ì¸ì¦ URL ìƒì„±</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">buildAuthorizationUrl</span><span class="hljs-params">(String redirectUri)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">state</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();
        <span class="hljs-keyword">return</span> UriComponentsBuilder.fromHttpUrl(naverAuthUrl)
                .queryParam(<span class="hljs-string">&quot;response_type&quot;</span>, <span class="hljs-string">&quot;code&quot;</span>)
                .queryParam(<span class="hljs-string">&quot;client_id&quot;</span>, naverClientId)
                .queryParam(<span class="hljs-string">&quot;redirect_uri&quot;</span>, naverRedirectUri)
                .queryParam(<span class="hljs-string">&quot;scope&quot;</span>, <span class="hljs-string">&quot;name email profile_image&quot;</span>)
                .queryParam(<span class="hljs-string">&quot;state&quot;</span>, state)
                .build().toUriString();
    }
    
    <span class="hljs-comment">// 2. Authorization Code â†’ Access Token êµí™˜</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getAccessToken</span><span class="hljs-params">(String authorizationCode, String state)</span> {
        MultiValueMap&lt;String, String&gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedMultiValueMap</span>&lt;&gt;();
        params.add(<span class="hljs-string">&quot;grant_type&quot;</span>, <span class="hljs-string">&quot;authorization_code&quot;</span>);
        params.add(<span class="hljs-string">&quot;client_id&quot;</span>, naverClientId);
        params.add(<span class="hljs-string">&quot;client_secret&quot;</span>, naverClientSecret);
        params.add(<span class="hljs-string">&quot;redirect_uri&quot;</span>, naverRedirectUri);
        params.add(<span class="hljs-string">&quot;code&quot;</span>, authorizationCode);
        params.add(<span class="hljs-string">&quot;state&quot;</span>, state);
        
        <span class="hljs-comment">// ë„¤ì´ë²„ Token API: https://nid.naver.com/oauth2.0/token</span>
        ResponseEntity&lt;Map&gt; response = restTemplate.postForEntity(naverTokenUrl, params, Map.class);
    }
    
    <span class="hljs-comment">// 3. Access Tokenìœ¼ë¡œ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ</span>
    <span class="hljs-keyword">public</span> SocialUserInfo <span class="hljs-title function_">getUserInfo</span><span class="hljs-params">(String accessToken)</span> {
        <span class="hljs-type">HttpHeaders</span> <span class="hljs-variable">headers</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHeaders</span>();
        headers.set(<span class="hljs-string">&quot;Authorization&quot;</span>, <span class="hljs-string">&quot;Bearer &quot;</span> + accessToken);
        
        <span class="hljs-comment">// ë„¤ì´ë²„ User Info API: https://openapi.naver.com/v1/nid/me</span>
        ResponseEntity&lt;Map&gt; response = restTemplate.exchange(naverUserInfoUrl, HttpMethod.GET, entity, Map.class);
    }
}
</code></pre>
<h4 id="25-ì‚¬ìš©ì-ê´€ë¦¬-ì„œë¹„ìŠ¤-socialuserservice">2.5 ì‚¬ìš©ì ê´€ë¦¬ ì„œë¹„ìŠ¤ (SocialUserService)</h4>
<p><strong>íŒŒì¼</strong>: <code>com.akc.b2c.authservice.service.SocialUserService</code></p>
<p><strong>3ë‹¨ê³„ ìë™ íŒë‹¨ ë¡œì§</strong>:</p>
<pre><code class="language-java"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> UserSocialResult <span class="hljs-title function_">findOrCreateUserBySocial</span><span class="hljs-params">(SocialUserInfo socialUserInfo)</span> {
    
    <span class="hljs-comment">// 1ë‹¨ê³„: ì†Œì…œ IDë¡œ ê¸°ì¡´ ê³„ì • ì°¾ê¸° (Provider + Social ID)</span>
    Optional&lt;MemberSocialAccount&gt; existingSocialAccount = 
        memberSocialAccountRepository.findByProviderAndSocialId(provider, socialUserInfo.getSocialId());
    
    <span class="hljs-keyword">if</span> (existingSocialAccount.isPresent()) {
        <span class="hljs-comment">// ğŸŸ¢ ê¸°ì¡´ ì†Œì…œ ê³„ì • â†’ ì¦‰ì‹œ ë¡œê·¸ì¸</span>
        <span class="hljs-keyword">return</span> UserSocialResult.builder()
                .member(socialAccount.getMember())
                .isNewUser(<span class="hljs-literal">false</span>)
                .isNewSocialAccount(<span class="hljs-literal">false</span>)
                .build();
    }
    
    <span class="hljs-comment">// 2ë‹¨ê³„: ì´ë©”ì¼ë¡œ ê¸°ì¡´ ì‚¬ìš©ì ì°¾ê¸°</span>
    Optional&lt;Member&gt; existingMember = memberRepository.findActiveUserByEmail(socialUserInfo.getEmail());
    
    <span class="hljs-keyword">if</span> (existingMember.isPresent()) {
        <span class="hljs-comment">// ğŸ”— ê¸°ì¡´ ì‚¬ìš©ìì—ê²Œ ì†Œì…œ ê³„ì • ì—°ê²°</span>
        <span class="hljs-type">Member</span> <span class="hljs-variable">member</span> <span class="hljs-operator">=</span> existingMember.get();
        <span class="hljs-type">MemberSocialAccount</span> <span class="hljs-variable">newSocialAccount</span> <span class="hljs-operator">=</span> createSocialAccount(member, socialUserInfo, provider);
        member.addSocialAccount(newSocialAccount);
        
        <span class="hljs-keyword">return</span> UserSocialResult.builder()
                .member(member)
                .isNewUser(<span class="hljs-literal">false</span>)
                .isNewSocialAccount(<span class="hljs-literal">true</span>)
                .build();
    }
    
    <span class="hljs-comment">// 3ë‹¨ê³„: ì™„ì „íˆ ìƒˆë¡œìš´ ì‚¬ìš©ì ìƒì„±</span>
    <span class="hljs-type">Member</span> <span class="hljs-variable">newMember</span> <span class="hljs-operator">=</span> createMember(socialUserInfo);
    <span class="hljs-type">Member</span> <span class="hljs-variable">savedMember</span> <span class="hljs-operator">=</span> memberRepository.save(newMember);
    <span class="hljs-type">MemberSocialAccount</span> <span class="hljs-variable">newSocialAccount</span> <span class="hljs-operator">=</span> createSocialAccount(savedMember, socialUserInfo, provider);
    
    <span class="hljs-keyword">return</span> UserSocialResult.builder()
            .member(newMember)
            .isNewUser(<span class="hljs-literal">true</span>)
            .isNewSocialAccount(<span class="hljs-literal">true</span>)
            .build();
}
</code></pre>
<hr>
<h2 id="ï¸-í”„ë¡ íŠ¸ì—”ë“œ-êµ¬í˜„-ê°€ì´ë“œ">ğŸ–¥ï¸ í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ ê°€ì´ë“œ</h2>
<h3 id="1-í”„ë¡œì íŠ¸-ì„¤ì •-ë°-í™˜ê²½-êµ¬ì„±">1. í”„ë¡œì íŠ¸ ì„¤ì • ë° í™˜ê²½ êµ¬ì„±</h3>
<h4 id="11-íŒ¨í‚¤ì§€-ì„¤ì¹˜-reactnextjs">1.1 íŒ¨í‚¤ì§€ ì„¤ì¹˜ (React/Next.js)</h4>
<pre><code class="language-bash"><span class="hljs-comment"># TypeScriptë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°</span>
npm install --save-dev @types/google.accounts

<span class="hljs-comment"># ìƒíƒœ ê´€ë¦¬ (ì„ íƒì‚¬í•­)</span>
npm install zustand  <span class="hljs-comment"># ë˜ëŠ” redux-toolkit</span>
</code></pre>
<h4 id="12-í™˜ê²½-ë³€ìˆ˜-ì„¤ì •">1.2 í™˜ê²½ ë³€ìˆ˜ ì„¤ì •</h4>
<pre><code class="language-env"># .env.local (Next.js) ë˜ëŠ” .env (React)
NEXT_PUBLIC_GOOGLE_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com
NEXT_PUBLIC_KAKAO_JAVASCRIPT_KEY=YOUR_KAKAO_JAVASCRIPT_KEY
NEXT_PUBLIC_AUTH_SERVICE_URL=http://localhost:8082
NEXT_PUBLIC_ENVIRONMENT=development  # development | production
</code></pre>
<h4 id="13-typescript-íƒ€ì…-ì •ì˜">1.3 TypeScript íƒ€ì… ì •ì˜</h4>
<pre><code class="language-typescript"><span class="hljs-comment">// types/social-login.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SocialLoginRequest</span> {
  idToken?: <span class="hljs-built_in">string</span>;
  accessToken?: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">deviceInfo</span>: {
    <span class="hljs-attr">platform</span>: <span class="hljs-string">&#x27;WEB_BROWSER&#x27;</span> | <span class="hljs-string">&#x27;MOBILE_APP&#x27;</span> | <span class="hljs-string">&#x27;ADMIN_WEB&#x27;</span>;
    <span class="hljs-attr">deviceId</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">appVersion</span>: <span class="hljs-built_in">string</span>;
  };
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SocialLoginResponse</span> {
  <span class="hljs-attr">success</span>: <span class="hljs-built_in">boolean</span>;
  accessToken?: <span class="hljs-built_in">string</span>;
  refreshToken?: <span class="hljs-built_in">string</span>;
  tokenType?: <span class="hljs-built_in">string</span>;
  expiresIn?: <span class="hljs-built_in">number</span>;
  userInfo?: <span class="hljs-title class_">UserInfo</span>;
  needsAdditionalInfo?: <span class="hljs-built_in">boolean</span>;
  needsUsernameInput?: <span class="hljs-built_in">boolean</span>;
  needsAccountLink?: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>;
  error?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserInfo</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  profileImageUrl?: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">role</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">isNewUser</span>: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-comment">// Global type definitions for Google GSI</span>
<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">global</span> {
  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Window</span> {
    <span class="hljs-attr">google</span>: {
      <span class="hljs-attr">accounts</span>: {
        <span class="hljs-attr">id</span>: {
          <span class="hljs-attr">initialize</span>: <span class="hljs-function">(<span class="hljs-params">config: GoogleConfig</span>) =&gt;</span> <span class="hljs-built_in">void</span>;
          <span class="hljs-attr">prompt</span>: <span class="hljs-function">(<span class="hljs-params">callback?: (notification: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">void</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
          <span class="hljs-attr">renderButton</span>: <span class="hljs-function">(<span class="hljs-params">element: HTMLElement, config: GoogleButtonConfig</span>) =&gt;</span> <span class="hljs-built_in">void</span>;
          <span class="hljs-attr">disableAutoSelect</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
          <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
        };
      };
    };
    <span class="hljs-title class_">Kakao</span>: {
      <span class="hljs-attr">init</span>: <span class="hljs-function">(<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
      <span class="hljs-attr">isInitialized</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">boolean</span>;
      <span class="hljs-title class_">Auth</span>: {
        <span class="hljs-attr">login</span>: <span class="hljs-function">(<span class="hljs-params">config: KakaoLoginConfig</span>) =&gt;</span> <span class="hljs-built_in">void</span>;
        <span class="hljs-attr">logout</span>: <span class="hljs-function">(<span class="hljs-params">callback?: () =&gt; <span class="hljs-built_in">void</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
        <span class="hljs-attr">getAccessToken</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">string</span>;
      };
    };
  }
}
</code></pre>
<h3 id="2-html-êµ¬ì¡°-ë°-sdk-ì„¤ì •">2. HTML êµ¬ì¡° ë° SDK ì„¤ì •</h3>
<h4 id="21-nextjs-script-ì»´í¬ë„ŒíŠ¸-í™œìš©">2.1 Next.js Script ì»´í¬ë„ŒíŠ¸ í™œìš©</h4>
<pre><code class="language-tsx"><span class="hljs-comment">// components/SocialLoginProvider.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Script</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/script&#x27;</span>;
<span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">SocialLoginProvider</span> = (<span class="hljs-params">{ children }: { children: React.ReactNode }</span>) =&gt; {
  <span class="hljs-keyword">const</span> [isGoogleLoaded, setIsGoogleLoaded] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isKakaoLoaded, setIsKakaoLoaded] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span>
      {/* Google GSI SDK */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Script</span>
        <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://accounts.google.com/gsi/client&quot;</span>
        <span class="hljs-attr">strategy</span>=<span class="hljs-string">&quot;afterInteractive&quot;</span>
        <span class="hljs-attr">onLoad</span>=<span class="hljs-string">{()</span> =&gt;</span><span class="language-javascript"> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Google GSI SDK ë¡œë“œ ì™„ë£Œ&#x27;</span>);
          <span class="hljs-title function_">setIsGoogleLoaded</span>(<span class="hljs-literal">true</span>);
        }}
        onError={<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Google GSI SDK ë¡œë“œ ì‹¤íŒ¨&#x27;</span>);
        }}
      /&gt;

      {<span class="hljs-comment">/* Kakao JavaScript SDK */</span>}
      &lt;<span class="hljs-title class_">Script</span>
        src=<span class="hljs-string">&quot;https://t1.kakaocdn.net/kakao_js_sdk/2.7.5/kakao.min.js&quot;</span>
        strategy=<span class="hljs-string">&quot;afterInteractive&quot;</span>
        onLoad={<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Kakao SDK ë¡œë“œ ì™„ë£Œ&#x27;</span>);
          <span class="hljs-title function_">setIsKakaoLoaded</span>(<span class="hljs-literal">true</span>);
          <span class="hljs-comment">// Kakao SDK ì´ˆê¸°í™”</span>
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">Kakao</span> &amp;&amp; !<span class="hljs-variable language_">window</span>.<span class="hljs-property">Kakao</span>.<span class="hljs-title function_">isInitialized</span>()) {
            <span class="hljs-variable language_">window</span>.<span class="hljs-property">Kakao</span>.<span class="hljs-title function_">init</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_KAKAO_JAVASCRIPT_KEY</span>);
          }
        }}
        onError={<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Kakao SDK ë¡œë“œ ì‹¤íŒ¨&#x27;</span>);
        }}
      /&gt;

      {children}
    &lt;/&gt;</span></span>
  );
};
</code></pre>
<h4 id="22-sdk-ë¡œë”©-ìƒíƒœ-ê´€ë¦¬">2.2 SDK ë¡œë”© ìƒíƒœ ê´€ë¦¬</h4>
<pre><code class="language-tsx"><span class="hljs-comment">// hooks/useSocialSDK.ts</span>
<span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useSocialSDK</span> = (<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">const</span> [sdkStatus, setSdkStatus] = <span class="hljs-title function_">useState</span>({
    <span class="hljs-attr">google</span>: { <span class="hljs-attr">loaded</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">initialized</span>: <span class="hljs-literal">false</span> },
    <span class="hljs-attr">kakao</span>: { <span class="hljs-attr">loaded</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">initialized</span>: <span class="hljs-literal">false</span> }
  });

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// Google SDK ìƒíƒœ ì²´í¬</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">checkGoogleSDK</span> = (<span class="hljs-params"></span>) =&gt; {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">&#x27;undefined&#x27;</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">google</span>?.<span class="hljs-property">accounts</span>?.<span class="hljs-property">id</span>) {
        <span class="hljs-title function_">setSdkStatus</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> ({
          ...prev,
          <span class="hljs-attr">google</span>: { <span class="hljs-attr">loaded</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">initialized</span>: <span class="hljs-literal">true</span> }
        }));
      }
    };

    <span class="hljs-comment">// Kakao SDK ìƒíƒœ ì²´í¬  </span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">checkKakaoSDK</span> = (<span class="hljs-params"></span>) =&gt; {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">&#x27;undefined&#x27;</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">Kakao</span>?.<span class="hljs-title function_">isInitialized</span>()) {
        <span class="hljs-title function_">setSdkStatus</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> ({
          ...prev,
          <span class="hljs-attr">kakao</span>: { <span class="hljs-attr">loaded</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">initialized</span>: <span class="hljs-literal">true</span> }
        }));
      }
    };

    <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">checkGoogleSDK</span>();
      <span class="hljs-title function_">checkKakaoSDK</span>();
    }, <span class="hljs-number">100</span>);

    <span class="hljs-comment">// 5ì´ˆ í›„ ì²´í¬ ì¤‘ë‹¨</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(interval), <span class="hljs-number">5000</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(interval);
  }, []);

  <span class="hljs-keyword">return</span> sdkStatus;
};
</code></pre>
<h3 id="3-í”Œë«í¼ë³„-í”„ë¡ íŠ¸ì—”ë“œ-êµ¬í˜„">3. í”Œë«í¼ë³„ í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„</h3>
<h4 id="31-google-ë¡œê·¸ì¸-id-token-ë°©ì‹">3.1 Google ë¡œê·¸ì¸ (ID Token ë°©ì‹)</h4>
<pre><code class="language-typescript"><span class="hljs-comment">// hooks/useGoogleLogin.ts</span>
<span class="hljs-keyword">import</span> { useCallback, useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SocialLoginResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../types/social-login&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useGoogleLogin</span> = (<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">const</span> [isLoading, setIsLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [error, setError] = useState&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// Google GSI ì´ˆê¸°í™”</span>
  <span class="hljs-keyword">const</span> initializeGoogleLogin = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">google</span>?.<span class="hljs-property">accounts</span>?.<span class="hljs-property">id</span>) {
      <span class="hljs-title function_">setError</span>(<span class="hljs-string">&#x27;Google SDKê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.&#x27;</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">try</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">google</span>.<span class="hljs-property">accounts</span>.<span class="hljs-property">id</span>.<span class="hljs-title function_">initialize</span>({
        <span class="hljs-attr">client_id</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_GOOGLE_CLIENT_ID</span>!,
        <span class="hljs-attr">callback</span>: handleCredentialResponse,
        <span class="hljs-attr">auto_select</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">cancel_on_tap_outside</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">use_fedcm_for_prompt</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// FedCM ë¹„í™œì„±í™”ë¡œ íŒì—… ë³´ì¥</span>
      });

      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title function_">setError</span>(<span class="hljs-string">&#x27;Google ì´ˆê¸°í™” ì‹¤íŒ¨&#x27;</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Google ì´ˆê¸°í™” ì˜¤ë¥˜:&#x27;</span>, error);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }, []);

  <span class="hljs-comment">// Google ì½œë°± ì²˜ë¦¬</span>
  <span class="hljs-keyword">const</span> handleCredentialResponse = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">response</span>: <span class="hljs-built_in">any</span>) =&gt; {
    <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-title function_">setError</span>(<span class="hljs-literal">null</span>);

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> deviceId = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;deviceId&#x27;</span>) || <span class="hljs-title function_">generateDeviceId</span>();
      
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${process.env.NEXT_PUBLIC_AUTH_SERVICE_URL}</span>/api/auth/social/google`</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
        <span class="hljs-attr">headers</span>: { 
          <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>,
          <span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>
        },
        <span class="hljs-attr">credentials</span>: <span class="hljs-string">&#x27;include&#x27;</span>, <span class="hljs-comment">// CORS ì¿ í‚¤ í—ˆìš©</span>
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
          <span class="hljs-attr">idToken</span>: response.<span class="hljs-property">credential</span>,
          <span class="hljs-attr">deviceInfo</span>: {
            <span class="hljs-attr">platform</span>: <span class="hljs-string">&#x27;WEB_BROWSER&#x27;</span>,
            <span class="hljs-attr">deviceId</span>: deviceId,
            <span class="hljs-attr">appVersion</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_APP_VERSION</span> || <span class="hljs-string">&#x27;1.0.0&#x27;</span>
          }
        })
      });

      <span class="hljs-keyword">if</span> (!result.<span class="hljs-property">ok</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${result.status}</span>: <span class="hljs-subst">${result.statusText}</span>`</span>);
      }

      <span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">SocialLoginResponse</span> = <span class="hljs-keyword">await</span> result.<span class="hljs-title function_">json</span>();
      
      <span class="hljs-keyword">if</span> (data.<span class="hljs-property">success</span>) {
        <span class="hljs-title function_">handleSocialLoginSuccess</span>(data, <span class="hljs-string">&#x27;Google&#x27;</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(data.<span class="hljs-property">error</span> || <span class="hljs-string">&#x27;Google ë¡œê·¸ì¸ ì‹¤íŒ¨&#x27;</span>);
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">const</span> errorMessage = error <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span> ? error.<span class="hljs-property">message</span> : <span class="hljs-string">&#x27;ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜&#x27;</span>;
      <span class="hljs-title function_">setError</span>(errorMessage);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Google ë¡œê·¸ì¸ ì˜¤ë¥˜:&#x27;</span>, error);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
    }
  }, []);

  <span class="hljs-comment">// ë¡œê·¸ì¸ ë²„íŠ¼ ë Œë”ë§</span>
  <span class="hljs-keyword">const</span> renderGoogleButton = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">elementId: <span class="hljs-built_in">string</span>, config?: Partial&lt;GoogleButtonConfig&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(elementId);
    <span class="hljs-keyword">if</span> (!element || !<span class="hljs-variable language_">window</span>.<span class="hljs-property">google</span>?.<span class="hljs-property">accounts</span>?.<span class="hljs-property">id</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> defaultConfig = {
      <span class="hljs-attr">theme</span>: <span class="hljs-string">&#x27;outline&#x27;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
      <span class="hljs-attr">size</span>: <span class="hljs-string">&#x27;large&#x27;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;standard&#x27;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
      <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;signin_with&#x27;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
      <span class="hljs-attr">locale</span>: <span class="hljs-string">&#x27;ko&#x27;</span>,
      <span class="hljs-attr">width</span>: <span class="hljs-number">300</span>
    };

    <span class="hljs-variable language_">window</span>.<span class="hljs-property">google</span>.<span class="hljs-property">accounts</span>.<span class="hljs-property">id</span>.<span class="hljs-title function_">renderButton</span>(element, { ...defaultConfig, ...config });
  }, []);

  <span class="hljs-keyword">return</span> {
    isLoading,
    error,
    initializeGoogleLogin,
    renderGoogleButton
  };
};

<span class="hljs-comment">// ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜</span>
<span class="hljs-keyword">const</span> generateDeviceId = (): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> id = <span class="hljs-string">`web-<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>-<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>)}</span>`</span>;
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;deviceId&#x27;</span>, id);
  <span class="hljs-keyword">return</span> id;
};
</code></pre>
<h4 id="32-ì¹´ì¹´ì˜¤-ë¡œê·¸ì¸-access-token-ë°©ì‹">3.2 ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ (Access Token ë°©ì‹)</h4>
<pre><code class="language-typescript"><span class="hljs-comment">// hooks/useKakaoLogin.ts</span>
<span class="hljs-keyword">import</span> { useCallback, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useKakaoLogin</span> = (<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">const</span> [isLoading, setIsLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [error, setError] = useState&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹¤í–‰</span>
  <span class="hljs-keyword">const</span> loginWithKakao = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">Kakao</span>?.<span class="hljs-property">Auth</span>) {
      <span class="hljs-title function_">setError</span>(<span class="hljs-string">&#x27;ì¹´ì¹´ì˜¤ SDKê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.&#x27;</span>);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-title function_">setError</span>(<span class="hljs-literal">null</span>);

    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ íŒì—…</span>
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">Kakao</span>.<span class="hljs-property">Auth</span>.<span class="hljs-title function_">login</span>({
        <span class="hljs-attr">success</span>: <span class="hljs-keyword">async</span> (<span class="hljs-attr">kakaoResponse</span>: <span class="hljs-built_in">any</span>) =&gt; {
          <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> deviceId = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;deviceId&#x27;</span>) || <span class="hljs-title function_">generateDeviceId</span>();
            
            <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${process.env.NEXT_PUBLIC_AUTH_SERVICE_URL}</span>/api/auth/social/kakao`</span>, {
              <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
              <span class="hljs-attr">headers</span>: { 
                <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>,
                <span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>
              },
              <span class="hljs-attr">credentials</span>: <span class="hljs-string">&#x27;include&#x27;</span>,
              <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
                <span class="hljs-attr">accessToken</span>: kakaoResponse.<span class="hljs-property">access_token</span>,
                <span class="hljs-attr">deviceInfo</span>: {
                  <span class="hljs-attr">platform</span>: <span class="hljs-string">&#x27;WEB_BROWSER&#x27;</span>,
                  <span class="hljs-attr">deviceId</span>: deviceId,
                  <span class="hljs-attr">appVersion</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_APP_VERSION</span> || <span class="hljs-string">&#x27;1.0.0&#x27;</span>
                }
              })
            });

            <span class="hljs-keyword">if</span> (!result.<span class="hljs-property">ok</span>) {
              <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${result.status}</span>: <span class="hljs-subst">${result.statusText}</span>`</span>);
            }

            <span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">SocialLoginResponse</span> = <span class="hljs-keyword">await</span> result.<span class="hljs-title function_">json</span>();
            
            <span class="hljs-keyword">if</span> (data.<span class="hljs-property">success</span>) {
              <span class="hljs-title function_">handleSocialLoginSuccess</span>(data, <span class="hljs-string">&#x27;Kakao&#x27;</span>);
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(data.<span class="hljs-property">error</span> || <span class="hljs-string">&#x27;ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹¤íŒ¨&#x27;</span>);
            }
          } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-keyword">const</span> errorMessage = error <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span> ? error.<span class="hljs-property">message</span> : <span class="hljs-string">&#x27;ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜&#x27;</span>;
            <span class="hljs-title function_">setError</span>(errorMessage);
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;ì¹´ì¹´ì˜¤ ë°±ì—”ë“œ í†µì‹  ì˜¤ë¥˜:&#x27;</span>, error);
          } <span class="hljs-keyword">finally</span> {
            <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
          }
        },
        <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">kakaoError: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
          <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
          <span class="hljs-title function_">setError</span>(<span class="hljs-string">&#x27;ì¹´ì¹´ì˜¤ ì¸ì¦ ì‹¤íŒ¨&#x27;</span>);
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹¤íŒ¨:&#x27;</span>, kakaoError);
        }
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
      <span class="hljs-title function_">setError</span>(<span class="hljs-string">&#x27;ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì´ˆê¸°í™” ì‹¤íŒ¨&#x27;</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì˜¤ë¥˜:&#x27;</span>, error);
    }
  }, []);

  <span class="hljs-keyword">return</span> {
    isLoading,
    error,
    loginWithKakao
  };
};
</code></pre>
<h4 id="33-ë„¤ì´ë²„-ë¡œê·¸ì¸-íŒì—…-ë°©ì‹">3.3 ë„¤ì´ë²„ ë¡œê·¸ì¸ (íŒì—… ë°©ì‹)</h4>
<pre><code class="language-typescript"><span class="hljs-comment">// hooks/useNaverLogin.ts</span>
<span class="hljs-keyword">import</span> { useCallback, useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useNaverLogin</span> = (<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">const</span> [isLoading, setIsLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [error, setError] = useState&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// ë„¤ì´ë²„ ë¡œê·¸ì¸ íŒì—… ì‹¤í–‰</span>
  <span class="hljs-keyword">const</span> loginWithNaver = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-title function_">setError</span>(<span class="hljs-literal">null</span>);

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> popup = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(
        <span class="hljs-string">`<span class="hljs-subst">${process.env.NEXT_PUBLIC_AUTH_SERVICE_URL}</span>/api/auth/social/naver/login`</span>,
        <span class="hljs-string">&#x27;naverLogin&#x27;</span>,
        <span class="hljs-string">&#x27;width=500,height=600,scrollbars=yes,resizable=yes,top=50,left=50&#x27;</span>
      );

      <span class="hljs-keyword">if</span> (!popup) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì €ì˜ íŒì—… ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.&#x27;</span>);
      }

      <span class="hljs-comment">// íŒì—… ì°½ ë‹«í˜ ê°ì§€</span>
      <span class="hljs-keyword">const</span> popupTimer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (popup.<span class="hljs-property">closed</span>) {
          <span class="hljs-built_in">clearInterval</span>(popupTimer);
          <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
        }
      }, <span class="hljs-number">1000</span>);

      <span class="hljs-comment">// 30ì´ˆ í›„ ìë™ ì •ë¦¬</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (!popup.<span class="hljs-property">closed</span>) {
          popup.<span class="hljs-title function_">close</span>();
          <span class="hljs-built_in">clearInterval</span>(popupTimer);
          <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
          <span class="hljs-title function_">setError</span>(<span class="hljs-string">&#x27;ë¡œê·¸ì¸ ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤.&#x27;</span>);
        }
      }, <span class="hljs-number">30000</span>);

    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
      <span class="hljs-keyword">const</span> errorMessage = error <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span> ? error.<span class="hljs-property">message</span> : <span class="hljs-string">&#x27;ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜&#x27;</span>;
      <span class="hljs-title function_">setError</span>(errorMessage);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;ë„¤ì´ë²„ ë¡œê·¸ì¸ ì˜¤ë¥˜:&#x27;</span>, error);
    }
  }, []);

  <span class="hljs-comment">// íŒì—… ë©”ì‹œì§€ ë¦¬ìŠ¤ë„ˆ ì„¤ì •</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handlePopupMessage</span> = (<span class="hljs-params">event: MessageEvent</span>) =&gt; {
      <span class="hljs-comment">// ë³´ì•ˆ: AuthService ë„ë©”ì¸ë§Œ í—ˆìš©</span>
      <span class="hljs-keyword">if</span> (event.<span class="hljs-property">origin</span> !== process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_AUTH_SERVICE_URL</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&#x27;í—ˆìš©ë˜ì§€ ì•Šì€ ë„ë©”ì¸ì—ì„œ ë©”ì‹œì§€:&#x27;</span>, event.<span class="hljs-property">origin</span>);
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">const</span> { <span class="hljs-keyword">type</span>, result, error } = event.<span class="hljs-property">data</span>;

      <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">type</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;NAVER_LOGIN_SUCCESS&#x27;</span>:
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;ë„¤ì´ë²„ ë¡œê·¸ì¸ ì„±ê³µ:&#x27;</span>, result);
          <span class="hljs-title function_">handleSocialLoginSuccess</span>(result, <span class="hljs-string">&#x27;Naver&#x27;</span>);
          <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
          <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;NAVER_SIGNUP_NEEDED&#x27;</span>:
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;ë„¤ì´ë²„ íšŒì›ê°€ì… í•„ìš”:&#x27;</span>, result);
          <span class="hljs-title function_">handleNaverSignupNeeded</span>(result);
          <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
          <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;NAVER_LOGIN_ERROR&#x27;</span>:
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;ë„¤ì´ë²„ ë¡œê·¸ì¸ ì˜¤ë¥˜:&#x27;</span>, error);
          <span class="hljs-title function_">setError</span>(error?.<span class="hljs-property">message</span> || <span class="hljs-string">&#x27;ë„¤ì´ë²„ ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.&#x27;</span>);
          <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
          <span class="hljs-keyword">break</span>;

        <span class="hljs-attr">default</span>:
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;ì•Œ ìˆ˜ ì—†ëŠ” ë©”ì‹œì§€ íƒ€ì…:&#x27;</span>, <span class="hljs-keyword">type</span>);
      }
    };

    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;message&#x27;</span>, handlePopupMessage);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&#x27;message&#x27;</span>, handlePopupMessage);
  }, []);

  <span class="hljs-keyword">return</span> {
    isLoading,
    error,
    loginWithNaver
  };
};

<span class="hljs-comment">// ë„¤ì´ë²„ íšŒì›ê°€ì… í•„ìš” ì²˜ë¦¬</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNaverSignupNeeded</span> = (<span class="hljs-params">result: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> { needsUsernameInput, needsAdditionalInfo, tempUserInfo } = result;
  
  <span class="hljs-comment">// íšŒì›ê°€ì… ëª¨ë‹¬ í‘œì‹œ ë˜ëŠ” í˜ì´ì§€ ì´ë™</span>
  <span class="hljs-comment">// ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ ì „ì—­ ìƒíƒœ ì—…ë°ì´íŠ¸</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;ì¶”ê°€ ì •ë³´ ì…ë ¥ í•„ìš”:&#x27;</span>, {
    needsUsernameInput,
    needsAdditionalInfo,
    tempUserInfo
  });
};
</code></pre>
<h3 id="4-í†µí•©-ì‘ë‹µ-ì²˜ë¦¬-ë°-ì‚¬ìš©ì-ê²½í—˜ux-ìµœì í™”">4. í†µí•© ì‘ë‹µ ì²˜ë¦¬ ë° ì‚¬ìš©ì ê²½í—˜(UX) ìµœì í™”</h3>
<h4 id="41-ë¡œë”©-ìƒíƒœ-ê´€ë¦¬">4.1 ë¡œë”© ìƒíƒœ ê´€ë¦¬</h4>
<pre><code class="language-typescript"><span class="hljs-comment">// components/SocialLoginButton.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Loader</span>, <span class="hljs-title class_">CheckCircle</span>, <span class="hljs-title class_">AlertCircle</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;lucide-react&#x27;</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">SocialLoginButtonProps</span> {
  <span class="hljs-attr">provider</span>: <span class="hljs-string">&#x27;google&#x27;</span> | <span class="hljs-string">&#x27;kakao&#x27;</span> | <span class="hljs-string">&#x27;naver&#x27;</span>;
  <span class="hljs-attr">onLogin</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;
  disabled?: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">SocialLoginButton</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">SocialLoginButtonProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{
  provider,
  onLogin,
  disabled = <span class="hljs-literal">false</span>
}</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [isLoading, setIsLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [status, setStatus] = useState&lt;<span class="hljs-string">&#x27;idle&#x27;</span> | <span class="hljs-string">&#x27;loading&#x27;</span> | <span class="hljs-string">&#x27;success&#x27;</span> | <span class="hljs-string">&#x27;error&#x27;</span>&gt;(<span class="hljs-string">&#x27;idle&#x27;</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-keyword">if</span> (isLoading || disabled) <span class="hljs-keyword">return</span>;

    <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-title function_">setStatus</span>(<span class="hljs-string">&#x27;loading&#x27;</span>);

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">onLogin</span>();
      <span class="hljs-title function_">setStatus</span>(<span class="hljs-string">&#x27;success&#x27;</span>);
      
      <span class="hljs-comment">// ì„±ê³µ ìƒíƒœë¥¼ ì ì‹œ ë³´ì—¬ì¤€ í›„ ì´ˆê¸°í™”</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">setStatus</span>(<span class="hljs-string">&#x27;idle&#x27;</span>);
        <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
      }, <span class="hljs-number">2000</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title function_">setStatus</span>(<span class="hljs-string">&#x27;error&#x27;</span>);
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">setStatus</span>(<span class="hljs-string">&#x27;idle&#x27;</span>);
        <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
      }, <span class="hljs-number">3000</span>);
    }
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">getButtonContent</span> = (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-keyword">switch</span> (status) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;loading&#x27;</span>:
        <span class="hljs-keyword">return</span> (
          <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Loader</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;w-4 h-4 animate-spin&quot;</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{provider.toUpperCase()} ë¡œê·¸ì¸ ì¤‘...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/&gt;</span></span>
        );
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;success&#x27;</span>:
        <span class="hljs-keyword">return</span> (
          <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">CheckCircle</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;w-4 h-4 text-green-500&quot;</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ë¡œê·¸ì¸ ì„±ê³µ!<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/&gt;</span></span>
        );
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;error&#x27;</span>:
        <span class="hljs-keyword">return</span> (
          <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">AlertCircle</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;w-4 h-4 text-red-500&quot;</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/&gt;</span></span>
        );
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">return</span> (
          <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{</span>`/<span class="hljs-attr">icons</span>/${<span class="hljs-attr">provider</span>}<span class="hljs-attr">.svg</span>`} <span class="hljs-attr">alt</span>=<span class="hljs-string">{provider}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;w-4 h-4&quot;</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{provider.toUpperCase()}ë¡œ ì‹œì‘í•˜ê¸°<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/&gt;</span></span>
        );
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>
      <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isLoading</span> || <span class="hljs-attr">disabled</span>}
      <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`
        <span class="hljs-attr">flex</span> <span class="hljs-attr">items-center</span> <span class="hljs-attr">justify-center</span> <span class="hljs-attr">gap-3</span> <span class="hljs-attr">w-full</span> <span class="hljs-attr">px-4</span> <span class="hljs-attr">py-3</span> <span class="hljs-attr">rounded-lg</span> <span class="hljs-attr">border</span>
        <span class="hljs-attr">transition-all</span> <span class="hljs-attr">duration-200</span> <span class="hljs-attr">font-medium</span>
        ${<span class="hljs-attr">status</span> === <span class="hljs-string">&#x27;error&#x27;</span> ? &#x27;<span class="hljs-attr">border-red-300</span> <span class="hljs-attr">bg-red-50</span> <span class="hljs-attr">text-red-700</span>&#x27; <span class="hljs-attr">:</span>
          <span class="hljs-attr">status</span> === <span class="hljs-string">&#x27;success&#x27;</span> ? &#x27;<span class="hljs-attr">border-green-300</span> <span class="hljs-attr">bg-green-50</span> <span class="hljs-attr">text-green-700</span>&#x27; <span class="hljs-attr">:</span>
          &#x27;<span class="hljs-attr">border-gray-300</span> <span class="hljs-attr">bg-white</span> <span class="hljs-attr">text-gray-700</span> <span class="hljs-attr">hover:bg-gray-50</span>&#x27;}
        ${(<span class="hljs-attr">isLoading</span> || <span class="hljs-attr">disabled</span>) &amp;&amp; &#x27;<span class="hljs-attr">cursor-not-allowed</span> <span class="hljs-attr">opacity-60</span>&#x27;}
      `}
    &gt;</span>
      {getButtonContent()}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
};
</code></pre>
<h4 id="42-ì—ëŸ¬-ì²˜ë¦¬-ë°-ì‚¬ìš©ì-í”¼ë“œë°±">4.2 ì—ëŸ¬ ì²˜ë¦¬ ë° ì‚¬ìš©ì í”¼ë“œë°±</h4>
<pre><code class="language-typescript"><span class="hljs-comment">// hooks/useErrorHandler.ts</span>
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ErrorInfo</span> {
  code?: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>;
  provider?: <span class="hljs-built_in">string</span>;
  retry?: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useErrorHandler</span> = (<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">const</span> [error, setError] = useState&lt;<span class="hljs-title class_">ErrorInfo</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSocialLoginError</span> = (<span class="hljs-params">error: <span class="hljs-built_in">any</span>, provider: <span class="hljs-built_in">string</span>, retryFn?: () =&gt; <span class="hljs-built_in">void</span></span>) =&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-attr">errorInfo</span>: <span class="hljs-title class_">ErrorInfo</span>;

    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">message</span>?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;íŒì—…ì´ ì°¨ë‹¨&#x27;</span>)) {
      errorInfo = {
        <span class="hljs-attr">code</span>: <span class="hljs-string">&#x27;POPUP_BLOCKED&#x27;</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.&#x27;</span>,
        provider,
        <span class="hljs-attr">retry</span>: retryFn
      };
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">message</span>?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;HTTP 403&#x27;</span>)) {
      errorInfo = {
        <span class="hljs-attr">code</span>: <span class="hljs-string">&#x27;FORBIDDEN&#x27;</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;ë¡œê·¸ì¸ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.&#x27;</span>,
        provider
      };
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">message</span>?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;HTTP 500&#x27;</span>)) {
      errorInfo = {
        <span class="hljs-attr">code</span>: <span class="hljs-string">&#x27;SERVER_ERROR&#x27;</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.&#x27;</span>,
        provider,
        <span class="hljs-attr">retry</span>: retryFn
      };
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">message</span>?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;Network&#x27;</span>)) {
      errorInfo = {
        <span class="hljs-attr">code</span>: <span class="hljs-string">&#x27;NETWORK_ERROR&#x27;</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.&#x27;</span>,
        provider,
        <span class="hljs-attr">retry</span>: retryFn
      };
    } <span class="hljs-keyword">else</span> {
      errorInfo = {
        <span class="hljs-attr">code</span>: <span class="hljs-string">&#x27;UNKNOWN&#x27;</span>,
        <span class="hljs-attr">message</span>: error.<span class="hljs-property">message</span> || <span class="hljs-string">&#x27;ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.&#x27;</span>,
        provider,
        <span class="hljs-attr">retry</span>: retryFn
      };
    }

    <span class="hljs-title function_">setError</span>(errorInfo);
    
    <span class="hljs-comment">// ì—ëŸ¬ ë¡œê¹… (ì„ íƒì‚¬í•­)</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`<span class="hljs-subst">${provider}</span> ì†Œì…œ ë¡œê·¸ì¸ ì˜¤ë¥˜:`</span>, error);
    
    <span class="hljs-comment">// ì—ëŸ¬ ë¶„ì„ì„ ìœ„í•œ ë¡œê·¸ ì „ì†¡ (ì„ íƒì‚¬í•­)</span>
    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&#x27;production&#x27;</span>) {
      <span class="hljs-comment">// sendErrorLog(errorInfo);</span>
    }
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">clearError</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">setError</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-keyword">return</span> {
    error,
    handleSocialLoginError,
    clearError
  };
};
</code></pre>
<h4 id="43-í†µí•©-ì†Œì…œ-ë¡œê·¸ì¸-ì‘ë‹µ-ì²˜ë¦¬">4.3 í†µí•© ì†Œì…œ ë¡œê·¸ì¸ ì‘ë‹µ ì²˜ë¦¬</h4>
<pre><code class="language-typescript"><span class="hljs-comment">// utils/socialLoginHandler.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SocialLoginResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../types/social-login&#x27;</span>;

<span class="hljs-comment">// í† í° ì €ì¥ ë° ê´€ë¦¬</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSocialLoginSuccess</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">
  response: SocialLoginResponse, 
  provider: <span class="hljs-built_in">string</span>
</span>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// JWT í† í° ì €ì¥ (httpOnly ì¿ í‚¤ ê¶Œì¥, ì—¬ê¸°ì„œëŠ” localStorage ì˜ˆì‹œ)</span>
    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">accessToken</span>) {
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;accessToken&#x27;</span>, response.<span class="hljs-property">accessToken</span>);
    }
    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">refreshToken</span>) {
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;refreshToken&#x27;</span>, response.<span class="hljs-property">refreshToken</span>);
    }

    <span class="hljs-comment">// ì‚¬ìš©ì ì •ë³´ ì €ì¥</span>
    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">userInfo</span>) {
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;userInfo&#x27;</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(response.<span class="hljs-property">userInfo</span>));
    }

    <span class="hljs-comment">// ì¶”ê°€ ì •ë³´ ì…ë ¥ì´ í•„ìš”í•œ ê²½ìš°</span>
    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">needsAdditionalInfo</span> || response.<span class="hljs-property">needsUsernameInput</span>) {
      <span class="hljs-comment">// íšŒì›ê°€ì… í¼ìœ¼ë¡œ ì´ë™í•˜ê±°ë‚˜ ëª¨ë‹¬ í‘œì‹œ</span>
      <span class="hljs-title function_">showSignUpModal</span>(provider, response);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// ë¡œê·¸ì¸ ì„±ê³µ ì•Œë¦¼</span>
    <span class="hljs-title function_">showSuccessNotification</span>(<span class="hljs-string">`<span class="hljs-subst">${provider}</span> ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!`</span>);

    <span class="hljs-comment">// í™ˆ í˜ì´ì§€ë¡œ ì´ë™ ë˜ëŠ” ì´ì „ í˜ì´ì§€ë¡œ ë³µê·€</span>
    <span class="hljs-keyword">const</span> returnUrl = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;returnUrl&#x27;</span>) || <span class="hljs-string">&#x27;/dashboard&#x27;</span>;
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = returnUrl;

  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:&#x27;</span>, error);
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.&#x27;</span>);
  }
};

<span class="hljs-comment">// íšŒì›ê°€ì… ëª¨ë‹¬ í‘œì‹œ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">showSignUpModal</span> = (<span class="hljs-params">provider: <span class="hljs-built_in">string</span>, response: SocialLoginResponse</span>) =&gt; {
  <span class="hljs-comment">// ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë‹¬ ìƒíƒœ ì—…ë°ì´íŠ¸</span>
  <span class="hljs-comment">// ì˜ˆ: Zustand, Redux Toolkit ë“±</span>
  
  <span class="hljs-keyword">const</span> signUpData = {
    provider,
    <span class="hljs-attr">socialToken</span>: response.<span class="hljs-property">accessToken</span>, <span class="hljs-comment">// ë˜ëŠ” ì„ì‹œ í† í°</span>
    <span class="hljs-attr">userInfo</span>: response.<span class="hljs-property">userInfo</span>,
    <span class="hljs-attr">requirements</span>: {
      <span class="hljs-attr">needsUsernameInput</span>: response.<span class="hljs-property">needsUsernameInput</span>,
      <span class="hljs-attr">needsAdditionalInfo</span>: response.<span class="hljs-property">needsAdditionalInfo</span>,
      <span class="hljs-attr">needsAccountLink</span>: response.<span class="hljs-property">needsAccountLink</span>
    }
  };

  <span class="hljs-comment">// ì „ì—­ ìƒíƒœ ì—…ë°ì´íŠ¸</span>
  <span class="hljs-comment">// useSignUpStore.getState().setSignUpData(signUpData);</span>
  <span class="hljs-comment">// useUIStore.getState().setModalOpen(&#x27;signup&#x27;);</span>
};

<span class="hljs-comment">// ì„±ê³µ ì•Œë¦¼ í‘œì‹œ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">showSuccessNotification</span> = (<span class="hljs-params">message: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-comment">// í† ìŠ¤íŠ¸ ì•Œë¦¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© (ì˜ˆ: react-hot-toast, sonner ë“±)</span>
  <span class="hljs-comment">// toast.success(message);</span>
  
  <span class="hljs-comment">// ë˜ëŠ” ë¸Œë¼ìš°ì € ê¸°ë³¸ ì•Œë¦¼</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-string">&#x27;Notification&#x27;</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span> &amp;&amp; <span class="hljs-title class_">Notification</span>.<span class="hljs-property">permission</span> === <span class="hljs-string">&#x27;granted&#x27;</span>) {
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Notification</span>(<span class="hljs-string">&#x27;ë¡œê·¸ì¸ ì„±ê³µ&#x27;</span>, { <span class="hljs-attr">body</span>: message });
  }
};
</code></pre>
<h4 id="44-íšŒì›ê°€ì…-í¼-ì»´í¬ë„ŒíŠ¸">4.4 íšŒì›ê°€ì… í¼ ì»´í¬ë„ŒíŠ¸</h4>
<pre><code class="language-typescript"><span class="hljs-comment">// components/SocialSignUpForm.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> { useForm } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-hook-form&#x27;</span>;
<span class="hljs-keyword">import</span> { zodResolver } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hookform/resolvers/zod&#x27;</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;zod&#x27;</span>;

<span class="hljs-keyword">const</span> signUpSchema = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">userId</span>: z.<span class="hljs-title function_">string</span>()
    .<span class="hljs-title function_">min</span>(<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;ì•„ì´ë””ëŠ” 4ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.&#x27;</span>)
    .<span class="hljs-title function_">max</span>(<span class="hljs-number">20</span>, <span class="hljs-string">&#x27;ì•„ì´ë””ëŠ” 20ì ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.&#x27;</span>)
    .<span class="hljs-title function_">regex</span>(<span class="hljs-regexp">/^[a-zA-Z0-9_]+$/</span>, <span class="hljs-string">&#x27;ì•„ì´ë””ëŠ” ì˜ë¬¸, ìˆ«ì, ë°‘ì¤„ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.&#x27;</span>),
  <span class="hljs-attr">phone</span>: z.<span class="hljs-title function_">string</span>()
    .<span class="hljs-title function_">regex</span>(<span class="hljs-regexp">/^010-\d{4}-\d{4}$/</span>, <span class="hljs-string">&#x27;íœ´ëŒ€í° ë²ˆí˜¸ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.&#x27;</span>),
  <span class="hljs-attr">termsAgreed</span>: z.<span class="hljs-title function_">boolean</span>().<span class="hljs-title function_">refine</span>(<span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> val, <span class="hljs-string">&#x27;ì´ìš©ì•½ê´€ì— ë™ì˜í•´ì£¼ì„¸ìš”.&#x27;</span>),
  <span class="hljs-attr">privacyAgreed</span>: z.<span class="hljs-title function_">boolean</span>().<span class="hljs-title function_">refine</span>(<span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> val, <span class="hljs-string">&#x27;ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ì— ë™ì˜í•´ì£¼ì„¸ìš”.&#x27;</span>),
  <span class="hljs-attr">marketingAgreed</span>: z.<span class="hljs-title function_">boolean</span>().<span class="hljs-title function_">optional</span>()
});

<span class="hljs-keyword">type</span> <span class="hljs-title class_">SignUpFormData</span> = z.<span class="hljs-property">infer</span>&lt;<span class="hljs-keyword">typeof</span> signUpSchema&gt;;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">SocialSignUpFormProps</span> {
  <span class="hljs-attr">provider</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">socialToken</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">userInfo</span>: <span class="hljs-built_in">any</span>;
  <span class="hljs-attr">requirements</span>: {
    <span class="hljs-attr">needsUsernameInput</span>: <span class="hljs-built_in">boolean</span>;
    <span class="hljs-attr">needsAdditionalInfo</span>: <span class="hljs-built_in">boolean</span>;
  };
  <span class="hljs-attr">onSubmit</span>: <span class="hljs-function">(<span class="hljs-params">data: SignUpFormData</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;
  <span class="hljs-attr">onCancel</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">SocialSignUpForm</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">SocialSignUpFormProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{
  provider,
  userInfo,
  requirements,
  onSubmit,
  onCancel
}</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [isSubmitting, setIsSubmitting] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [userIdAvailable, setUserIdAvailable] = useState&lt;<span class="hljs-built_in">boolean</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-keyword">const</span> { register, handleSubmit, watch, <span class="hljs-attr">formState</span>: { errors } } = useForm&lt;<span class="hljs-title class_">SignUpFormData</span>&gt;({
    <span class="hljs-attr">resolver</span>: <span class="hljs-title function_">zodResolver</span>(signUpSchema),
    <span class="hljs-attr">defaultValues</span>: {
      <span class="hljs-attr">marketingAgreed</span>: <span class="hljs-literal">false</span>
    }
  });

  <span class="hljs-keyword">const</span> userId = <span class="hljs-title function_">watch</span>(<span class="hljs-string">&#x27;userId&#x27;</span>);

  <span class="hljs-comment">// ì•„ì´ë”” ì¤‘ë³µ í™•ì¸</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">checkUserIdAvailability</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">userId: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-keyword">if</span> (!userId || userId.<span class="hljs-property">length</span> &lt; <span class="hljs-number">4</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${process.env.NEXT_PUBLIC_AUTH_SERVICE_URL}</span>/api/auth/check-userid`</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
        <span class="hljs-attr">headers</span>: { <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span> },
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ userId })
      });

      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
      <span class="hljs-title function_">setUserIdAvailable</span>(data.<span class="hljs-property">available</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;ì•„ì´ë”” ì¤‘ë³µ í™•ì¸ ì˜¤ë¥˜:&#x27;</span>, error);
    }
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleFormSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">data: SignUpFormData</span>) =&gt; {
    <span class="hljs-title function_">setIsSubmitting</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">onSubmit</span>(data);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;íšŒì›ê°€ì… ì˜¤ë¥˜:&#x27;</span>, error);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setIsSubmitting</span>(<span class="hljs-literal">false</span>);
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bg-white p-6 rounded-lg max-w-md w-full mx-4&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-xl font-bold mb-4&quot;</span>&gt;</span>
          {provider.toUpperCase()} íšŒì›ê°€ì…
        <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit(handleFormSubmit)}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;space-y-4&quot;</span>&gt;</span>
          {/* ê¸°ë³¸ ì •ë³´ í‘œì‹œ */}
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;p-3 bg-gray-50 rounded&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-sm text-gray-600&quot;</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>ì´ë©”ì¼:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {userInfo.email}
            <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-sm text-gray-600&quot;</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>ì´ë¦„:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {userInfo.name}
            <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

          {/* ì•„ì´ë”” ì…ë ¥ (í•„ìš”í•œ ê²½ìš°) */}
          {requirements.needsUsernameInput &amp;&amp; (
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;block text-sm font-medium text-gray-700 mb-1&quot;</span>&gt;</span>
                ì•„ì´ë””
              <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;relative&quot;</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
                  {<span class="hljs-attr">...register</span>(&#x27;<span class="hljs-attr">userId</span>&#x27;)}
                  <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>
                  <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">w-full</span> <span class="hljs-attr">px-3</span> <span class="hljs-attr">py-2</span> <span class="hljs-attr">border</span> <span class="hljs-attr">rounded-md</span> ${
                    <span class="hljs-attr">errors.userId</span> ? &#x27;<span class="hljs-attr">border-red-300</span>&#x27; <span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">border-gray-300</span>&#x27;
                  }`}
                  <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”&quot;</span>
                  <span class="hljs-attr">onBlur</span>=<span class="hljs-string">{()</span> =&gt;</span> checkUserIdAvailability(userId)}
                /&gt;
                {userIdAvailable === false &amp;&amp; (
                  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-sm text-red-600 mt-1&quot;</span>&gt;</span>ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                )}
                {userIdAvailable === true &amp;&amp; (
                  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-sm text-green-600 mt-1&quot;</span>&gt;</span>ì‚¬ìš© ê°€ëŠ¥í•œ ì•„ì´ë””ì…ë‹ˆë‹¤.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                )}
              <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
              {errors.userId &amp;&amp; (
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-sm text-red-600 mt-1&quot;</span>&gt;</span>{errors.userId.message}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              )}
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          )}

          {/* íœ´ëŒ€í° ë²ˆí˜¸ (í•„ìš”í•œ ê²½ìš°) */}
          {requirements.needsAdditionalInfo &amp;&amp; (
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;block text-sm font-medium text-gray-700 mb-1&quot;</span>&gt;</span>
                íœ´ëŒ€í° ë²ˆí˜¸
              <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
                {<span class="hljs-attr">...register</span>(&#x27;<span class="hljs-attr">phone</span>&#x27;)}
                <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;tel&quot;</span>
                <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">w-full</span> <span class="hljs-attr">px-3</span> <span class="hljs-attr">py-2</span> <span class="hljs-attr">border</span> <span class="hljs-attr">rounded-md</span> ${
                  <span class="hljs-attr">errors.phone</span> ? &#x27;<span class="hljs-attr">border-red-300</span>&#x27; <span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">border-gray-300</span>&#x27;
                }`}
                <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;010-0000-0000&quot;</span>
              /&gt;</span>
              {errors.phone &amp;&amp; (
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-sm text-red-600 mt-1&quot;</span>&gt;</span>{errors.phone.message}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              )}
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          )}

          {/* ì•½ê´€ ë™ì˜ */}
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;space-y-2&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;flex items-center&quot;</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
                {<span class="hljs-attr">...register</span>(&#x27;<span class="hljs-attr">termsAgreed</span>&#x27;)}
                <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span>
                <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mr-2&quot;</span>
              /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-sm&quot;</span>&gt;</span>ì´ìš©ì•½ê´€ì— ë™ì˜í•©ë‹ˆë‹¤ (í•„ìˆ˜)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            {errors.termsAgreed &amp;&amp; (
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-sm text-red-600&quot;</span>&gt;</span>{errors.termsAgreed.message}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            )}

            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;flex items-center&quot;</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
                {<span class="hljs-attr">...register</span>(&#x27;<span class="hljs-attr">privacyAgreed</span>&#x27;)}
                <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span>
                <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mr-2&quot;</span>
              /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-sm&quot;</span>&gt;</span>ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ì— ë™ì˜í•©ë‹ˆë‹¤ (í•„ìˆ˜)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            {errors.privacyAgreed &amp;&amp; (
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-sm text-red-600&quot;</span>&gt;</span>{errors.privacyAgreed.message}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            )}

            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;flex items-center&quot;</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
                {<span class="hljs-attr">...register</span>(&#x27;<span class="hljs-attr">marketingAgreed</span>&#x27;)}
                <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span>
                <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mr-2&quot;</span>
              /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-sm&quot;</span>&gt;</span>ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹ ì— ë™ì˜í•©ë‹ˆë‹¤ (ì„ íƒ)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

          {/* ë²„íŠ¼ */}
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;flex gap-2 pt-4&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
              <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span>
              <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onCancel}</span>
              <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50&quot;</span>
            &gt;</span>
              ì·¨ì†Œ
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
              <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>
              <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isSubmitting</span> || <span class="hljs-attr">userIdAvailable</span> === <span class="hljs-string">false}</span>
              <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50&quot;</span>
            &gt;</span>
              {isSubmitting ? &#x27;ì²˜ë¦¬ ì¤‘...&#x27; : &#x27;íšŒì›ê°€ì…&#x27;}
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<hr>
<h2 id="-í”Œë«í¼ë³„-ìƒì„¸-í”Œë¡œìš°">ğŸ”„ í”Œë«í¼ë³„ ìƒì„¸ í”Œë¡œìš°</h2>
<h3 id="1-google-ë¡œê·¸ì¸-í”Œë¡œìš°">1. Google ë¡œê·¸ì¸ í”Œë¡œìš°</h3>
<pre class="mermaid">sequenceDiagram
    participant User as ğŸ‘¤ ì‚¬ìš©ì
    participant Frontend as ğŸŒ í”„ë¡ íŠ¸ì—”ë“œ
    participant GSI as ğŸ” Google GSI
    participant AuthService as ğŸ” AuthService
    participant GoogleAPI as ğŸ“¡ Google API
    participant DB as ğŸ—„ï¸ Database
    
    User-&gt;&gt;Frontend: &quot;Googleë¡œ ì‹œì‘í•˜ê¸°&quot; í´ë¦­
    Frontend-&gt;&gt;GSI: google.accounts.id.initialize()
    GSI-&gt;&gt;User: Google ë¡œê·¸ì¸ íŒì—… í‘œì‹œ
    User-&gt;&gt;GSI: ê³„ì • ì„ íƒ ë° ë¡œê·¸ì¸
    GSI-&gt;&gt;Frontend: handleCredentialResponse(idToken)
    
    Frontend-&gt;&gt;AuthService: POST /api/auth/social/google&lt;br/&gt;{idToken, deviceInfo}
    AuthService-&gt;&gt;GoogleAPI: GET /oauth2/v3/tokeninfo?id_token=...
    GoogleAPI-&gt;&gt;AuthService: ì‚¬ìš©ì ì •ë³´ ì‘ë‹µ
    AuthService-&gt;&gt;DB: 3ë‹¨ê³„ ìë™ íŒë‹¨ ë¡œì§ ì‹¤í–‰
    DB-&gt;&gt;AuthService: ì‚¬ìš©ì ì •ë³´ ë°˜í™˜
    AuthService-&gt;&gt;Frontend: JWT + ì‚¬ìš©ì ì •ë³´ ì‘ë‹µ
    Frontend-&gt;&gt;User: ë¡œê·¸ì¸ ì™„ë£Œ ë˜ëŠ” íšŒì›ê°€ì… í¼
</pre>
<h3 id="2-ì¹´ì¹´ì˜¤-ë¡œê·¸ì¸-í”Œë¡œìš°">2. ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í”Œë¡œìš°</h3>
<pre class="mermaid">sequenceDiagram
    participant User as ğŸ‘¤ ì‚¬ìš©ì
    participant Frontend as ğŸŒ í”„ë¡ íŠ¸ì—”ë“œ
    participant KakaoSDK as ğŸŠ Kakao SDK
    participant AuthService as ğŸ” AuthService
    participant KakaoAPI as ğŸ“¡ Kakao API
    participant DB as ğŸ—„ï¸ Database
    
    User-&gt;&gt;Frontend: &quot;ì¹´ì¹´ì˜¤ë¡œ ì‹œì‘í•˜ê¸°&quot; í´ë¦­
    Frontend-&gt;&gt;KakaoSDK: Kakao.Auth.createLoginButton()
    KakaoSDK-&gt;&gt;User: ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€
    User-&gt;&gt;KakaoSDK: ì¹´ì¹´ì˜¤ ê³„ì • ë¡œê·¸ì¸
    KakaoSDK-&gt;&gt;Frontend: success(accessToken)
    
    Frontend-&gt;&gt;AuthService: POST /api/auth/social/kakao&lt;br/&gt;{accessToken, deviceInfo}
    AuthService-&gt;&gt;KakaoAPI: GET /v2/user/me&lt;br/&gt;Authorization: Bearer {accessToken}
    KakaoAPI-&gt;&gt;AuthService: ì‚¬ìš©ì ì •ë³´ ì‘ë‹µ&lt;br/&gt;{id, kakao_account: {email, profile}}
    AuthService-&gt;&gt;DB: 3ë‹¨ê³„ ìë™ íŒë‹¨ ë¡œì§ ì‹¤í–‰
    DB-&gt;&gt;AuthService: ì‚¬ìš©ì ì •ë³´ ë°˜í™˜
    AuthService-&gt;&gt;Frontend: JWT + ì‚¬ìš©ì ì •ë³´ ì‘ë‹µ
    Frontend-&gt;&gt;User: ë¡œê·¸ì¸ ì™„ë£Œ ë˜ëŠ” íšŒì›ê°€ì… í¼
</pre>
<h3 id="3-ë„¤ì´ë²„-ë¡œê·¸ì¸-í”Œë¡œìš°-íŒì—…-ë°©ì‹">3. ë„¤ì´ë²„ ë¡œê·¸ì¸ í”Œë¡œìš° (íŒì—… ë°©ì‹)</h3>
<pre class="mermaid">sequenceDiagram
    participant User as ğŸ‘¤ ì‚¬ìš©ì
    participant Frontend as ğŸŒ í”„ë¡ íŠ¸ì—”ë“œ
    participant Popup as ğŸ”— íŒì—…ì°½
    participant AuthService as ğŸ” AuthService
    participant NaverOAuth as ğŸŸ¢ ë„¤ì´ë²„ OAuth
    participant NaverAPI as ğŸ“¡ ë„¤ì´ë²„ API
    participant DB as ğŸ—„ï¸ Database
    
    User-&gt;&gt;Frontend: &quot;ë„¤ì´ë²„ë¡œ ì‹œì‘í•˜ê¸°&quot; í´ë¦­
    Frontend-&gt;&gt;Popup: window.open('/api/auth/social/naver/login')
    Popup-&gt;&gt;AuthService: GET /api/auth/social/naver/login
    AuthService-&gt;&gt;NaverOAuth: redirect to ë„¤ì´ë²„ ì¸ì¦ í˜ì´ì§€
    NaverOAuth-&gt;&gt;User: ë„¤ì´ë²„ ë¡œê·¸ì¸ í˜ì´ì§€ í‘œì‹œ
    User-&gt;&gt;NaverOAuth: ë„¤ì´ë²„ ê³„ì • ë¡œê·¸ì¸
    NaverOAuth-&gt;&gt;AuthService: GET /api/auth/social/naver/callback?code=...&amp;state=...
    
    AuthService-&gt;&gt;NaverOAuth: POST /oauth2.0/token&lt;br/&gt;{code, client_id, client_secret}
    NaverOAuth-&gt;&gt;AuthService: {access_token}
    AuthService-&gt;&gt;NaverAPI: GET /v1/nid/me&lt;br/&gt;Authorization: Bearer {access_token}
    NaverAPI-&gt;&gt;AuthService: ì‚¬ìš©ì ì •ë³´ ì‘ë‹µ&lt;br/&gt;{response: {id, email, name}}
    AuthService-&gt;&gt;DB: 3ë‹¨ê³„ ìë™ íŒë‹¨ ë¡œì§ ì‹¤í–‰
    DB-&gt;&gt;AuthService: ì‚¬ìš©ì ì •ë³´ ë°˜í™˜
    
    alt ë¡œê·¸ì¸ ì„±ê³µ
        AuthService-&gt;&gt;Popup: HTML + postMessage('NAVER_LOGIN_SUCCESS')
        Popup-&gt;&gt;Frontend: window.opener.postMessage({type: 'NAVER_LOGIN_SUCCESS'})
        Frontend-&gt;&gt;User: ë¡œê·¸ì¸ ì™„ë£Œ
    else íšŒì›ê°€ì… í•„ìš”
        AuthService-&gt;&gt;Popup: HTML + postMessage('NAVER_SIGNUP_NEEDED')
        Popup-&gt;&gt;Frontend: window.opener.postMessage({type: 'NAVER_SIGNUP_NEEDED'})
        Frontend-&gt;&gt;User: íšŒì›ê°€ì… í¼ í‘œì‹œ
    end
</pre>
<hr>
<hr>
<h2 id="-ì†Œì…œ-ë¡œê·¸ì¸-ì ˆì°¨">ğŸ” ì†Œì…œ ë¡œê·¸ì¸ ì ˆì°¨</h2>
<h3 id="1-google-ì†Œì…œ-ë¡œê·¸ì¸-í”Œë¡œìš°">1. Google ì†Œì…œ ë¡œê·¸ì¸ í”Œë¡œìš°</h3>
<pre class="mermaid">sequenceDiagram
    participant U as ì‚¬ìš©ì
    participant C as í´ë¼ì´ì–¸íŠ¸(ì•±/ì›¹)
    participant A as AuthService
    participant G as Google API
    participant DB as Database
    participant R as Redis
    
    U-&gt;&gt;C: 1. Google ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
    C-&gt;&gt;G: 2. Google OAuth ì¸ì¦ ìš”ì²­
    G-&gt;&gt;U: 3. Google ë¡œê·¸ì¸ í˜ì´ì§€ í‘œì‹œ
    U-&gt;&gt;G: 4. ê³„ì • ì •ë³´ ì…ë ¥ &amp; ë™ì˜
    G-&gt;&gt;C: 5. ID Token ë°œê¸‰
    
    C-&gt;&gt;A: 6. POST /api/auth/social/google
    Note over C,A: { &quot;idToken&quot;: &quot;google_id_token&quot; }
    
    A-&gt;&gt;G: 7. ID Token ê²€ì¦
    G-&gt;&gt;A: 8. ì‚¬ìš©ì ì •ë³´ ë°˜í™˜
    Note over G,A: { sub, email, name, picture, email_verified }
    
    A-&gt;&gt;DB: 9. ì†Œì…œ ê³„ì • ì¡°íšŒ/ìƒì„±
    DB-&gt;&gt;A: 10. ì‚¬ìš©ì ì •ë³´ ë°˜í™˜
    
    A-&gt;&gt;A: 11. JWT í† í° ìƒì„±
    A-&gt;&gt;R: 12. í† í° ìºì‹±
    
    A-&gt;&gt;C: 13. ë¡œê·¸ì¸ ì‘ë‹µ
    Note over A,C: { accessToken, refreshToken, userInfo }
    
    C-&gt;&gt;U: 14. ë¡œê·¸ì¸ ì™„ë£Œ í™”ë©´
</pre>
<h3 id="2-kakao-ì†Œì…œ-ë¡œê·¸ì¸-í”Œë¡œìš°">2. Kakao ì†Œì…œ ë¡œê·¸ì¸ í”Œë¡œìš°</h3>
<pre class="mermaid">sequenceDiagram
    participant U as ì‚¬ìš©ì
    participant C as í´ë¼ì´ì–¸íŠ¸
    participant A as AuthService
    participant K as Kakao API
    participant DB as Database
    participant R as Redis
    
    U-&gt;&gt;C: 1. ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
    C-&gt;&gt;K: 2. ì¹´ì¹´ì˜¤ OAuth ì¸ì¦ ìš”ì²­
    K-&gt;&gt;U: 3. ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€
    U-&gt;&gt;K: 4. ë¡œê·¸ì¸ &amp; ë™ì˜
    K-&gt;&gt;C: 5. Access Token ë°œê¸‰
    
    C-&gt;&gt;A: 6. POST /api/auth/social/kakao
    Note over C,A: { &quot;accessToken&quot;: &quot;kakao_access_token&quot; }
    
    A-&gt;&gt;K: 7. ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
    K-&gt;&gt;A: 8. ì‚¬ìš©ì ì •ë³´ ë°˜í™˜
    Note over K,A: { id, kakao_account: { email, profile: { nickname, profile_image_url } } }
    
    A-&gt;&gt;DB: 9. ì†Œì…œ ê³„ì • ì²˜ë¦¬
    A-&gt;&gt;A: 10. JWT í† í° ìƒì„±
    A-&gt;&gt;R: 11. í† í° ìºì‹±
    A-&gt;&gt;C: 12. ë¡œê·¸ì¸ ì‘ë‹µ
    C-&gt;&gt;U: 13. ë¡œê·¸ì¸ ì™„ë£Œ
</pre>
<h3 id="3-naver-ì†Œì…œ-ë¡œê·¸ì¸-í”Œë¡œìš°">3. Naver ì†Œì…œ ë¡œê·¸ì¸ í”Œë¡œìš°</h3>
<pre class="mermaid">sequenceDiagram
    participant U as ì‚¬ìš©ì
    participant C as í´ë¼ì´ì–¸íŠ¸
    participant A as AuthService
    participant N as Naver API
    participant DB as Database
    participant R as Redis
    
    U-&gt;&gt;C: 1. ë„¤ì´ë²„ ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
    C-&gt;&gt;N: 2. ë„¤ì´ë²„ OAuth ì¸ì¦ ìš”ì²­
    N-&gt;&gt;U: 3. ë„¤ì´ë²„ ë¡œê·¸ì¸ í˜ì´ì§€
    U-&gt;&gt;K: 4. ë¡œê·¸ì¸ &amp; ë™ì˜
    N-&gt;&gt;C: 5. Access Token ë°œê¸‰
    
    C-&gt;&gt;A: 6. POST /api/auth/social/naver
    Note over C,A: { &quot;accessToken&quot;: &quot;naver_access_token&quot; }
    
    A-&gt;&gt;N: 7. ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
    N-&gt;&gt;A: 8. ì‚¬ìš©ì ì •ë³´ ë°˜í™˜
    Note over N,A: { resultcode: &quot;00&quot;, response: { id, email, name, nickname, profile_image } }
    
    A-&gt;&gt;DB: 9. ì†Œì…œ ê³„ì • ì²˜ë¦¬
    A-&gt;&gt;A: 10. JWT í† í° ìƒì„±
    A-&gt;&gt;R: 11. í† í° ìºì‹±
    A-&gt;&gt;C: 12. ë¡œê·¸ì¸ ì‘ë‹µ
    C-&gt;&gt;U: 13. ë¡œê·¸ì¸ ì™„ë£Œ
</pre>
<hr>
<h2 id="-ì†Œì…œ-íšŒì›ê°€ì…-ì ˆì°¨">ğŸ‘¤ ì†Œì…œ íšŒì›ê°€ì… ì ˆì°¨</h2>
<h3 id="ì†Œì…œ-íšŒì›ê°€ì…-í†µí•©-í”Œë¡œìš°">ì†Œì…œ íšŒì›ê°€ì… í†µí•© í”Œë¡œìš°</h3>
<pre class="mermaid">sequenceDiagram
    participant U as ì‚¬ìš©ì
    participant C as í´ë¼ì´ì–¸íŠ¸
    participant A as AuthService
    participant S as ì†Œì…œ í”Œë«í¼
    participant DB as Database
    participant R as Redis
    
    U-&gt;&gt;C: 1. ì†Œì…œ íšŒì›ê°€ì… ì„ íƒ
    C-&gt;&gt;S: 2. ì†Œì…œ ì¸ì¦ ìš”ì²­
    S-&gt;&gt;U: 3. ë¡œê·¸ì¸ í˜ì´ì§€ í‘œì‹œ
    U-&gt;&gt;S: 4. ì¸ì¦ &amp; ë™ì˜
    S-&gt;&gt;C: 5. ì†Œì…œ í† í° ë°œê¸‰
    
    C-&gt;&gt;U: 6. ì¶”ê°€ ì •ë³´ ì…ë ¥ í¼ í‘œì‹œ
    Note over C,U: userId, ì „í™”ë²ˆí˜¸, ì•½ê´€ ë™ì˜
    U-&gt;&gt;C: 7. ì¶”ê°€ ì •ë³´ ì…ë ¥
    
    C-&gt;&gt;A: 8. POST /api/auth/social/signup
    Note over C,A: { provider, socialToken, userId, phone, termsAgreed, privacyAgreed }
    
    A-&gt;&gt;S: 9. ì†Œì…œ í† í°ìœ¼ë¡œ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
    S-&gt;&gt;A: 10. ì†Œì…œ ì‚¬ìš©ì ì •ë³´ ë°˜í™˜
    
    A-&gt;&gt;DB: 11. userId ì¤‘ë³µ í™•ì¸
    DB-&gt;&gt;A: 12. ì¤‘ë³µ ì—¬ë¶€ ì‘ë‹µ
    
    alt userId ì¤‘ë³µì¸ ê²½ìš°
        A-&gt;&gt;C: 13. ì¤‘ë³µ ì˜¤ë¥˜ ì‘ë‹µ
        C-&gt;&gt;U: 14. ë‹¤ë¥¸ ì•„ì´ë”” ì…ë ¥ ìš”ì²­
    else userId ì‚¬ìš© ê°€ëŠ¥
        A-&gt;&gt;DB: 15. ìƒˆ ì‚¬ìš©ì ìƒì„±
        A-&gt;&gt;DB: 16. ì†Œì…œ ê³„ì • ì—°ê²°
        A-&gt;&gt;A: 17. JWT í† í° ìƒì„±
        A-&gt;&gt;R: 18. í† í° ìºì‹±
        A-&gt;&gt;C: 19. íšŒì›ê°€ì… ì„±ê³µ ì‘ë‹µ
        C-&gt;&gt;U: 20. íšŒì›ê°€ì… ì™„ë£Œ í™”ë©´
    end
</pre>
<hr>
<h2 id="íŒë‹¨-í”Œë¡œìš°-ë‹¤ì´ì–´ê·¸ë¨">íŒë‹¨ í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨</h2>
<pre class="mermaid">flowchart TD
    A[ì†Œì…œ í† í° ìˆ˜ì‹ ] --&gt; B[ì†Œì…œ ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ]
    B --&gt; C{1ï¸âƒ£ ì†Œì…œ IDë¡œ ê¸°ì¡´ ê³„ì • ì°¾ê¸°}
    
    C --&gt;|ì°¾ìŒ| D[ğŸŸ¢ ì¦‰ì‹œ ë¡œê·¸ì¸]
    C --&gt;|ëª»ì°¾ìŒ| E{2ï¸âƒ£ ì´ë©”ì¼ë¡œ ê¸°ì¡´ ì‚¬ìš©ì ì°¾ê¸°}
    
    E --&gt;|ì°¾ìŒ| F[ğŸ”— ì†Œì…œ ê³„ì • ì—°ê²°]
    F --&gt; G[ğŸŸ¢ ì—°ê²° í›„ ë¡œê·¸ì¸]
    
    E --&gt;|ëª»ì°¾ìŒ| H[ğŸ†• ì‹ ê·œ ì‚¬ìš©ì ìƒì„±]
    H --&gt; I{3ï¸âƒ£ ì¶”ê°€ ì •ë³´ ì¶©ë¶„í•œê°€?}
    
    I --&gt;|ì¶©ë¶„í•¨| J[ğŸŸ¢ ìë™ ìƒì„± í›„ ë¡œê·¸ì¸]
    I --&gt;|ë¶€ì¡±í•¨| K[âš ï¸ ì†Œì…œ íšŒì›ê°€ì… í•„ìš”]
    
    K --&gt; L[ì‚¬ìš©ìê°€ ì¶”ê°€ ì •ë³´ ì…ë ¥]
    L --&gt; M[ğŸŸ¢ íšŒì›ê°€ì… ì™„ë£Œ í›„ ë¡œê·¸ì¸]
</pre>
<hr>
<h2 id="-ë°ì´í„°-êµ¬ì¡°-ë°-api-ìŠ¤í™">ï¿½ ë°ì´í„° êµ¬ì¡° ë° API ìŠ¤í™</h2>
<h3 id="1-ìš”ì²­-ë°ì´í„°-êµ¬ì¡°">1. ìš”ì²­ ë°ì´í„° êµ¬ì¡°</h3>
<h4 id="google-ë¡œê·¸ì¸-ìš”ì²­-googleloginrequest">Google ë¡œê·¸ì¸ ìš”ì²­ (GoogleLoginRequest)</h4>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;idToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;deviceInfo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;platform&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;WEB_BROWSER&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// WEB_BROWSER, MOBILE_APP, ADMIN_WEB</span>
    <span class="hljs-attr">&quot;deviceId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;browser-fingerprint-uuid&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;appVersion&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 id="ì¹´ì¹´ì˜¤-ë¡œê·¸ì¸-ìš”ì²­-kakaologinrequest">ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ìš”ì²­ (KakaoLoginRequest)</h4>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;accessToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;kEWG7tLkJc3eDpNpOo8TCCoTsCYadJ5F_access_token&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;deviceInfo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;platform&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;MOBILE_APP&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;deviceId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;device-unique-id&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;appVersion&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2.1.0&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 id="ë„¤ì´ë²„-ë¡œê·¸ì¸-ìš”ì²­-naverloginrequest">ë„¤ì´ë²„ ë¡œê·¸ì¸ ìš”ì²­ (NaverLoginRequest)</h4>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;accessToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;AAAANVl6Y8PgC8HsssEQutadsd_access_token&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 id="ì†Œì…œ-íšŒì›ê°€ì…-ìš”ì²­-socialsignuprequest">ì†Œì…œ íšŒì›ê°€ì… ìš”ì²­ (SocialSignUpRequest)</h4>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;provider&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;GOOGLE&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// GOOGLE, KAKAO, NAVER</span>
  <span class="hljs-attr">&quot;socialToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;social_platform_token&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;userId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;user_unique_id&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;phone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;010-1234-5678&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;termsAgreed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;privacyAgreed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;marketingAgreed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="2-ì‘ë‹µ-ë°ì´í„°-êµ¬ì¡°">2. ì‘ë‹µ ë°ì´í„° êµ¬ì¡°</h3>
<h4 id="í†µí•©-ì†Œì…œ-ë¡œê·¸ì¸-ì‘ë‹µ-socialloginresponse">í†µí•© ì†Œì…œ ë¡œê·¸ì¸ ì‘ë‹µ (SocialLoginResponse)</h4>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;success&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;accessToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;eyJhbGciOiJIUzUxMiJ9.eyJ1c2VySWQiOiI...&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;refreshToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4f8b1c2e-3d4a-5b6c-7d8e-9f0a1b2c3d4e&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;tokenType&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Bearer&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;expiresIn&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3600</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;userInfo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;member-uuid-1234&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;user@gmail.com&quot;</span><span class="hljs-punctuation">,</span> 
    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;í™ê¸¸ë™&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;profileImageUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://profile-image-url&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;USER&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;isNewUser&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;needsAdditionalInfo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;needsUsernameInput&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span><span class="hljs-punctuation">,</span> 
  <span class="hljs-attr">&quot;needsAccountLink&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Google ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 id="ì†Œì…œ-íšŒì›ê°€ì…-ì‘ë‹µ-socialsignupresponse">ì†Œì…œ íšŒì›ê°€ì… ì‘ë‹µ (SocialSignUpResponse)</h4>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;success&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;accessToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;eyJhbGciOiJIUzUxMiJ9...&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;refreshToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;refresh-token-uuid&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;tokenType&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Bearer&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;expiresIn&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3600</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;userInfo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;new-member-uuid&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;newuser@gmail.com&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ê¹€ì‹ ê·œ&quot;</span><span class="hljs-punctuation">,</span> 
    <span class="hljs-attr">&quot;profileImageUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://profile-image-url&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;provider&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;GOOGLE&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;USER&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;needsAdditionalInfo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="3-ì¤‘ê°„-ì²˜ë¦¬-ë°ì´í„°-socialuserinfo">3. ì¤‘ê°„ ì²˜ë¦¬ ë°ì´í„° (SocialUserInfo)</h3>
<p><strong>í”Œë«í¼ë³„ ì‚¬ìš©ì ì •ë³´ í†µí•© í´ë˜ìŠ¤</strong>:</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;provider&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;google&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// google, kakao, naver</span>
  <span class="hljs-attr">&quot;socialId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;108234567890123456789&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;user@gmail.com&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;í™ê¸¸ë™&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;profileImageUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://profile-image-url&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;emailVerified&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;phoneNumber&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;010-1234-5678&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;locale&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ko_KR&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;collectionChannel&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;mobile_app&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;providedInfoMask&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">37</span>  <span class="hljs-comment">// ë¹„íŠ¸ë§ˆìŠ¤í¬ë¡œ ì œê³µëœ ì •ë³´ í‘œì‹œ</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="4-ë°ì´í„°ë² ì´ìŠ¤-êµ¬ì¡°">4. ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°</h3>
<h4 id="members-í…Œì´ë¸”">members í…Œì´ë¸”</h4>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> members (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
    member_uuid <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">36</span>) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">UNIQUE</span>,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),
    user_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">UNIQUE</span>,
    phone <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>),
    profile_image_url TEXT,
    role <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;USER&#x27;</span>,
    status <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;ACTIVE&#x27;</span>,
    last_login_at <span class="hljs-type">TIMESTAMP</span>,
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    updated_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);
</code></pre>
<h4 id="member_social_accounts-í…Œì´ë¸”">member_social_accounts í…Œì´ë¸”</h4>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> member_social_accounts (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
    member_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    provider <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,  <span class="hljs-comment">-- GOOGLE, KAKAO, NAVER</span>
    social_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),
    profile_image_url TEXT,
    is_primary <span class="hljs-type">BOOLEAN</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">FALSE</span>,
    last_used_at <span class="hljs-type">TIMESTAMP</span>,
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    updated_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    
    <span class="hljs-keyword">FOREIGN</span> KEY (member_id) <span class="hljs-keyword">REFERENCES</span> members(id),
    <span class="hljs-keyword">UNIQUE</span> KEY unique_social_account (provider, social_id)
);
</code></pre>
<hr>
<h2 id="-í…ŒìŠ¤íŠ¸-ë°-ë””ë²„ê¹…-ê°€ì´ë“œ">ğŸ§ª í…ŒìŠ¤íŠ¸ ë° ë””ë²„ê¹… ê°€ì´ë“œ</h2>
<h3 id="3-ë°±ì—”ë“œ-ê°œë°œ-ëª¨ë“œ-ì„¤ì •">3. ë°±ì—”ë“œ ê°œë°œ ëª¨ë“œ ì„¤ì •</h3>
<h4 id="31-applicationyml-ê°œë°œ-ì„¤ì •">3.1 application.yml ê°œë°œ ì„¤ì •</h4>
<pre><code class="language-yaml"><span class="hljs-comment"># AuthServiceì˜ application-dev.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">profiles:</span>
    <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span>
    
<span class="hljs-attr">social:</span>
  <span class="hljs-attr">google:</span>
    <span class="hljs-attr">client-id:</span> <span class="hljs-string">${GOOGLE_CLIENT_ID:YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com}</span>
    <span class="hljs-attr">dev-mode:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># ë”ë¯¸ ë°ì´í„° ì‚¬ìš©</span>
    <span class="hljs-attr">token-info-url:</span> <span class="hljs-string">https://oauth2.googleapis.com/tokeninfo</span>
    
  <span class="hljs-attr">kakao:</span>
    <span class="hljs-attr">client-id:</span> <span class="hljs-string">${KAKAO_REST_API_KEY:your-kakao-rest-api-key}</span>
    <span class="hljs-attr">user-info-url:</span> <span class="hljs-string">https://kapi.kakao.com/v2/user/me</span>
    <span class="hljs-attr">dev-mode:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># ë”ë¯¸ ë°ì´í„° ì‚¬ìš©</span>
    
  <span class="hljs-attr">naver:</span>
    <span class="hljs-attr">client-id:</span> <span class="hljs-string">${NAVER_CLIENT_ID:YOUR_NAVER_CLIENT_ID}</span>
    <span class="hljs-attr">client-secret:</span> <span class="hljs-string">${NAVER_CLIENT_SECRET:your-naver-client-secret}</span>
    <span class="hljs-attr">redirect-uri:</span> <span class="hljs-string">http://localhost:8082/api/auth/social/naver/callback</span>
    <span class="hljs-attr">auth-url:</span> <span class="hljs-string">https://nid.naver.com/oauth2.0/authorize</span>
    <span class="hljs-attr">token-url:</span> <span class="hljs-string">https://nid.naver.com/oauth2.0/token</span>
    <span class="hljs-attr">user-info-url:</span> <span class="hljs-string">https://openapi.naver.com/v1/nid/me</span>
    <span class="hljs-attr">dev-mode:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># ë”ë¯¸ ë°ì´í„° ì‚¬ìš©</span>

<span class="hljs-attr">jwt:</span>
  <span class="hljs-attr">secret:</span> <span class="hljs-string">${JWT_SECRET:YOUR_JWT_SECRET_KEY_HERE}</span>
  <span class="hljs-attr">access-token-expiry:</span> <span class="hljs-number">3600</span>  <span class="hljs-comment"># 1ì‹œê°„</span>
  <span class="hljs-attr">refresh-token-expiry:</span> <span class="hljs-number">86400</span>  <span class="hljs-comment"># 24ì‹œê°„</span>

<span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">com.akc.b2c.authservice.service.social:</span> <span class="hljs-string">DEBUG</span>
    <span class="hljs-attr">org.springframework.web:</span> <span class="hljs-string">DEBUG</span>
    <span class="hljs-attr">org.springframework.security:</span> <span class="hljs-string">DEBUG</span>
</code></pre>
<h4 id="32-ê°œë°œ-ëª¨ë“œ-ë”ë¯¸-ë°ì´í„°">3.2 ê°œë°œ ëª¨ë“œ ë”ë¯¸ ë°ì´í„°</h4>
<pre><code class="language-java"><span class="hljs-comment">// GoogleAuthService.javaì˜ ê°œë°œ ëª¨ë“œ ë”ë¯¸ ë°ì´í„°</span>
<span class="hljs-keyword">private</span> SocialUserInfo <span class="hljs-title function_">createDummyGoogleUserInfo</span><span class="hljs-params">(String idToken)</span> {
    <span class="hljs-keyword">return</span> SocialUserInfo.builder()
            .provider(<span class="hljs-string">&quot;google&quot;</span>)
            .socialId(<span class="hljs-string">&quot;dummy_google_&quot;</span> + System.currentTimeMillis())
            .email(<span class="hljs-string">&quot;dev.google@test.com&quot;</span>)
            .name(<span class="hljs-string">&quot;êµ¬ê¸€ í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì&quot;</span>)
            .profileImageUrl(<span class="hljs-string">&quot;https://lh3.googleusercontent.com/a/default-user=s96-c&quot;</span>)
            .emailVerified(<span class="hljs-literal">true</span>)
            .locale(<span class="hljs-string">&quot;ko_KR&quot;</span>)
            .build();
}

<span class="hljs-comment">// KakaoAuthService.javaì˜ ê°œë°œ ëª¨ë“œ ë”ë¯¸ ë°ì´í„°</span>
<span class="hljs-keyword">private</span> SocialUserInfo <span class="hljs-title function_">createDevModeUserInfo</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> SocialUserInfo.builder()
            .provider(<span class="hljs-string">&quot;kakao&quot;</span>)
            .socialId(<span class="hljs-string">&quot;dummy_kakao_&quot;</span> + System.currentTimeMillis())
            .email(<span class="hljs-string">&quot;dev.kakao@test.com&quot;</span>)
            .name(<span class="hljs-string">&quot;ì¹´ì¹´ì˜¤ í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì&quot;</span>)
            .profileImageUrl(<span class="hljs-string">&quot;https://k.kakaocdn.net/dn/default_profile.png&quot;</span>)
            .emailVerified(<span class="hljs-literal">true</span>)
            .build();
}

<span class="hljs-comment">// NaverAuthService.javaì˜ ê°œë°œ ëª¨ë“œ ë”ë¯¸ ë°ì´í„°</span>
<span class="hljs-keyword">private</span> SocialUserInfo <span class="hljs-title function_">createDummyNaverUserInfo</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> SocialUserInfo.builder()
            .provider(<span class="hljs-string">&quot;naver&quot;</span>)
            .socialId(<span class="hljs-string">&quot;dummy_naver_&quot;</span> + System.currentTimeMillis())
            .email(<span class="hljs-string">&quot;dev.naver@test.com&quot;</span>)
            .name(<span class="hljs-string">&quot;ë„¤ì´ë²„ í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì&quot;</span>)
            .profileImageUrl(<span class="hljs-string">&quot;https://ssl.pstatic.net/static/pwe/address/img_profile.png&quot;</span>)
            .emailVerified(<span class="hljs-literal">true</span>)
            .build();
}
</code></pre>
<h3 id="4-í”Œë«í¼ë³„-í…ŒìŠ¤íŠ¸-ì‹œë‚˜ë¦¬ì˜¤">4. í”Œë«í¼ë³„ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤</h3>
<h4 id="41-google-ë¡œê·¸ì¸-í…ŒìŠ¤íŠ¸">4.1 Google ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</h4>
<pre><code class="language-javascript"><span class="hljs-comment">// ê°œë°œ ëª¨ë“œ í…ŒìŠ¤íŠ¸ (ë”ë¯¸ í† í°)</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">testGoogleLogin</span> = (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;http://localhost:8082/api/auth/social/google&#x27;</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
        <span class="hljs-attr">headers</span>: { <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span> },
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
            <span class="hljs-attr">idToken</span>: <span class="hljs-string">&#x27;dummy_google_id_token_for_dev&#x27;</span>,
            <span class="hljs-attr">deviceInfo</span>: {
                <span class="hljs-attr">platform</span>: <span class="hljs-string">&#x27;WEB_BROWSER&#x27;</span>,
                <span class="hljs-attr">deviceId</span>: <span class="hljs-string">&#x27;test-device-&#x27;</span> + <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
            }
        })
    });
};
</code></pre>
<h4 id="42-ì¹´ì¹´ì˜¤-ë¡œê·¸ì¸-í…ŒìŠ¤íŠ¸">4.2 ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</h4>
<pre><code class="language-javascript"><span class="hljs-comment">// ê°œë°œ ëª¨ë“œ í…ŒìŠ¤íŠ¸ (ë”ë¯¸ í† í°)  </span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">testKakaoLogin</span> = (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;http://localhost:8082/api/auth/social/kakao&#x27;</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
        <span class="hljs-attr">headers</span>: { <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span> },
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
            <span class="hljs-attr">accessToken</span>: <span class="hljs-string">&#x27;dummy_kakao_access_token_for_dev&#x27;</span>,
            <span class="hljs-attr">deviceInfo</span>: {
                <span class="hljs-attr">platform</span>: <span class="hljs-string">&#x27;WEB_BROWSER&#x27;</span>,
                <span class="hljs-attr">deviceId</span>: <span class="hljs-string">&#x27;test-device-&#x27;</span> + <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
            }
        })
    });
};
</code></pre>
<h4 id="43-ë„¤ì´ë²„-ë¡œê·¸ì¸-í…ŒìŠ¤íŠ¸">4.3 ë„¤ì´ë²„ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</h4>
<pre><code class="language-javascript"><span class="hljs-comment">// íŒì—… ë°©ì‹ í…ŒìŠ¤íŠ¸</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">testNaverLogin</span> = (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-keyword">const</span> popup = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(
        <span class="hljs-string">&#x27;http://localhost:8082/api/auth/social/naver/login&#x27;</span>,
        <span class="hljs-string">&#x27;naverTest&#x27;</span>,
        <span class="hljs-string">&#x27;width=500,height=600&#x27;</span>
    );
    
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;message&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (event.<span class="hljs-property">origin</span> !== <span class="hljs-string">&#x27;http://localhost:8082&#x27;</span>) <span class="hljs-keyword">return</span>;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;ë„¤ì´ë²„ ë¡œê·¸ì¸ ê²°ê³¼:&#x27;</span>, event.<span class="hljs-property">data</span>);
    });
};
</code></pre>
<h3 id="5-ë°±ì—”ë“œ-ë¡œê·¸-ëª¨ë‹ˆí„°ë§">5. ë°±ì—”ë“œ ë¡œê·¸ ëª¨ë‹ˆí„°ë§</h3>
<h4 id="51-ì£¼ìš”-ë¡œê·¸-í¬ì¸íŠ¸">5.1 ì£¼ìš” ë¡œê·¸ í¬ì¸íŠ¸</h4>
<pre><code class="language-bash"><span class="hljs-comment"># AuthService ë¡œê·¸ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</span>
<span class="hljs-built_in">tail</span> -f /path/to/authservice.log | grep -E <span class="hljs-string">&quot;(Google|Kakao|Naver|ì†Œì…œ)&quot;</span>

<span class="hljs-comment"># íŠ¹ì • íŒ¨í„´ í•„í„°ë§</span>
<span class="hljs-built_in">tail</span> -f /path/to/authservice.log | grep -E <span class="hljs-string">&quot;(ë¡œê·¸ì¸ ì²˜ë¦¬ ì‹œì‘|ì‚¬ìš©ì ì •ë³´|í† í° ìƒì„±)&quot;</span>
</code></pre>
<h4 id="52-ì—ëŸ¬-ë””ë²„ê¹…">5.2 ì—ëŸ¬ ë””ë²„ê¹…</h4>
<pre><code class="language-bash"><span class="hljs-comment"># í† í° ê²€ì¦ ì‹¤íŒ¨ ë¡œê·¸</span>
grep <span class="hljs-string">&quot;í† í° ê²€ì¦ ì‹¤íŒ¨&quot;</span> /path/to/authservice.log

<span class="hljs-comment"># DB ì—°ê²° ë¬¸ì œ ë¡œê·¸  </span>
grep <span class="hljs-string">&quot;DB ì²˜ë¦¬ ì‹¤íŒ¨&quot;</span> /path/to/authservice.log

<span class="hljs-comment"># JWT í† í° ìƒì„± ì˜¤ë¥˜</span>
grep <span class="hljs-string">&quot;JWT.*ì‹¤íŒ¨&quot;</span> /path/to/authservice.log
</code></pre>
<h3 id="6-api-í…ŒìŠ¤íŠ¸-ìŠ¤í¬ë¦½íŠ¸">6. API í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸</h3>
<h4 id="61-curlì„-ì´ìš©í•œ-api-í…ŒìŠ¤íŠ¸">6.1 cURLì„ ì´ìš©í•œ API í…ŒìŠ¤íŠ¸</h4>
<pre><code class="language-bash"><span class="hljs-comment"># Google ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</span>
curl -X POST http://localhost:8082/api/auth/social/google \
  -H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span> \
  -d <span class="hljs-string">&#x27;{
    &quot;idToken&quot;: &quot;dummy_google_id_token&quot;,
    &quot;deviceInfo&quot;: {
      &quot;platform&quot;: &quot;WEB_BROWSER&quot;,
      &quot;deviceId&quot;: &quot;test-device&quot;
    }
  }&#x27;</span>

<span class="hljs-comment"># ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</span>
curl -X POST http://localhost:8082/api/auth/social/kakao \
  -H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span> \
  -d <span class="hljs-string">&#x27;{
    &quot;accessToken&quot;: &quot;dummy_kakao_access_token&quot;,
    &quot;deviceInfo&quot;: {
      &quot;platform&quot;: &quot;WEB_BROWSER&quot;,
      &quot;deviceId&quot;: &quot;test-device&quot;
    }
  }&#x27;</span>

<span class="hljs-comment"># ë„¤ì´ë²„ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸ (Access Token ë°©ì‹)</span>
curl -X POST http://localhost:8082/api/auth/social/naver \
  -H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span> \
  -d <span class="hljs-string">&#x27;{
    &quot;accessToken&quot;: &quot;dummy_naver_access_token&quot;
  }&#x27;</span>

<span class="hljs-comment"># ì§€ì› í”Œë«í¼ í™•ì¸</span>
curl -X GET http://localhost:8082/api/auth/social/providers

<span class="hljs-comment"># í—¬ìŠ¤ì²´í¬</span>
curl -X GET http://localhost:8082/api/auth/social/health
</code></pre>
<h3 id="7-ì¼ë°˜ì ì¸-ë¬¸ì œ-ë°-í•´ê²°ë°©ë²•">7. ì¼ë°˜ì ì¸ ë¬¸ì œ ë° í•´ê²°ë°©ë²•</h3>
<h4 id="71-ë¬¸ì œ-cors-ì˜¤ë¥˜">7.1 ë¬¸ì œ: CORS ì˜¤ë¥˜</h4>
<pre><code>Access to fetch at 'http://localhost:8082/api/auth/social/google' 
from origin 'null' has been blocked by CORS policy
</code></pre>
<p><strong>ë°±ì—”ë“œ í•´ê²°ë°©ë²•</strong>: SecurityConfigì—ì„œ CORS ì„¤ì • í™•ì¸</p>
<pre><code class="language-java"><span class="hljs-comment">// SecurityConfig.java</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableWebSecurity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SecurityConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> CorsConfigurationSource <span class="hljs-title function_">corsConfigurationSource</span><span class="hljs-params">()</span> {
        <span class="hljs-type">CorsConfiguration</span> <span class="hljs-variable">configuration</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CorsConfiguration</span>();
        configuration.setAllowedOriginPatterns(Arrays.asList(
            <span class="hljs-string">&quot;http://localhost:3011&quot;</span>, 
            <span class="hljs-string">&quot;http://localhost:3010&quot;</span>, 
            <span class="hljs-string">&quot;http://localhost:3000&quot;</span>,  <span class="hljs-comment">// Next.js ê°œë°œ ì„œë²„</span>
            <span class="hljs-string">&quot;file://*&quot;</span>  <span class="hljs-comment">// ë¡œì»¬ HTML íŒŒì¼ í—ˆìš©</span>
        ));
        configuration.setAllowedMethods(Arrays.asList(<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;POST&quot;</span>, <span class="hljs-string">&quot;PUT&quot;</span>, <span class="hljs-string">&quot;DELETE&quot;</span>, <span class="hljs-string">&quot;OPTIONS&quot;</span>));
        configuration.setAllowedHeaders(Arrays.asList(<span class="hljs-string">&quot;*&quot;</span>));
        configuration.setAllowCredentials(<span class="hljs-literal">true</span>);
        
        <span class="hljs-type">UrlBasedCorsConfigurationSource</span> <span class="hljs-variable">source</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UrlBasedCorsConfigurationSource</span>();
        source.registerCorsConfiguration(<span class="hljs-string">&quot;/api/**&quot;</span>, configuration);
        <span class="hljs-keyword">return</span> source;
    }
}
</code></pre>
<p><strong>í”„ë¡ íŠ¸ì—”ë“œ í•´ê²°ë°©ë²•</strong>: ê°œë°œ í™˜ê²½ì—ì„œ í”„ë¡ì‹œ ì„¤ì •</p>
<pre><code class="language-typescript"><span class="hljs-comment">// next.config.js (Next.js)</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">rewrites</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> [
      {
        <span class="hljs-attr">source</span>: <span class="hljs-string">&#x27;/api/auth/:path*&#x27;</span>,
        <span class="hljs-attr">destination</span>: <span class="hljs-string">&#x27;http://localhost:8082/api/auth/:path*&#x27;</span>
      }
    ];
  }
};
</code></pre>
<h4 id="72-ë¬¸ì œ-ë„¤ì´ë²„-íŒì—…-ì°¨ë‹¨">7.2 ë¬¸ì œ: ë„¤ì´ë²„ íŒì—… ì°¨ë‹¨</h4>
<p><strong>í•´ê²°ë°©ë²•</strong>: ë¸Œë¼ìš°ì € íŒì—… í—ˆìš© ì„¤ì • ë˜ëŠ” ì‚¬ìš©ì ì•¡ì…˜ì—ì„œ íŒì—… í˜¸ì¶œ</p>
<h4 id="73-ë¬¸ì œ-jwt-í† í°-ë§Œë£Œ">7.3 ë¬¸ì œ: JWT í† í° ë§Œë£Œ</h4>
<p><strong>ë°±ì—”ë“œ í•´ê²°ë°©ë²•</strong>: RefreshTokenì„ ì´ìš©í•œ í† í° ê°±ì‹  ë¡œì§ êµ¬í˜„</p>
<pre><code class="language-java"><span class="hljs-comment">// JwtTokenProvider.java</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtTokenProvider</span> {
    
    <span class="hljs-meta">@Value(&quot;${jwt.access-token-expiry:3600}&quot;)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> accessTokenExpiry;
    
    <span class="hljs-meta">@Value(&quot;${jwt.refresh-token-expiry:86400}&quot;)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> refreshTokenExpiry;
    
    <span class="hljs-keyword">public</span> TokenResponse <span class="hljs-title function_">refreshAccessToken</span><span class="hljs-params">(String refreshToken)</span> {
        <span class="hljs-keyword">if</span> (validateToken(refreshToken)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> getUserIdFromToken(refreshToken);
            <span class="hljs-type">String</span> <span class="hljs-variable">newAccessToken</span> <span class="hljs-operator">=</span> generateAccessToken(userId);
            
            <span class="hljs-keyword">return</span> TokenResponse.builder()
                    .accessToken(newAccessToken)
                    .refreshToken(refreshToken)  <span class="hljs-comment">// RefreshTokenì€ ì¬ì‚¬ìš©</span>
                    .tokenType(<span class="hljs-string">&quot;Bearer&quot;</span>)
                    .expiresIn(accessTokenExpiry)
                    .build();
        }
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InvalidTokenException</span>(<span class="hljs-string">&quot;Invalid refresh token&quot;</span>);
    }
}
</code></pre>
<h3 id="1-ë¡œì»¬-í…ŒìŠ¤íŠ¸-í™˜ê²½-ì„¤ì •">1. ë¡œì»¬ í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •</h3>
<h4 id="11-ê°œë°œ-í™˜ê²½-ì¤€ë¹„">1.1 ê°œë°œ í™˜ê²½ ì¤€ë¹„</h4>
<pre><code class="language-bash"><span class="hljs-comment"># AuthService ì‹¤í–‰</span>
<span class="hljs-built_in">cd</span> /Users/sangyonghan/development/Amano/akc-b2c/AuthService
./gradlew bootRun

<span class="hljs-comment"># í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì„œë²„ ì‹¤í–‰ (Next.js ì˜ˆì‹œ)</span>
<span class="hljs-built_in">cd</span> /path/to/frontend
npm run dev
</code></pre>
<h4 id="12-í™˜ê²½ë³„-ì„¤ì •">1.2 í™˜ê²½ë³„ ì„¤ì •</h4>
<pre><code class="language-typescript"><span class="hljs-comment">// config/social-config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getSocialConfig</span> = (<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">const</span> environment = process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span>;
  
  <span class="hljs-keyword">const</span> configs = {
    <span class="hljs-attr">development</span>: {
      <span class="hljs-attr">authServiceUrl</span>: <span class="hljs-string">&#x27;http://localhost:8082&#x27;</span>,
      <span class="hljs-attr">googleClientId</span>: <span class="hljs-string">&#x27;YOUR_GOOGLE_CLIENT_ID&#x27;</span>,
      <span class="hljs-attr">kakaoJsKey</span>: <span class="hljs-string">&#x27;YOUR_KAKAO_JAVASCRIPT_KEY&#x27;</span>,
      <span class="hljs-attr">enableDevMode</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">enableConsoleLogging</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">staging</span>: {
      <span class="hljs-attr">authServiceUrl</span>: <span class="hljs-string">&#x27;https://staging-auth.example.com&#x27;</span>,
      <span class="hljs-attr">googleClientId</span>: <span class="hljs-string">&#x27;YOUR_STAGING_GOOGLE_CLIENT_ID&#x27;</span>,
      <span class="hljs-attr">kakaoJsKey</span>: <span class="hljs-string">&#x27;YOUR_STAGING_KAKAO_JS_KEY&#x27;</span>,
      <span class="hljs-attr">enableDevMode</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">enableConsoleLogging</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">production</span>: {
      <span class="hljs-attr">authServiceUrl</span>: <span class="hljs-string">&#x27;https://auth.example.com&#x27;</span>,
      <span class="hljs-attr">googleClientId</span>: <span class="hljs-string">&#x27;YOUR_PROD_GOOGLE_CLIENT_ID&#x27;</span>,
      <span class="hljs-attr">kakaoJsKey</span>: <span class="hljs-string">&#x27;YOUR_PROD_KAKAO_JS_KEY&#x27;</span>,
      <span class="hljs-attr">enableDevMode</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">enableConsoleLogging</span>: <span class="hljs-literal">false</span>
    }
  };

  <span class="hljs-keyword">return</span> configs[environment <span class="hljs-keyword">as</span> keyof <span class="hljs-keyword">typeof</span> configs] || configs.<span class="hljs-property">development</span>;
};
</code></pre>
<h4 id="21-google-ë¡œê·¸ì¸-ë””ë²„ê¹…">2.1 Google ë¡œê·¸ì¸ ë””ë²„ê¹…</h4>
<pre><code class="language-typescript"><span class="hljs-comment">// utils/googleDebugger.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> debugGoogleLogin = {
  <span class="hljs-comment">// Google SDK ìƒíƒœ í™•ì¸</span>
  <span class="hljs-attr">checkSDKStatus</span>: <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Google SDK ìƒíƒœ:&#x27;</span>, {
      <span class="hljs-attr">sdkLoaded</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">google</span> !== <span class="hljs-string">&#x27;undefined&#x27;</span>,
      <span class="hljs-attr">accountsAvailable</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">google</span>?.<span class="hljs-property">accounts</span> !== <span class="hljs-string">&#x27;undefined&#x27;</span>,
      <span class="hljs-attr">idAvailable</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">google</span>?.<span class="hljs-property">accounts</span>?.<span class="hljs-property">id</span> !== <span class="hljs-string">&#x27;undefined&#x27;</span>
    });
  },

  <span class="hljs-comment">// ID Token ë””ì½”ë”© (ê°œë°œ í™˜ê²½ì—ì„œë§Œ)</span>
  <span class="hljs-attr">decodeIdToken</span>: <span class="hljs-function">(<span class="hljs-params">idToken: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> !== <span class="hljs-string">&#x27;development&#x27;</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> payload = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title function_">atob</span>(idToken.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;.&#x27;</span>)[<span class="hljs-number">1</span>]));
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Google ID Token í˜ì´ë¡œë“œ:&#x27;</span>, {
        <span class="hljs-attr">iss</span>: payload.<span class="hljs-property">iss</span>,
        <span class="hljs-attr">aud</span>: payload.<span class="hljs-property">aud</span>,
        <span class="hljs-attr">sub</span>: payload.<span class="hljs-property">sub</span>,
        <span class="hljs-attr">email</span>: payload.<span class="hljs-property">email</span>,
        <span class="hljs-attr">email_verified</span>: payload.<span class="hljs-property">email_verified</span>,
        <span class="hljs-attr">exp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(payload.<span class="hljs-property">exp</span> * <span class="hljs-number">1000</span>),
        <span class="hljs-attr">iat</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(payload.<span class="hljs-property">iat</span> * <span class="hljs-number">1000</span>)
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;ID Token ë””ì½”ë”© ì‹¤íŒ¨:&#x27;</span>, error);
    }
  },

  <span class="hljs-comment">// ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ë¡œê¹…</span>
  <span class="hljs-attr">logNetworkRequest</span>: <span class="hljs-keyword">async</span> (<span class="hljs-attr">idToken</span>: <span class="hljs-built_in">string</span>) =&gt; {
    <span class="hljs-keyword">const</span> startTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Google API ìš”ì²­ ì‹œì‘:&#x27;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>());
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/auth/social/google&#x27;</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
        <span class="hljs-attr">headers</span>: { <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span> },
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ idToken })
      });
      
      <span class="hljs-keyword">const</span> endTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Google API ì‘ë‹µ:&#x27;</span>, {
        <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,
        <span class="hljs-attr">statusText</span>: response.<span class="hljs-property">statusText</span>,
        <span class="hljs-attr">duration</span>: <span class="hljs-string">`<span class="hljs-subst">${endTime - startTime}</span>ms`</span>,
        <span class="hljs-attr">headers</span>: <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">entries</span>())
      });
      
      <span class="hljs-keyword">return</span> response;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Google API ìš”ì²­ ì‹¤íŒ¨:&#x27;</span>, error);
      <span class="hljs-keyword">throw</span> error;
    }
  }
};
</code></pre>
<h4 id="22-ì¹´ì¹´ì˜¤-ë¡œê·¸ì¸-ë””ë²„ê¹…">2.2 ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ë””ë²„ê¹…</h4>
<pre><code class="language-typescript"><span class="hljs-comment">// utils/kakaoDebugger.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> debugKakaoLogin = {
  <span class="hljs-comment">// Kakao SDK ìƒíƒœ í™•ì¸</span>
  <span class="hljs-attr">checkSDKStatus</span>: <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Kakao SDK ìƒíƒœ:&#x27;</span>, {
      <span class="hljs-attr">sdkLoaded</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">Kakao</span> !== <span class="hljs-string">&#x27;undefined&#x27;</span>,
      <span class="hljs-attr">initialized</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Kakao</span>?.<span class="hljs-title function_">isInitialized</span>(),
      <span class="hljs-attr">version</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Kakao</span>?.<span class="hljs-property">VERSION</span>
    });
  },

  <span class="hljs-comment">// ì•¡ì„¸ìŠ¤ í† í° ì •ë³´ í™•ì¸</span>
  <span class="hljs-attr">checkAccessToken</span>: <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">Kakao</span>?.<span class="hljs-property">Auth</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">const</span> accessToken = <span class="hljs-variable language_">window</span>.<span class="hljs-property">Kakao</span>.<span class="hljs-property">Auth</span>.<span class="hljs-title function_">getAccessToken</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Kakao Access Token:&#x27;</span>, {
      <span class="hljs-attr">hasToken</span>: !!accessToken,
      <span class="hljs-attr">tokenLength</span>: accessToken?.<span class="hljs-property">length</span>,
      <span class="hljs-attr">tokenPreview</span>: accessToken ? <span class="hljs-string">`<span class="hljs-subst">${accessToken.substring(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)}</span>...`</span> : <span class="hljs-literal">null</span>
    });
  },

  <span class="hljs-comment">// ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸</span>
  <span class="hljs-attr">checkLoginStatus</span>: <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">Kakao</span>?.<span class="hljs-property">Auth</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">Kakao</span>.<span class="hljs-property">Auth</span>.<span class="hljs-title function_">getStatusInfo</span>(<span class="hljs-function">(<span class="hljs-params">statusInfo: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Kakao ë¡œê·¸ì¸ ìƒíƒœ:&#x27;</span>, statusInfo);
    });
  }
};
</code></pre>
<h4 id="23-ë„¤ì´ë²„-ë¡œê·¸ì¸-ë””ë²„ê¹…">2.3 ë„¤ì´ë²„ ë¡œê·¸ì¸ ë””ë²„ê¹…</h4>
<pre><code class="language-typescript"><span class="hljs-comment">// utils/naverDebugger.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> debugNaverLogin = {
  <span class="hljs-comment">// íŒì—… ìƒíƒœ ëª¨ë‹ˆí„°ë§</span>
  <span class="hljs-attr">monitorPopup</span>: <span class="hljs-function">(<span class="hljs-params">popup: Window</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> checkInterval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (popup.<span class="hljs-property">closed</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;ë„¤ì´ë²„ íŒì—…ì´ ë‹«í˜”ìŠµë‹ˆë‹¤.&#x27;</span>);
        <span class="hljs-built_in">clearInterval</span>(checkInterval);
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;íŒì—… URL:&#x27;</span>, popup.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-comment">// Cross-origin ì˜¤ë¥˜ëŠ” ì •ìƒ (ë‹¤ë¥¸ ë„ë©”ì¸ìœ¼ë¡œ ì´ë™ ì¤‘)</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;íŒì—…ì´ ë„¤ì´ë²„ ë„ë©”ì¸ìœ¼ë¡œ ì´ë™ ì¤‘...&#x27;</span>);
      }
    }, <span class="hljs-number">1000</span>);
    
    <span class="hljs-comment">// 30ì´ˆ í›„ ëª¨ë‹ˆí„°ë§ ì¤‘ë‹¨</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(checkInterval), <span class="hljs-number">30000</span>);
  },

  <span class="hljs-comment">// ë©”ì‹œì§€ ì´ë²¤íŠ¸ ë¡œê¹…</span>
  <span class="hljs-attr">logPopupMessages</span>: <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> originalAddEventListener = <span class="hljs-variable language_">window</span>.<span class="hljs-property">addEventListener</span>;
    
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">addEventListener</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-keyword">type</span>, listener, options</span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">&#x27;message&#x27;</span>) {
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">wrappedListener</span> = (<span class="hljs-params">event: MessageEvent</span>) =&gt; {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;íŒì—… ë©”ì‹œì§€ ìˆ˜ì‹ :&#x27;</span>, {
            <span class="hljs-attr">origin</span>: event.<span class="hljs-property">origin</span>,
            <span class="hljs-attr">data</span>: event.<span class="hljs-property">data</span>,
            <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
          });
          
          <span class="hljs-keyword">return</span> listener.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, event);
        };
        
        <span class="hljs-keyword">return</span> originalAddEventListener.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-keyword">type</span>, wrappedListener, options);
      }
      
      <span class="hljs-keyword">return</span> originalAddEventListener.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-keyword">type</span>, listener, options);
    };
  }
};
</code></pre>
<h3 id="3-ì¼ë°˜ì ì¸-ë¬¸ì œ-ë°-í•´ê²°ë°©ë²•">3. ì¼ë°˜ì ì¸ ë¬¸ì œ ë° í•´ê²°ë°©ë²•</h3>
<h4 id="31-cors-ì˜¤ë¥˜">3.1 CORS ì˜¤ë¥˜</h4>
<p><strong>ë¬¸ì œ:</strong></p>
<pre><code>Access to fetch at 'http://localhost:8082/api/auth/social/google' 
from origin 'http://localhost:3000' has been blocked by CORS policy
</code></pre>
<p><strong>í•´ê²°ë°©ë²•:</strong></p>
<pre><code class="language-typescript"><span class="hljs-comment">// ê°œë°œ í™˜ê²½ì—ì„œ í”„ë¡ì‹œ ì„¤ì • (Next.js)</span>
<span class="hljs-comment">// next.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">rewrites</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> [
      {
        <span class="hljs-attr">source</span>: <span class="hljs-string">&#x27;/api/auth/:path*&#x27;</span>,
        <span class="hljs-attr">destination</span>: <span class="hljs-string">&#x27;http://localhost:8082/api/auth/:path*&#x27;</span>
      }
    ];
  }
};

<span class="hljs-comment">// ë˜ëŠ” ë°±ì—”ë“œ CORS ì„¤ì • í™•ì¸</span>
<span class="hljs-comment">// SecurityConfig.javaì—ì„œ allowedOrigins í™•ì¸</span>
</code></pre>
<h4 id="32-sdk-ë¡œë”©-ì‹¤íŒ¨">3.2 SDK ë¡œë”© ì‹¤íŒ¨</h4>
<p><strong>ë¬¸ì œ:</strong> Google GSI ë˜ëŠ” Kakao SDKê°€ ë¡œë“œë˜ì§€ ì•ŠìŒ</p>
<p><strong>í•´ê²°ë°©ë²•:</strong></p>
<pre><code class="language-typescript"><span class="hljs-comment">// SDK ë¡œë”© ì¬ì‹œë„ ë¡œì§</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadSDKWithRetry</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">url: <span class="hljs-built_in">string</span>, checkFn: () =&gt; <span class="hljs-built_in">boolean</span>, maxRetries = <span class="hljs-number">3</span></span>) =&gt; {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; maxRetries; i++) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">loadScript</span>(url);
      
      <span class="hljs-comment">// SDK ë¡œë“œ í™•ì¸ì„ ìœ„í•´ ì ì‹œ ëŒ€ê¸°</span>
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>));
      
      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">checkFn</span>()) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`SDK ë¡œë“œ ì„±ê³µ (<span class="hljs-subst">${i + <span class="hljs-number">1</span>}</span>ë²ˆì§¸ ì‹œë„)`</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`SDK ë¡œë“œ ì‹¤íŒ¨ (<span class="hljs-subst">${i + <span class="hljs-number">1</span>}</span>ë²ˆì§¸ ì‹œë„):`</span>, error);
    }
    
    <span class="hljs-keyword">if</span> (i &lt; maxRetries - <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">2000</span>)); <span class="hljs-comment">// 2ì´ˆ ëŒ€ê¸°</span>
    }
  }
  
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;SDK ë¡œë“œ ìµœëŒ€ ì¬ì‹œë„ íšŸìˆ˜ ì´ˆê³¼&#x27;</span>);
};

<span class="hljs-comment">// ì‚¬ìš© ì˜ˆì‹œ</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">loadSDKWithRetry</span>(
    <span class="hljs-string">&#x27;https://accounts.google.com/gsi/client&#x27;</span>,
    <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">google</span>?.<span class="hljs-property">accounts</span>?.<span class="hljs-property">id</span> !== <span class="hljs-string">&#x27;undefined&#x27;</span>
  );
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-comment">// Fallback UI í‘œì‹œ ë˜ëŠ” ëŒ€ì²´ ë¡œê·¸ì¸ ë°©ë²• ì œê³µ</span>
  <span class="hljs-title function_">showFallbackLoginOptions</span>();
}
</code></pre>
<h4 id="33-íŒì—…-ì°¨ë‹¨-ë¬¸ì œ">3.3 íŒì—… ì°¨ë‹¨ ë¬¸ì œ</h4>
<p><strong>ë¬¸ì œ:</strong> ë¸Œë¼ìš°ì €ì—ì„œ ë„¤ì´ë²„ ë¡œê·¸ì¸ íŒì—…ì´ ì°¨ë‹¨ë¨</p>
<p><strong>í•´ê²°ë°©ë²•:</strong></p>
<pre><code class="language-typescript"><span class="hljs-comment">// ì‚¬ìš©ì ì¸í„°ë™ì…˜ ê¸°ë°˜ íŒì—… ì—´ê¸°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">openPopupWithFallback</span> = (<span class="hljs-params">url: <span class="hljs-built_in">string</span>, name: <span class="hljs-built_in">string</span>, features: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> popup = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(url, name, features);
  
  <span class="hljs-keyword">if</span> (!popup || popup.<span class="hljs-property">closed</span>) {
    <span class="hljs-comment">// íŒì—…ì´ ì°¨ë‹¨ëœ ê²½ìš° ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼</span>
    <span class="hljs-keyword">const</span> userConfirmed = <span class="hljs-title function_">confirm</span>(
      <span class="hljs-string">&#x27;íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ íŒì—…ì„ í—ˆìš©í•˜ê³  ë‹¤ì‹œ ì‹œë„í•˜ì‹œê² ìŠµë‹ˆê¹Œ?&#x27;</span>
    );
    
    <span class="hljs-keyword">if</span> (userConfirmed) {
      <span class="hljs-comment">// ìƒˆ ì°½ìœ¼ë¡œ ì§ì ‘ ì´ë™</span>
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = url;
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
  
  <span class="hljs-keyword">return</span> popup;
};
</code></pre>
<h4 id="34-ë„¤íŠ¸ì›Œí¬-íƒ€ì„ì•„ì›ƒ">3.4 ë„¤íŠ¸ì›Œí¬ íƒ€ì„ì•„ì›ƒ</h4>
<p><strong>ë¬¸ì œ:</strong> API ìš”ì²­ì´ ë„ˆë¬´ ì˜¤ë˜ ê±¸ë¦¬ê±°ë‚˜ ì‘ë‹µí•˜ì§€ ì•ŠìŒ</p>
<p><strong>í•´ê²°ë°©ë²•:</strong></p>
<pre><code class="language-typescript"><span class="hljs-comment">// íƒ€ì„ì•„ì›ƒì´ ìˆëŠ” fetch ë˜í¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchWithTimeout</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">url: <span class="hljs-built_in">string</span>, options: RequestInit, timeout = <span class="hljs-number">10000</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
  <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> controller.<span class="hljs-title function_">abort</span>(), timeout);
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, {
      ...options,
      <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span>
    });
    
    <span class="hljs-built_in">clearTimeout</span>(timeoutId);
    <span class="hljs-keyword">return</span> response;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-built_in">clearTimeout</span>(timeoutId);
    
    <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span> &amp;&amp; error.<span class="hljs-property">name</span> === <span class="hljs-string">&#x27;AbortError&#x27;</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`ìš”ì²­ ì‹œê°„ ì´ˆê³¼ (<span class="hljs-subst">${timeout}</span>ms)`</span>);
    }
    
    <span class="hljs-keyword">throw</span> error;
  }
};
</code></pre>
<h3 id="4-ë¡œê¹…-ë°-ëª¨ë‹ˆí„°ë§">4. ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§</h3>
<h4 id="41-êµ¬ì¡°í™”ëœ-ë¡œê¹…">4.1 êµ¬ì¡°í™”ëœ ë¡œê¹…</h4>
<pre><code class="language-typescript"><span class="hljs-comment">// utils/logger.ts</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">LogEvent</span> {
  <span class="hljs-attr">level</span>: <span class="hljs-string">&#x27;debug&#x27;</span> | <span class="hljs-string">&#x27;info&#x27;</span> | <span class="hljs-string">&#x27;warn&#x27;</span> | <span class="hljs-string">&#x27;error&#x27;</span>;
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>;
  context?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;;
  timestamp?: <span class="hljs-built_in">string</span>;
  provider?: <span class="hljs-built_in">string</span>;
  userId?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SocialLoginLogger</span> {
  <span class="hljs-keyword">private</span> isDevelopment = process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&#x27;development&#x27;</span>;
  
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">event: LogEvent</span>) {
    <span class="hljs-keyword">const</span> logEntry = {
      ...event,
      <span class="hljs-attr">timestamp</span>: event.<span class="hljs-property">timestamp</span> || <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
      <span class="hljs-attr">userAgent</span>: navigator.<span class="hljs-property">userAgent</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>
    };
    
    <span class="hljs-comment">// ê°œë°œ í™˜ê²½ì—ì„œëŠ” ì½˜ì†”ì— ì¶œë ¥</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isDevelopment</span>) {
      <span class="hljs-variable language_">console</span>[event.<span class="hljs-property">level</span>](event.<span class="hljs-property">message</span>, logEntry);
    }
    
    <span class="hljs-comment">// í”„ë¡œë•ì…˜ì—ì„œëŠ” ë¡œê·¸ ìˆ˜ì§‘ ì„œë¹„ìŠ¤ë¡œ ì „ì†¡</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isDevelopment</span> &amp;&amp; event.<span class="hljs-property">level</span> !== <span class="hljs-string">&#x27;debug&#x27;</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendToLogService</span>(logEntry);
    }
  }
  
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">sendToLogService</span>(<span class="hljs-params">logEntry: LogEvent</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/logs&#x27;</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
        <span class="hljs-attr">headers</span>: { <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span> },
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(logEntry)
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// ë¡œê·¸ ì „ì†¡ ì‹¤íŒ¨ëŠ” ì¡°ìš©íˆ ì²˜ë¦¬</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&#x27;ë¡œê·¸ ì „ì†¡ ì‹¤íŒ¨:&#x27;</span>, error);
    }
  }
  
  <span class="hljs-title function_">debug</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span>, context?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">log</span>({ <span class="hljs-attr">level</span>: <span class="hljs-string">&#x27;debug&#x27;</span>, message, context });
  }
  
  <span class="hljs-title function_">info</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span>, context?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">log</span>({ <span class="hljs-attr">level</span>: <span class="hljs-string">&#x27;info&#x27;</span>, message, context });
  }
  
  <span class="hljs-title function_">warn</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span>, context?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">log</span>({ <span class="hljs-attr">level</span>: <span class="hljs-string">&#x27;warn&#x27;</span>, message, context });
  }
  
  <span class="hljs-title function_">error</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span>, context?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">log</span>({ <span class="hljs-attr">level</span>: <span class="hljs-string">&#x27;error&#x27;</span>, message, context });
  }
  
  <span class="hljs-title function_">socialLoginStart</span>(<span class="hljs-params">provider: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`<span class="hljs-subst">${provider}</span> ë¡œê·¸ì¸ ì‹œì‘`</span>, { provider });
  }
  
  <span class="hljs-title function_">socialLoginSuccess</span>(<span class="hljs-params">provider: <span class="hljs-built_in">string</span>, isNewUser: <span class="hljs-built_in">boolean</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`<span class="hljs-subst">${provider}</span> ë¡œê·¸ì¸ ì„±ê³µ`</span>, { provider, isNewUser });
  }
  
  <span class="hljs-title function_">socialLoginError</span>(<span class="hljs-params">provider: <span class="hljs-built_in">string</span>, error: <span class="hljs-built_in">Error</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`<span class="hljs-subst">${provider}</span> ë¡œê·¸ì¸ ì‹¤íŒ¨`</span>, {
      provider,
      <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span>,
      <span class="hljs-attr">stack</span>: error.<span class="hljs-property">stack</span>
    });
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> logger = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SocialLoginLogger</span>();
</code></pre>
<h4 id="42-ì„±ëŠ¥-ëª¨ë‹ˆí„°ë§">4.2 ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§</h4>
<pre><code class="language-typescript"><span class="hljs-comment">// utils/performanceMonitor.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> performanceMonitor = {
  <span class="hljs-attr">measureSocialLogin</span>: <span class="hljs-function">(<span class="hljs-params">provider: <span class="hljs-built_in">string</span>, operation: () =&gt; <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> startTimestamp = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    
    logger.<span class="hljs-title function_">debug</span>(<span class="hljs-string">`<span class="hljs-subst">${provider}</span> ì„±ëŠ¥ ì¸¡ì • ì‹œì‘`</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">operation</span>().<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> duration = performance.<span class="hljs-title function_">now</span>() - startTime;
      <span class="hljs-keyword">const</span> endTimestamp = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      
      logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">`<span class="hljs-subst">${provider}</span> ì„±ëŠ¥ ì¸¡ì • ì™„ë£Œ`</span>, {
        provider,
        <span class="hljs-attr">duration</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(duration),
        startTimestamp,
        endTimestamp
      });
      
      <span class="hljs-comment">// ì„±ëŠ¥ ì„ê³„ê°’ í™•ì¸ (5ì´ˆ ì´ìƒì´ë©´ ê²½ê³ )</span>
      <span class="hljs-keyword">if</span> (duration &gt; <span class="hljs-number">5000</span>) {
        logger.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`<span class="hljs-subst">${provider}</span> ë¡œê·¸ì¸ì´ ì˜ˆìƒë³´ë‹¤ ì˜¤ë˜ ê±¸ë¦¼`</span>, {
          provider,
          <span class="hljs-attr">duration</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(duration)
        });
      }
    });
  }
};
</code></pre>
<hr>
<h2 id="-í•µì‹¬-íŠ¹ì§•-ìš”ì•½">ğŸ¯ í•µì‹¬ íŠ¹ì§• ìš”ì•½</h2>
<h3 id="í†µí•©-ì¸ì¦-ì‹œìŠ¤í…œì˜-ì¥ì ">í†µí•© ì¸ì¦ ì‹œìŠ¤í…œì˜ ì¥ì </h3>
<ol>
<li><strong>ì¼ê´€ëœ ì‚¬ìš©ì ê²½í—˜</strong>: ëª¨ë“  ì†Œì…œ í”Œë«í¼ì—ì„œ ë™ì¼í•œ í”Œë¡œìš°</li>
<li><strong>ìë™ ê³„ì • ì—°ê²°</strong>: ê°™ì€ ì´ë©”ì¼ë¡œ ì—¬ëŸ¬ ì†Œì…œ ê³„ì • í†µí•© ê´€ë¦¬</li>
<li><strong>ìœ ì—°í•œ íšŒì›ê°€ì…</strong>: í•„ìš”ì‹œì—ë§Œ ì¶”ê°€ ì •ë³´ ìˆ˜ì§‘</li>
<li><strong>ê°œë°œì ì¹œí™”ì </strong>: ê°œë°œ ëª¨ë“œ ì§€ì›ìœ¼ë¡œ ì‰¬ìš´ í…ŒìŠ¤íŠ¸</li>
</ol>
<h3 id="6-ë³´ì•ˆ-ë°-ëª¨ë²”-ì‚¬ë¡€-ê°€ì´ë“œ">6. ë³´ì•ˆ ë° ëª¨ë²” ì‚¬ë¡€ ê°€ì´ë“œ</h3>
<h4 id="61-í”„ë¡ íŠ¸ì—”ë“œ-ë³´ì•ˆ-ê³ ë ¤ì‚¬í•­">6.1 í”„ë¡ íŠ¸ì—”ë“œ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­</h4>
<p><strong>í† í° ì €ì¥ ë°©ì‹:</strong></p>
<pre><code class="language-typescript"><span class="hljs-comment">// ë³´ì•ˆ ë“±ê¸‰ë³„ í† í° ì €ì¥ ë°©ë²•</span>

<span class="hljs-comment">// 1. ìµœê³  ë³´ì•ˆ (ê¶Œì¥) - httpOnly ì¿ í‚¤</span>
<span class="hljs-comment">// ë°±ì—”ë“œì—ì„œ Set-Cookie í—¤ë”ë¡œ ì„¤ì •</span>
<span class="hljs-comment">// í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” ì ‘ê·¼ ë¶ˆê°€ëŠ¥í•˜ì§€ë§Œ ìë™ìœ¼ë¡œ ìš”ì²­ì— í¬í•¨</span>

<span class="hljs-comment">// 2. ë†’ì€ ë³´ì•ˆ - Secure Storage (ëª¨ë°”ì¼)</span>
<span class="hljs-comment">// React Nativeì˜ Keychain (iOS) / KeyStore (Android)</span>

<span class="hljs-comment">// 3. ì¤‘ê°„ ë³´ì•ˆ - sessionStorage (ì›¹)</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">storeTokenSecurely</span> = (<span class="hljs-params">accessToken: <span class="hljs-built_in">string</span>, refreshToken: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-comment">// ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ëŠ” íƒ­ ë‹«íˆë©´ ìë™ ì‚­ì œ</span>
  sessionStorage.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;accessToken&#x27;</span>, accessToken);
  sessionStorage.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;refreshToken&#x27;</span>, refreshToken);
  
  <span class="hljs-comment">// í† í° ë§Œë£Œ ì‹œê°„ ì €ì¥</span>
  <span class="hljs-keyword">const</span> expiresAt = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + (<span class="hljs-number">3600</span> * <span class="hljs-number">1000</span>); <span class="hljs-comment">// 1ì‹œê°„</span>
  sessionStorage.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;tokenExpiresAt&#x27;</span>, expiresAt.<span class="hljs-title function_">toString</span>());
};

<span class="hljs-comment">// 4. ë‚®ì€ ë³´ì•ˆ - localStorage (ê°œë°œ í™˜ê²½ì—ë§Œ ì‚¬ìš©)</span>
<span class="hljs-comment">// í”„ë¡œë•ì…˜ì—ì„œëŠ” ì‚¬ìš© ê¸ˆì§€</span>
<span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&#x27;development&#x27;</span>) {
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;accessToken&#x27;</span>, accessToken);
}
</code></pre>
<p><strong>CSRF ë°©ì§€:</strong></p>
<pre><code class="language-typescript"><span class="hljs-comment">// CSRF í† í° ì²˜ë¦¬</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> apiClient = {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">request</span>(<span class="hljs-params">url: <span class="hljs-built_in">string</span>, options: RequestInit = {}</span>) {
    <span class="hljs-comment">// CSRF í† í°ì„ í—¤ë”ì— ì¶”ê°€</span>
    <span class="hljs-keyword">const</span> csrfToken = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;meta[name=&quot;csrf-token&quot;]&#x27;</span>)?.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&#x27;content&#x27;</span>);
    
    <span class="hljs-keyword">const</span> <span class="hljs-attr">defaultOptions</span>: <span class="hljs-title class_">RequestInit</span> = {
      <span class="hljs-attr">credentials</span>: <span class="hljs-string">&#x27;include&#x27;</span>, <span class="hljs-comment">// ì¿ í‚¤ ìë™ í¬í•¨</span>
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>,
        <span class="hljs-string">&#x27;X-Requested-With&#x27;</span>: <span class="hljs-string">&#x27;XMLHttpRequest&#x27;</span>, <span class="hljs-comment">// CSRF ë°©ì§€</span>
        ...(csrfToken &amp;&amp; { <span class="hljs-string">&#x27;X-CSRF-Token&#x27;</span>: csrfToken }),
        ...options.<span class="hljs-property">headers</span>
      }
    };

    <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(url, { ...defaultOptions, ...options });
  }
};
</code></pre>
<p><strong>ê°œì¸ì •ë³´ ë³´í˜¸:</strong></p>
<pre><code class="language-typescript"><span class="hljs-comment">// ë¯¼ê°í•œ ì •ë³´ ë¡œê¹… ë°©ì§€</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">sanitizeUserInfo</span> = (<span class="hljs-params">userInfo: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> { email, phone, ...safeInfo } = userInfo;
  
  <span class="hljs-keyword">return</span> {
    ...safeInfo,
    <span class="hljs-attr">email</span>: email ? <span class="hljs-string">`<span class="hljs-subst">${email.substring(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>)}</span>***@<span class="hljs-subst">${email.split(<span class="hljs-string">&#x27;@&#x27;</span>)[<span class="hljs-number">1</span>]}</span>`</span> : <span class="hljs-literal">undefined</span>,
    <span class="hljs-attr">phone</span>: phone ? <span class="hljs-string">`<span class="hljs-subst">${phone.substring(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>)}</span>****<span class="hljs-subst">${phone.substring(<span class="hljs-number">7</span>)}</span>`</span> : <span class="hljs-literal">undefined</span>
  };
};

<span class="hljs-comment">// ê°œë°œ í™˜ê²½ì—ì„œë§Œ ìƒì„¸ ë¡œê·¸</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">logSocialLogin</span> = (<span class="hljs-params">provider: <span class="hljs-built_in">string</span>, userInfo: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&#x27;development&#x27;</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${provider}</span> ë¡œê·¸ì¸:`</span>, <span class="hljs-title function_">sanitizeUserInfo</span>(userInfo));
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// í”„ë¡œë•ì…˜ì—ì„œëŠ” ìµœì†Œí•œì˜ ë¡œê·¸ë§Œ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${provider}</span> ë¡œê·¸ì¸ ì„±ê³µ`</span>);
  }
};
</code></pre>
<h4 id="62-ì—ëŸ¬-ì²˜ë¦¬-ë°-ì‚¬ìš©ì-í”„ë¼ì´ë²„ì‹œ">6.2 ì—ëŸ¬ ì²˜ë¦¬ ë° ì‚¬ìš©ì í”„ë¼ì´ë²„ì‹œ</h4>
<pre><code class="language-typescript"><span class="hljs-comment">// ë³´ì•ˆì„ ê³ ë ¤í•œ ì—ëŸ¬ ë©”ì‹œì§€</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getSecureErrorMessage</span> = (<span class="hljs-params">error: <span class="hljs-built_in">any</span>, provider: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-comment">// ë‚´ë¶€ ì˜¤ë¥˜ ì •ë³´ëŠ” ìˆ¨ê¸°ê³  ì‚¬ìš©ì ì¹œí™”ì ì¸ ë©”ì‹œì§€ë§Œ í‘œì‹œ</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">publicErrors</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {
    <span class="hljs-string">&#x27;INVALID_TOKEN&#x27;</span>: <span class="hljs-string">&#x27;ë¡œê·¸ì¸ ì •ë³´ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.&#x27;</span>,
    <span class="hljs-string">&#x27;EXPIRED_TOKEN&#x27;</span>: <span class="hljs-string">&#x27;ë¡œê·¸ì¸ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.&#x27;</span>,
    <span class="hljs-string">&#x27;NETWORK_ERROR&#x27;</span>: <span class="hljs-string">&#x27;ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.&#x27;</span>,
    <span class="hljs-string">&#x27;POPUP_BLOCKED&#x27;</span>: <span class="hljs-string">&#x27;íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.&#x27;</span>,
    <span class="hljs-string">&#x27;USER_DENIED&#x27;</span>: <span class="hljs-string">&#x27;ë¡œê·¸ì¸ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.&#x27;</span>,
    <span class="hljs-string">&#x27;SERVER_ERROR&#x27;</span>: <span class="hljs-string">&#x27;ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.&#x27;</span>
  };

  <span class="hljs-keyword">const</span> errorCode = error.<span class="hljs-property">code</span> || <span class="hljs-string">&#x27;UNKNOWN_ERROR&#x27;</span>;
  
  <span class="hljs-comment">// ê°œë°œ í™˜ê²½ì—ì„œëŠ” ìƒì„¸ ì˜¤ë¥˜ ì •ë³´ ë¡œê·¸</span>
  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&#x27;development&#x27;</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`<span class="hljs-subst">${provider}</span> ìƒì„¸ ì˜¤ë¥˜:`</span>, error);
  }

  <span class="hljs-keyword">return</span> publicErrors[errorCode] || <span class="hljs-string">&#x27;ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.&#x27;</span>;
};
</code></pre>
<h4 id="63-content-security-policy-csp-ì„¤ì •">6.3 Content Security Policy (CSP) ì„¤ì •</h4>
<pre><code class="language-html"><span class="hljs-comment">&lt;!-- Next.jsì˜ ê²½ìš° next.config.jsì—ì„œ ì„¤ì • --&gt;</span>
<span class="hljs-comment">&lt;!-- ë˜ëŠ” HTML í—¤ë”ì—ì„œ ì„¤ì • --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Security-Policy&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;
  default-src &#x27;self&#x27;;
  script-src &#x27;self&#x27; 
    https://accounts.google.com 
    https://t1.kakaocdn.net 
    https://developers.kakao.com
    &#x27;unsafe-inline&#x27;;
  connect-src &#x27;self&#x27; 
    https://accounts.google.com 
    https://kapi.kakao.com 
    https://openapi.naver.com 
    http://localhost:8082;
  img-src &#x27;self&#x27; 
    https://*.googleusercontent.com 
    https://*.kakaocdn.net 
    https://*.pstatic.net 
    data:;
  style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27;;
  frame-src &#x27;self&#x27; 
    https://accounts.google.com;
&quot;</span>&gt;</span>
</code></pre>
<h3 id="7-í†µí•©-ì¸ì¦-ì‹œìŠ¤í…œì˜-ì¥ì ">7. í†µí•© ì¸ì¦ ì‹œìŠ¤í…œì˜ ì¥ì </h3>
<ol>
<li><strong>ì¼ê´€ëœ ì‚¬ìš©ì ê²½í—˜</strong>: ëª¨ë“  ì†Œì…œ í”Œë«í¼ì—ì„œ ë™ì¼í•œ í”Œë¡œìš°</li>
<li><strong>ìë™ ê³„ì • ì—°ê²°</strong>: ê°™ì€ ì´ë©”ì¼ë¡œ ì—¬ëŸ¬ ì†Œì…œ ê³„ì • í†µí•© ê´€ë¦¬</li>
<li><strong>ìœ ì—°í•œ íšŒì›ê°€ì…</strong>: í•„ìš”ì‹œì—ë§Œ ì¶”ê°€ ì •ë³´ ìˆ˜ì§‘</li>
<li><strong>ê°œë°œì ì¹œí™”ì </strong>: ê°œë°œ ëª¨ë“œ ì§€ì›ìœ¼ë¡œ ì‰¬ìš´ í…ŒìŠ¤íŠ¸</li>
<li><strong>í–¥ìƒëœ ë³´ì•ˆ</strong>: í† í° ê¸°ë°˜ ì¸ì¦ê³¼ í”„ë¡ íŠ¸ì—”ë“œ ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€ ì ìš©</li>
<li><strong>ì‚¬ìš©ì í”„ë¼ì´ë²„ì‹œ ë³´í˜¸</strong>: ë¯¼ê°í•œ ì •ë³´ ìµœì†Œ ìˆ˜ì§‘ ë° ì•ˆì „í•œ ì²˜ë¦¬</li>
</ol>
<h3 id="8-í”„ë¡ íŠ¸ì—”ë“œ-ë³´ì•ˆ-ì²´í¬ë¦¬ìŠ¤íŠ¸">8. í”„ë¡ íŠ¸ì—”ë“œ ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
<ul class="contains-task-list">
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> í† í°ì„ httpOnly ì¿ í‚¤ ë˜ëŠ” secure storageì— ì €ì¥</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> localStorageëŠ” ê°œë°œ í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> ëª¨ë“  API ìš”ì²­ì— CSRF í† í° í¬í•¨</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> ì—ëŸ¬ ë©”ì‹œì§€ì—ì„œ ë‚´ë¶€ ì •ë³´ ë…¸ì¶œ ë°©ì§€</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> CSP í—¤ë”ë¡œ XSS ê³µê²© ë°©ì§€</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> ë¯¼ê°í•œ ì •ë³´ëŠ” ë¡œê·¸ì—ì„œ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> ê°œë°œ/í”„ë¡œë•ì…˜ í™˜ê²½ë³„ ë¡œê·¸ ë ˆë²¨ ë¶„ë¦¬</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> ì†Œì…œ SDK ë¡œë”© ì‹¤íŒ¨ì— ëŒ€í•œ fallback ì²˜ë¦¬</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë° íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> ì‚¬ìš©ì ì¸í„°ë™ì…˜ ê¸°ë°˜ íŒì—… ì‹¤í–‰ (ìë™ ì°¨ë‹¨ ë°©ì§€)</li>
</ul>
<p>ì´ ë¬¸ì„œëŠ” ì‹¤ì œ êµ¬í˜„ëœ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìœ¼ë©°, í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œ ëª¨ë‘ì—ì„œ ì°¸ê³ í•  ìˆ˜ ìˆëŠ” ì™„ì „í•œ ê°€ì´ë“œì…ë‹ˆë‹¤.</p>
<h1 id="í†µí•©-ì†Œì…œ-ì¸ì¦-í”„ë¡œì„¸ìŠ¤-ë¡œê·¸ì¸íšŒì›ê°€ì…-ìë™-íŒë‹¨">í†µí•© ì†Œì…œ ì¸ì¦ í”„ë¡œì„¸ìŠ¤ (ë¡œê·¸ì¸/íšŒì›ê°€ì… ìë™ íŒë‹¨)</h1>
<h2 id="-í•µì‹¬-ê°œë…-í•˜ë‚˜ì˜-ë²„íŠ¼-ìŠ¤ë§ˆíŠ¸í•œ-ì²˜ë¦¬">ğŸ¯ <strong>í•µì‹¬ ê°œë…: í•˜ë‚˜ì˜ ë²„íŠ¼, ìŠ¤ë§ˆíŠ¸í•œ ì²˜ë¦¬</strong></h2>
<h3 id="ì‚¬ìš©ì-ê²½í—˜"><strong>ì‚¬ìš©ì ê²½í—˜</strong></h3>
<pre><code>[êµ¬ê¸€ë¡œ ì‹œì‘í•˜ê¸°] ë²„íŠ¼ â†’ êµ¬ê¸€ ì¸ì¦ â†’ ìë™ìœ¼ë¡œ ë¡œê·¸ì¸/ê°€ì… íŒë‹¨ â†’ ì„œë¹„ìŠ¤ ì´ìš©
</code></pre>
<h3 id="í†µí•©-í”„ë¡œì„¸ìŠ¤-í”Œë¡œìš°"><strong>í†µí•© í”„ë¡œì„¸ìŠ¤ í”Œë¡œìš°</strong></h3>
<pre class="mermaid">flowchart TD
    A[ì‚¬ìš©ìê°€ 'êµ¬ê¸€ë¡œ ì‹œì‘í•˜ê¸°' í´ë¦­] --&gt; B[êµ¬ê¸€ OAuth ì¸ì¦]
    B --&gt; C[ID Token íšë“]
    C --&gt; D[AuthService í˜¸ì¶œ&lt;br/&gt;POST /api/auth/social/google]
    
    D --&gt; E{ì„œë²„ê°€ ìë™ íŒë‹¨}
    
    E --&gt;|ê¸°ì¡´ ì†Œì…œ ê³„ì •| F1[ì¦‰ì‹œ ë¡œê·¸ì¸ ì™„ë£Œ]
    E --&gt;|ê¸°ì¡´ ì´ë©”ì¼ ì‚¬ìš©ì| F2[ì†Œì…œ ê³„ì • ì—°ê²° í›„ ë¡œê·¸ì¸]
    E --&gt;|ì™„ì „ ì‹ ê·œ + ì •ë³´ ì¶©ë¶„| F3[ìë™ íšŒì›ê°€ì… í›„ ë¡œê·¸ì¸]
    E --&gt;|ì™„ì „ ì‹ ê·œ + ì •ë³´ ë¶€ì¡±| F4[ì¶”ê°€ ì •ë³´ ìˆ˜ì§‘ í•„ìš”]
    
    F4 --&gt; G[íšŒì›ê°€ì… í¼ í‘œì‹œ]
    G --&gt; H[ì‚¬ìš©ìê°€ ì¶”ê°€ ì •ë³´ ì…ë ¥]
    H --&gt; I[POST /api/auth/social/signup]
    I --&gt; J[íšŒì›ê°€ì… ì™„ë£Œ í›„ ë¡œê·¸ì¸]
    
    F1 --&gt; K[ì„œë¹„ìŠ¤ ì´ìš©]
    F2 --&gt; K
    F3 --&gt; K  
    J --&gt; K
</pre>
<hr>
<h2 id="-ë°ì´í„°-íë¦„ë„">ğŸ“Š ë°ì´í„° íë¦„ë„</h2>
<h3 id="1-ì†Œì…œ-ë¡œê·¸ì¸-ë°ì´í„°-ì²˜ë¦¬-ê³¼ì •">1. ì†Œì…œ ë¡œê·¸ì¸ ë°ì´í„° ì²˜ë¦¬ ê³¼ì •</h3>
<pre class="mermaid">graph TD
    A[ì†Œì…œ í† í°] --&gt; B{í† í° ê²€ì¦}
    B --&gt;|ì„±ê³µ| C[ì†Œì…œ ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ]
    B --&gt;|ì‹¤íŒ¨| D[ì¸ì¦ ì‹¤íŒ¨]
    
    C --&gt; E[SocialUserInfo ìƒì„±]
    E --&gt; F{ê¸°ì¡´ ì†Œì…œ ê³„ì • ì¡´ì¬?}
    
    F --&gt;|ì˜ˆ| G[ê¸°ì¡´ ì‚¬ìš©ì ë¡œê·¸ì¸]
    F --&gt;|ì•„ë‹ˆì˜¤| H{ì´ë©”ì¼ë¡œ ê¸°ì¡´ ì‚¬ìš©ì ì¡´ì¬?}
    
    H --&gt;|ì˜ˆ| I[ì†Œì…œ ê³„ì • ì—°ê²°]
    H --&gt;|ì•„ë‹ˆì˜¤| J[ì‹ ê·œ ì‚¬ìš©ì ìƒì„±]
    
    G --&gt; K[JWT í† í° ìƒì„±]
    I --&gt; K
    J --&gt; K
    
    K --&gt; L[Redis í† í° ìºì‹±]
    L --&gt; M[ë¡œê·¸ì¸ ì‘ë‹µ]
</pre>
<h3 id="2-ì†Œì…œ-íšŒì›ê°€ì…-ë°ì´í„°-ì²˜ë¦¬-ê³¼ì •">2. ì†Œì…œ íšŒì›ê°€ì… ë°ì´í„° ì²˜ë¦¬ ê³¼ì •</h3>
<pre class="mermaid">graph TD
    A[ì†Œì…œ íšŒì›ê°€ì… ìš”ì²­] --&gt; B[ì†Œì…œ í† í° ê²€ì¦]
    B --&gt; C[ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ]
    C --&gt; D[ì¶”ê°€ ì •ë³´ ê²°í•©]
    
    D --&gt; E{userId ì¤‘ë³µ í™•ì¸}
    E --&gt;|ì¤‘ë³µ| F[ì¤‘ë³µ ì˜¤ë¥˜]
    E --&gt;|ì‚¬ìš©ê°€ëŠ¥| G[ì‹ ê·œ ì‚¬ìš©ì ìƒì„±]
    
    G --&gt; H[ì†Œì…œ ê³„ì • ì—°ê²°]
    H --&gt; I[JWT í† í° ìƒì„±]
    I --&gt; J[íšŒì›ê°€ì… ì™„ë£Œ]
    
    F --&gt; K[ë‹¤ë¥¸ ì•„ì´ë”” ìš”ì²­]
</pre>
<hr>
<h2 id="-ìƒì„¸-ì‹œí€€ìŠ¤-ë‹¤ì´ì–´ê·¸ë¨">ğŸ”„ ìƒì„¸ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨</h2>
<h3 id="ê¸°ì¡´-ì‚¬ìš©ì-ì†Œì…œ-ê³„ì •-ì—°ê²°-ì‹œë‚˜ë¦¬ì˜¤">ê¸°ì¡´ ì‚¬ìš©ì ì†Œì…œ ê³„ì • ì—°ê²° ì‹œë‚˜ë¦¬ì˜¤</h3>
<pre class="mermaid">sequenceDiagram
    participant C as Client
    participant A as AuthService
    participant DB as Database
    participant SA as SocialAccount
    
    C-&gt;&gt;A: ì†Œì…œ ë¡œê·¸ì¸ ìš”ì²­
    A-&gt;&gt;A: ì†Œì…œ í† í° ê²€ì¦
    
    A-&gt;&gt;SA: ì†Œì…œ IDë¡œ ê³„ì • ì¡°íšŒ
    SA-&gt;&gt;A: ê³„ì • ì—†ìŒ
    
    A-&gt;&gt;DB: ì´ë©”ì¼ë¡œ ì‚¬ìš©ì ì¡°íšŒ
    DB-&gt;&gt;A: ê¸°ì¡´ ì‚¬ìš©ì ì¡´ì¬
    
    Note over A: ê¸°ì¡´ ì‚¬ìš©ìì—ê²Œ ìƒˆ ì†Œì…œ ê³„ì • ì—°ê²°
    
    A-&gt;&gt;SA: ìƒˆ ì†Œì…œ ê³„ì • ìƒì„±
    A-&gt;&gt;DB: ì‚¬ìš©ì ì •ë³´ ì—…ë°ì´íŠ¸
    
    A-&gt;&gt;A: JWT í† í° ìƒì„±
    A-&gt;&gt;C: ì—°ê²° ì™„ë£Œ ì‘ë‹µ
    Note over A,C: &quot;ê¸°ì¡´ ê³„ì •ì— Google ì†Œì…œ ê³„ì •ì´ ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤!&quot;
</pre>
<hr>
<h2 id="-ë°ì´í„°-êµ¬ì¡°-ë¶„ì„">ğŸ“Š ë°ì´í„° êµ¬ì¡° ë¶„ì„</h2>
<h3 id="1-ì…ë ¥-ë°ì´í„°-request">1. ì…ë ¥ ë°ì´í„° (Request)</h3>
<h4 id="google-ë¡œê·¸ì¸-ìš”ì²­">Google ë¡œê·¸ì¸ ìš”ì²­</h4>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;idToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;eyJhbGciOiJSUzI1NiIs...&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;deviceInfo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;platform&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;MOBILE_APP&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;deviceId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;device-uuid&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;appVersion&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 id="kakao-ë¡œê·¸ì¸-ìš”ì²­">Kakao ë¡œê·¸ì¸ ìš”ì²­</h4>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;accessToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;kEWG7tLkJc3eDpNp...&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;deviceInfo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;platform&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;WEB_BROWSER&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;deviceId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;browser-fingerprint&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 id="naver-ë¡œê·¸ì¸-ìš”ì²­">Naver ë¡œê·¸ì¸ ìš”ì²­</h4>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;accessToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;AAAANVl6Y8PgC8H...&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 id="ì†Œì…œ-íšŒì›ê°€ì…-ìš”ì²­">ì†Œì…œ íšŒì›ê°€ì… ìš”ì²­</h4>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;provider&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;GOOGLE&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;socialToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;eyJhbGciOiJSUzI1NiIs...&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;userId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;user123&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;phone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;010-1234-5678&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;termsAgreed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;privacyAgreed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;marketingAgreed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="2-ì¤‘ê°„-ì²˜ë¦¬-ë°ì´í„°-socialuserinfo">2. ì¤‘ê°„ ì²˜ë¦¬ ë°ì´í„° (SocialUserInfo)</h3>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;provider&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;google&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;socialId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;108234567890123456789&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;user@gmail.com&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;í™ê¸¸ë™&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;profileImageUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://lh3.googleusercontent.com/...&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;emailVerified&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;phoneNumber&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;010-1234-5678&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;locale&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ko_KR&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;collectionChannel&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;mobile_app&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;providedInfoMask&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">37</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="3-ì¶œë ¥-ë°ì´í„°-response">3. ì¶œë ¥ ë°ì´í„° (Response)</h3>
<h4 id="ì†Œì…œ-ë¡œê·¸ì¸-ì‘ë‹µ">ì†Œì…œ ë¡œê·¸ì¸ ì‘ë‹µ</h4>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;success&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;accessToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;eyJhbGciOiJIUzUxMiJ9...&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;refreshToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4f8b1c2e-3d4a-5b6c-7d8e-9f0a1b2c3d4e&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;tokenType&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Bearer&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;expiresIn&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3600</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;userInfo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;member-uuid-1234&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;user@gmail.com&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;í™ê¸¸ë™&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;profileImageUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://lh3.googleusercontent.com/...&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;USER&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;isNewUser&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;needsAdditionalInfo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;needsUsernameInput&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;needsAccountLink&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Google ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 id="ì†Œì…œ-íšŒì›ê°€ì…-ì‘ë‹µ">ì†Œì…œ íšŒì›ê°€ì… ì‘ë‹µ</h4>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;success&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Google íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;accessToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;eyJhbGciOiJIUzUxMiJ9...&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;refreshToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4f8b1c2e-3d4a-5b6c-7d8e-9f0a1b2c3d4e&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;tokenType&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Bearer&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;expiresIn&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3600</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;userInfo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;new-member-uuid-5678&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;newuser@gmail.com&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ê¹€ì‹ ê·œ&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;profileImageUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://lh3.googleusercontent.com/...&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;provider&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;GOOGLE&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;USER&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;needsAdditionalInfo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr>
<h2 id="-í•µì‹¬-ë°ì´í„°-ì²˜ë¦¬-ë¡œì§">ğŸ¯ í•µì‹¬ ë°ì´í„° ì²˜ë¦¬ ë¡œì§</h2>
<h3 id="1-ì‚¬ìš©ì-ì‹ë³„-ìš°ì„ ìˆœìœ„">1. ì‚¬ìš©ì ì‹ë³„ ìš°ì„ ìˆœìœ„</h3>
<ol>
<li><strong>ì†Œì…œ ID + í”Œë«í¼</strong> (ê¸°ì¡´ ì†Œì…œ ê³„ì •)</li>
<li><strong>ì´ë©”ì¼</strong> (ê¸°ì¡´ ì¼ë°˜ ì‚¬ìš©ì ë˜ëŠ” ë‹¤ë¥¸ ì†Œì…œ ê³„ì •)</li>
<li><strong>ì‹ ê·œ ìƒì„±</strong> (ì™„ì „íˆ ìƒˆë¡œìš´ ì‚¬ìš©ì)</li>
</ol>
<h3 id="2-ì •ë³´-ë³‘í•©-ì „ëµ">2. ì •ë³´ ë³‘í•© ì „ëµ</h3>
<ul>
<li><strong>ì†Œì…œ ì •ë³´ ìš°ì„ </strong>: ì´ë¦„, í”„ë¡œí•„ ì´ë¯¸ì§€</li>
<li><strong>ê¸°ì¡´ ì •ë³´ ìœ ì§€</strong>: ì „í™”ë²ˆí˜¸, userId, ì„¤ì •</li>
<li><strong>ìµœì‹  ì •ë³´ ì—…ë°ì´íŠ¸</strong>: ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì‹œê°„, ì†Œì…œ ê³„ì • ì •ë³´</li>
</ul>
<h3 id="3-ë³´ì•ˆ-ê²€ì¦-ë‹¨ê³„">3. ë³´ì•ˆ ê²€ì¦ ë‹¨ê³„</h3>
<ol>
<li><strong>ì†Œì…œ í† í° ê²€ì¦</strong> (í”Œë«í¼ API í˜¸ì¶œ)</li>
<li><strong>í´ë¼ì´ì–¸íŠ¸ ID í™•ì¸</strong> (Google)</li>
<li><strong>ì´ë©”ì¼ ì¸ì¦ ìƒíƒœ í™•ì¸</strong></li>
<li><strong>ê³„ì • ìƒíƒœ í™•ì¸</strong> (í™œì„±/ë¹„í™œì„±/ì‚­ì œ)</li>
</ol>
<hr>
<h2 id="-ì‹œë‚˜ë¦¬ì˜¤ë³„-ì²˜ë¦¬-ê²°ê³¼">ğŸ“‹ ì‹œë‚˜ë¦¬ì˜¤ë³„ ì²˜ë¦¬ ê²°ê³¼</h2>
<table>
<thead>
<tr>
<th>ì‹œë‚˜ë¦¬ì˜¤</th>
<th>ê²°ê³¼</th>
<th>needsAdditionalInfo</th>
<th>needsUsernameInput</th>
<th>isNewUser</th>
</tr>
</thead>
<tbody>
<tr>
<td>ì™„ì „ ì‹ ê·œ ì‚¬ìš©ì</td>
<td>íšŒì›ê°€ì… + ë¡œê·¸ì¸</td>
<td>true</td>
<td>true</td>
<td>true</td>
</tr>
<tr>
<td>ê¸°ì¡´ ì¼ë°˜ ì‚¬ìš©ì</td>
<td>ì†Œì…œ ê³„ì • ì—°ê²°</td>
<td>false</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td>ê¸°ì¡´ ì†Œì…œ ì‚¬ìš©ì</td>
<td>ë¡œê·¸ì¸</td>
<td>false</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td>ì •ë³´ ë¶€ì¡± ì‹ ê·œ ì‚¬ìš©ì</td>
<td>ì„ì‹œ í† í° ë°œê¸‰</td>
<td>true</td>
<td>true</td>
<td>true</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="-ë°±ì—”ë“œ-ì‹¤ì œ-êµ¬í˜„-ì •ë³´-í”„ë¡ íŠ¸ì—”ë“œ-íŒ€-ìš”ì²­ì‚¬í•­">ğŸ”§ ë°±ì—”ë“œ ì‹¤ì œ êµ¬í˜„ ì •ë³´ (í”„ë¡ íŠ¸ì—”ë“œ íŒ€ ìš”ì²­ì‚¬í•­)</h2>
<h3 id="1-applicationyml-ì„¤ì •-íŒŒì¼-ìƒì„¸">1. application.yml ì„¤ì • íŒŒì¼ ìƒì„¸</h3>
<h4 id="11-ì‹¤ì œ-ìš´ì˜-ì„¤ì •-ê°’">1.1 ì‹¤ì œ ìš´ì˜ ì„¤ì • ê°’</h4>
<pre><code class="language-yaml"><span class="hljs-comment"># AuthService í¬íŠ¸ ë° ê¸°ë³¸ ì„¤ì •</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8082</span>

<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">auth-service</span>
  <span class="hljs-attr">profiles:</span>
    <span class="hljs-attr">active:</span> <span class="hljs-string">local</span>  <span class="hljs-comment"># local | docker | dev í™˜ê²½ë³„ í”„ë¡œíŒŒì¼</span>

<span class="hljs-comment"># JWT í† í° ì„¤ì • (ì‹¤ì œ ê°’)</span>
<span class="hljs-attr">jwt:</span>
  <span class="hljs-attr">secret:</span> <span class="hljs-string">akc-b2c-jwt-secret-key-2024-very-long-and-secure</span>
  <span class="hljs-attr">access-token-expiration:</span> <span class="hljs-number">3600000</span>   <span class="hljs-comment"># 1ì‹œê°„ (ë°€ë¦¬ì´ˆ)</span>
  <span class="hljs-attr">refresh-token-expiration:</span> <span class="hljs-number">604800000</span>  <span class="hljs-comment"># 7ì¼ (ë°€ë¦¬ì´ˆ)</span>
  <span class="hljs-attr">issuer:</span> <span class="hljs-string">akc-b2c-auth-service</span>

<span class="hljs-comment"># ì†Œì…œ ë¡œê·¸ì¸ ì‹¤ì œ ì„¤ì • ê°’</span>
<span class="hljs-attr">social:</span>
  <span class="hljs-attr">google:</span>
    <span class="hljs-attr">client-id:</span> <span class="hljs-string">your-google-client-id.apps.googleusercontent.com</span>
    <span class="hljs-attr">client-secret:</span> <span class="hljs-string">${GOOGLE_CLIENT_SECRET:your-google-client-secret}</span>
    <span class="hljs-attr">token-info-url:</span> <span class="hljs-string">https://www.googleapis.com/oauth2/v3/tokeninfo</span>
    <span class="hljs-attr">user-info-url:</span> <span class="hljs-string">https://www.googleapis.com/oauth2/v2/userinfo</span>
    <span class="hljs-attr">scope:</span> <span class="hljs-string">openid,email,profile</span>
    <span class="hljs-attr">dev-mode:</span> <span class="hljs-literal">false</span>  <span class="hljs-comment"># í”„ë¡œë•ì…˜: false, ê°œë°œ: true</span>
    
  <span class="hljs-attr">kakao:</span>
    <span class="hljs-attr">client-id:</span> <span class="hljs-string">your-kakao-javascript-key</span>  <span class="hljs-comment"># JavaScript í‚¤</span>
    <span class="hljs-attr">user-info-url:</span> <span class="hljs-string">https://kapi.kakao.com/v2/user/me</span>
    <span class="hljs-attr">token-url:</span> <span class="hljs-string">https://kauth.kakao.com/oauth/token</span>
    <span class="hljs-attr">scope:</span> <span class="hljs-string">profile_nickname,account_email</span>
    <span class="hljs-attr">dev-mode:</span> <span class="hljs-literal">false</span>
    
  <span class="hljs-attr">naver:</span>
    <span class="hljs-attr">client-id:</span> <span class="hljs-string">your-naver-client-id</span>
    <span class="hljs-attr">client-secret:</span> <span class="hljs-string">${NAVER_CLIENT_SECRET:your-naver-client-secret}</span>
    <span class="hljs-attr">redirect-uri:</span> <span class="hljs-string">http://localhost:8082/api/auth/social/naver/callback</span>
    <span class="hljs-attr">auth-url:</span> <span class="hljs-string">https://nid.naver.com/oauth2.0/authorize</span>
    <span class="hljs-attr">token-url:</span> <span class="hljs-string">https://nid.naver.com/oauth2.0/token</span>
    <span class="hljs-attr">user-info-url:</span> <span class="hljs-string">https://openapi.naver.com/v1/nid/me</span>
    <span class="hljs-attr">scope:</span> <span class="hljs-string">name,email,profile_image</span>
    <span class="hljs-attr">dev-mode:</span> <span class="hljs-literal">false</span>

<span class="hljs-comment"># ë³´ì•ˆ ë° ì œí•œ ì„¤ì •</span>
<span class="hljs-attr">social:</span>
  <span class="hljs-attr">security:</span>
    <span class="hljs-attr">max-login-attempts:</span> <span class="hljs-number">5</span>
    <span class="hljs-attr">account-lock-duration:</span> <span class="hljs-number">1800000</span>  <span class="hljs-comment"># 30ë¶„</span>
  <span class="hljs-attr">settings:</span>
    <span class="hljs-attr">allow-account-linking:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">auto-register:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">require-phone-verification:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">default-role:</span> <span class="hljs-string">USER</span>
</code></pre>
<h4 id="12-í™˜ê²½ë³„-ì„¤ì •-ì°¨ì´ì ">1.2 í™˜ê²½ë³„ ì„¤ì • ì°¨ì´ì </h4>
<pre><code class="language-yaml"><span class="hljs-comment"># Local í™˜ê²½ (ê°œë°œì ë¡œì»¬)</span>
<span class="hljs-attr">spring.profiles.active:</span> <span class="hljs-string">local</span>
<span class="hljs-attr">datasource.url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/db_akc_b2c</span>
<span class="hljs-attr">redis.host:</span> <span class="hljs-string">localhost</span>
<span class="hljs-attr">dev-mode:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># ëª¨ë“  ì†Œì…œ í”Œë«í¼</span>

<span class="hljs-comment"># Docker í™˜ê²½ (ì»¨í…Œì´ë„ˆ)</span>
<span class="hljs-attr">spring.profiles.active:</span> <span class="hljs-string">docker</span>  
<span class="hljs-attr">datasource.url:</span> <span class="hljs-string">jdbc:mysql://host.docker.internal:3306/db_akc_b2c</span>
<span class="hljs-attr">redis.host:</span> <span class="hljs-string">redis</span>
<span class="hljs-attr">dev-mode:</span> <span class="hljs-literal">false</span>

<span class="hljs-comment"># Development í™˜ê²½ (ìµœì†Œ ì˜ì¡´ì„±)</span>
<span class="hljs-attr">spring.profiles.active:</span> <span class="hljs-string">dev</span>
<span class="hljs-attr">datasource.url:</span> <span class="hljs-string">jdbc:h2:mem:testdb</span>  <span class="hljs-comment"># ì¸ë©”ëª¨ë¦¬ DB</span>
<span class="hljs-attr">redis:</span> <span class="hljs-string">disabled</span>
<span class="hljs-attr">dev-mode:</span> <span class="hljs-literal">true</span>
</code></pre>
<h3 id="2-ê°œë°œ-ëª¨ë“œ-ë”ë¯¸-ë°ì´í„°-ë¡œì§">2. ê°œë°œ ëª¨ë“œ ë”ë¯¸ ë°ì´í„° ë¡œì§</h3>
<h4 id="21-google-ê°œë°œ-ëª¨ë“œ-ë¡œì§">2.1 Google ê°œë°œ ëª¨ë“œ ë¡œì§</h4>
<pre><code class="language-java"><span class="hljs-comment">// GoogleAuthService.java ì‹¤ì œ êµ¬í˜„</span>
<span class="hljs-keyword">public</span> SocialUserInfo <span class="hljs-title function_">getUserInfo</span><span class="hljs-params">(String idToken)</span> {
    <span class="hljs-comment">// ê°œë°œ ëª¨ë“œ ë˜ëŠ” ë”ë¯¸ í† í° ì²´í¬</span>
    <span class="hljs-keyword">if</span> (devMode || isDummyToken(idToken)) {
        log.info(<span class="hljs-string">&quot;ğŸ§ª Google ê°œë°œ ëª¨ë“œ - ë”ë¯¸ ë°ì´í„° ë°˜í™˜&quot;</span>);
        <span class="hljs-keyword">return</span> createDummyGoogleUserInfo(idToken);
    }
    
    <span class="hljs-comment">// ì‹¤ì œ Google API í† í° ê²€ì¦</span>
    <span class="hljs-keyword">return</span> verifyGoogleIdToken(idToken);
}

<span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isDummyToken</span><span class="hljs-params">(String idToken)</span> {
    <span class="hljs-keyword">return</span> idToken != <span class="hljs-literal">null</span> &amp;&amp; (
        idToken.startsWith(<span class="hljs-string">&quot;dummy&quot;</span>) ||
        idToken.startsWith(<span class="hljs-string">&quot;test&quot;</span>) ||
        idToken.equals(<span class="hljs-string">&quot;dev_google_token&quot;</span>)
    );
}

<span class="hljs-keyword">private</span> SocialUserInfo <span class="hljs-title function_">createDummyGoogleUserInfo</span><span class="hljs-params">(String idToken)</span> {
    <span class="hljs-keyword">return</span> SocialUserInfo.builder()
            .provider(<span class="hljs-string">&quot;google&quot;</span>)
            .socialId(<span class="hljs-string">&quot;dummy_google_&quot;</span> + System.currentTimeMillis())
            .email(<span class="hljs-string">&quot;dev.google.user@test.com&quot;</span>)
            .name(<span class="hljs-string">&quot;êµ¬ê¸€ ê°œë°œ í…ŒìŠ¤íŠ¸&quot;</span>)
            .profileImageUrl(<span class="hljs-string">&quot;https://lh3.googleusercontent.com/a/default-user&quot;</span>)
            .emailVerified(<span class="hljs-literal">true</span>)
            .locale(<span class="hljs-string">&quot;ko_KR&quot;</span>)
            .collectionChannel(<span class="hljs-string">&quot;web_test&quot;</span>)
            .providedInfoMask(<span class="hljs-number">63</span>) <span class="hljs-comment">// ëª¨ë“  ì •ë³´ ì œê³µ</span>
            .build();
}
</code></pre>
<h4 id="22-ì¹´ì¹´ì˜¤-ê°œë°œ-ëª¨ë“œ-ë¡œì§">2.2 ì¹´ì¹´ì˜¤ ê°œë°œ ëª¨ë“œ ë¡œì§</h4>
<pre><code class="language-java"><span class="hljs-comment">// KakaoAuthService.java ì‹¤ì œ êµ¬í˜„</span>
<span class="hljs-keyword">public</span> SocialUserInfo <span class="hljs-title function_">getUserInfo</span><span class="hljs-params">(String accessToken)</span> {
    <span class="hljs-keyword">if</span> (devMode) {
        log.info(<span class="hljs-string">&quot;ğŸŠ ì¹´ì¹´ì˜¤ ê°œë°œ ëª¨ë“œ - ë”ë¯¸ ë°ì´í„° ë°˜í™˜&quot;</span>);
        <span class="hljs-keyword">return</span> createDevModeUserInfo();
    }
    
    <span class="hljs-keyword">return</span> callKakaoUserInfoApi(accessToken);
}

<span class="hljs-keyword">private</span> SocialUserInfo <span class="hljs-title function_">createDevModeUserInfo</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> SocialUserInfo.builder()
            .provider(<span class="hljs-string">&quot;kakao&quot;</span>)
            .socialId(<span class="hljs-string">&quot;dummy_kakao_&quot;</span> + System.currentTimeMillis())
            .email(<span class="hljs-string">&quot;dev.kakao.user@test.com&quot;</span>)
            .name(<span class="hljs-string">&quot;ì¹´ì¹´ì˜¤ ê°œë°œ í…ŒìŠ¤íŠ¸&quot;</span>)
            .profileImageUrl(<span class="hljs-string">&quot;https://k.kakaocdn.net/dn/default_profile.png&quot;</span>)
            .emailVerified(<span class="hljs-literal">true</span>)
            .build();
}
</code></pre>
<h4 id="23-ë„¤ì´ë²„-ê°œë°œ-ëª¨ë“œ-ë¡œì§">2.3 ë„¤ì´ë²„ ê°œë°œ ëª¨ë“œ ë¡œì§</h4>
<pre><code class="language-java"><span class="hljs-comment">// NaverAuthService.java ì‹¤ì œ êµ¬í˜„</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getAccessToken</span><span class="hljs-params">(String authorizationCode, String state)</span> {
    <span class="hljs-keyword">if</span> (devMode) {
        log.info(<span class="hljs-string">&quot;ğŸŸ¢ ë„¤ì´ë²„ ê°œë°œ ëª¨ë“œ - ë”ë¯¸ Access Token ë°˜í™˜&quot;</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;dev_naver_access_token_&quot;</span> + System.currentTimeMillis();
    }
    
    <span class="hljs-keyword">return</span> exchangeCodeForToken(authorizationCode, state);
}

<span class="hljs-keyword">public</span> SocialUserInfo <span class="hljs-title function_">getUserInfo</span><span class="hljs-params">(String accessToken)</span> {
    <span class="hljs-keyword">if</span> (devMode || accessToken.startsWith(<span class="hljs-string">&quot;dev_naver_&quot;</span>)) {
        <span class="hljs-keyword">return</span> createDummyNaverUserInfo();
    }
    
    <span class="hljs-keyword">return</span> callNaverUserInfoApi(accessToken);
}
</code></pre>
<h3 id="3-ì •í™•í•œ-api-ì—”ë“œí¬ì¸íŠ¸-ìŠ¤í™">3. ì •í™•í•œ API ì—”ë“œí¬ì¸íŠ¸ ìŠ¤í™</h3>
<h4 id="31-ì‹¤ì œ-êµ¬í˜„ëœ-ì—”ë“œí¬ì¸íŠ¸">3.1 ì‹¤ì œ êµ¬í˜„ëœ ì—”ë“œí¬ì¸íŠ¸</h4>
<pre><code class="language-java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping(&quot;/api/auth/social&quot;)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocialAuthController</span> {
    
    <span class="hljs-comment">// âœ… ì‹¤ì œ POST ì—”ë“œí¬ì¸íŠ¸ë“¤</span>
    <span class="hljs-meta">@PostMapping(&quot;/google&quot;)</span>      <span class="hljs-comment">// Google ID Token ì²˜ë¦¬</span>
    <span class="hljs-meta">@PostMapping(&quot;/kakao&quot;)</span>       <span class="hljs-comment">// Kakao Access Token ì²˜ë¦¬</span>
    <span class="hljs-meta">@PostMapping(&quot;/naver&quot;)</span>       <span class="hljs-comment">// Naver Access Token ì²˜ë¦¬ (ì¶”ê°€ì )</span>
    <span class="hljs-meta">@PostMapping(&quot;/signup&quot;)</span>      <span class="hljs-comment">// ì†Œì…œ íšŒì›ê°€ì… í†µí•©</span>
    
    <span class="hljs-comment">// âœ… ë„¤ì´ë²„ OAuth GET ì—”ë“œí¬ì¸íŠ¸ë“¤ (íŒì—… ì „ìš©)</span>
    <span class="hljs-meta">@GetMapping(&quot;/naver/login&quot;)</span>     <span class="hljs-comment">// ë„¤ì´ë²„ ì¸ì¦ ì‹œì‘</span>
    <span class="hljs-meta">@GetMapping(&quot;/naver/callback&quot;)</span>  <span class="hljs-comment">// ë„¤ì´ë²„ ì½œë°± ì²˜ë¦¬</span>
    
    <span class="hljs-comment">// âœ… ìœ í‹¸ë¦¬í‹° ì—”ë“œí¬ì¸íŠ¸ë“¤</span>
    <span class="hljs-meta">@GetMapping(&quot;/providers&quot;)</span>    <span class="hljs-comment">// ì§€ì› í”Œë«í¼ ëª©ë¡ ë°˜í™˜</span>
    <span class="hljs-meta">@GetMapping(&quot;/health&quot;)</span>       <span class="hljs-comment">// ì„œë¹„ìŠ¤ ìƒíƒœ ì²´í¬</span>
    
    <span class="hljs-comment">// âš ï¸ ìˆ¨ê²¨ì§„ ì—”ë“œí¬ì¸íŠ¸ (ë‚´ë¶€ì ìœ¼ë¡œ ì¡´ì¬í•  ìˆ˜ ìˆìŒ)</span>
    <span class="hljs-meta">@PostMapping(&quot;/check-userid&quot;)</span>  <span class="hljs-comment">// ì•„ì´ë”” ì¤‘ë³µ í™•ì¸ (ì¶”ì •)</span>
}
</code></pre>
<h4 id="32-ì‹¤ì œ-ìš”ì²­ì‘ë‹µ-í˜•ì‹-ê²€ì¦ëœ-ìŠ¤í™">3.2 ì‹¤ì œ ìš”ì²­/ì‘ë‹µ í˜•ì‹ (ê²€ì¦ëœ ìŠ¤í™)</h4>
<pre><code class="language-json"><span class="hljs-comment">// POST /api/auth/social/google ìš”ì²­</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;idToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;deviceInfo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;platform&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;WEB_BROWSER&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;deviceId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;browser-12345&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;appVersion&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// POST /api/auth/social/kakao ìš”ì²­  </span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;accessToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;kEWG7tLkJc3eDpNpOo8TCCoTs...&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;deviceInfo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;platform&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;MOBILE_APP&quot;</span><span class="hljs-punctuation">,</span> 
    <span class="hljs-attr">&quot;deviceId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;device-67890&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;appVersion&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2.1.0&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// POST /api/auth/social/naver ìš”ì²­</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;accessToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;AAAANVl6Y8PgC8HsssEQutads...&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="4-ì‹¤ì œ-ë°ì´í„°ë² ì´ìŠ¤-ìŠ¤í‚¤ë§ˆ">4. ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ</h3>
<h4 id="41-members-í…Œì´ë¸”-ì‹¤ì œ-êµ¬ì¡°">4.1 members í…Œì´ë¸” (ì‹¤ì œ êµ¬ì¡°)</h4>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `members` (
  `id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,
  `member_uuid` <span class="hljs-type">varchar</span>(<span class="hljs-number">36</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `email` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `name` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `user_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `phone` <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `password` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,  <span class="hljs-comment">-- ì†Œì…œ ì „ìš© íšŒì›ì€ NULL</span>
  `profile_image_url` text,
  `role` <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;USER&#x27;</span>,
  `member_type` <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;SOCIAL&#x27;</span>,  <span class="hljs-comment">-- GENERAL, SOCIAL</span>
  `status` <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;ACTIVE&#x27;</span>,  <span class="hljs-comment">-- ACTIVE, INACTIVE, WITHDRAWN</span>
  `birth_date` <span class="hljs-type">date</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `gender` <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `marketing_agreed` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,
  `terms_agreed` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,
  `privacy_agreed` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,
  `sms_notification_enabled` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,
  `email_notification_enabled` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,
  `last_login_at` <span class="hljs-type">timestamp</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `password_changed_at` <span class="hljs-type">timestamp</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `created_at` <span class="hljs-type">timestamp</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  `updated_at` <span class="hljs-type">timestamp</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  `created_by` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;system&#x27;</span>,
  `updated_by` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;system&#x27;</span>,
  `withdraw_reason` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_members_member_uuid` (`member_uuid`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_members_email` (`email`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_members_user_id` (`user_id`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4;
</code></pre>
<h4 id="42-member_social_accounts-í…Œì´ë¸”-ì‹¤ì œ-êµ¬ì¡°">4.2 member_social_accounts í…Œì´ë¸” (ì‹¤ì œ êµ¬ì¡°)</h4>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `member_social_accounts` (
  `id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,
  `member_id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `provider` <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ì†Œì…œ ì œê³µì—…ì²´ (GOOGLE, KAKAO, NAVER)&#x27;</span>,
  `social_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ì†Œì…œ í”Œë«í¼ ê³ ìœ  ID&#x27;</span>,
  `email` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ì†Œì…œì—ì„œ ì œê³µëœ ì´ë©”ì¼&#x27;</span>,
  `name` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ì†Œì…œì—ì„œ ì œê³µëœ ì´ë¦„&#x27;</span>,
  `profile_image_url` text COMMENT <span class="hljs-string">&#x27;ì†Œì…œ í”„ë¡œí•„ ì´ë¯¸ì§€ URL&#x27;</span>,
  `is_primary` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;ì£¼ ì†Œì…œ ê³„ì • ì—¬ë¶€&#x27;</span>,
  `is_email_verified` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;ì†Œì…œì—ì„œ ì´ë©”ì¼ ì¸ì¦ ì—¬ë¶€&#x27;</span>,
  `locale` <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ì‚¬ìš©ì ë¡œì¼€ì¼ (ko_KR, en_US)&#x27;</span>,
  `last_used_at` <span class="hljs-type">timestamp</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì‹œê°„&#x27;</span>,
  `additional_info` json <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ì†Œì…œë³„ ì¶”ê°€ ì •ë³´ JSON&#x27;</span>,
  `created_at` <span class="hljs-type">timestamp</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  `updated_at` <span class="hljs-type">timestamp</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  `created_by` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;system&#x27;</span>,
  `updated_by` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;system&#x27;</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_social_account` (`provider`,`social_id`),
  KEY `fk_member_social_accounts_member_id` (`member_id`),
  KEY `idx_member_social_accounts_provider` (`provider`),
  KEY `idx_member_social_accounts_email` (`email`),
  <span class="hljs-keyword">CONSTRAINT</span> `fk_member_social_accounts_member_id` 
    <span class="hljs-keyword">FOREIGN</span> KEY (`member_id`) <span class="hljs-keyword">REFERENCES</span> `members` (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4;
</code></pre>
<h3 id="5-ì—ëŸ¬-ì‘ë‹µ-í˜•ì‹-í‘œì¤€í™”">5. ì—ëŸ¬ ì‘ë‹µ í˜•ì‹ í‘œì¤€í™”</h3>
<h4 id="51-í‘œì¤€-ì—ëŸ¬-ì‘ë‹µ-êµ¬ì¡°">5.1 í‘œì¤€ ì—ëŸ¬ ì‘ë‹µ êµ¬ì¡°</h4>
<pre><code class="language-json"><span class="hljs-comment">// ì„±ê³µ ì‘ë‹µ</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;success&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-comment">/* ì‹¤ì œ ë°ì´í„° */</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ì²˜ë¦¬ ì™„ë£Œ&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1703123456789</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// ì‹¤íŒ¨ ì‘ë‹µ</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;success&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;error&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;INVALID_SOCIAL_TOKEN&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ì†Œì…œ í† í°ì´ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;details&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Google ID Token verification failed&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;field&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;idToken&quot;</span>  <span class="hljs-comment">// í•„ë“œ ì˜¤ë¥˜ì¸ ê²½ìš°</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1703123456789</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 id="52-ì†Œì…œ-ë¡œê·¸ì¸-ê´€ë ¨-ì—ëŸ¬-ì½”ë“œ-ì •ì˜">5.2 ì†Œì…œ ë¡œê·¸ì¸ ê´€ë ¨ ì—ëŸ¬ ì½”ë“œ ì •ì˜</h4>
<pre><code class="language-java"><span class="hljs-comment">// SocialAuthErrorCode.java (ì‹¤ì œ êµ¬í˜„ ì¶”ì •)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">SocialAuthErrorCode</span> {
    <span class="hljs-comment">// í† í° ê´€ë ¨ ì˜¤ë¥˜</span>
    INVALID_SOCIAL_TOKEN(<span class="hljs-string">&quot;AUTH_001&quot;</span>, <span class="hljs-string">&quot;ì†Œì…œ í† í°ì´ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤&quot;</span>),
    EXPIRED_SOCIAL_TOKEN(<span class="hljs-string">&quot;AUTH_002&quot;</span>, <span class="hljs-string">&quot;ì†Œì…œ í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤&quot;</span>),
    SOCIAL_TOKEN_VERIFICATION_FAILED(<span class="hljs-string">&quot;AUTH_003&quot;</span>, <span class="hljs-string">&quot;ì†Œì…œ í† í° ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤&quot;</span>),
    
    <span class="hljs-comment">// ì‚¬ìš©ì ì •ë³´ ê´€ë ¨ ì˜¤ë¥˜</span>
    SOCIAL_USER_INFO_NOT_FOUND(<span class="hljs-string">&quot;AUTH_101&quot;</span>, <span class="hljs-string">&quot;ì†Œì…œ ì‚¬ìš©ì ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤&quot;</span>),
    REQUIRED_USER_INFO_MISSING(<span class="hljs-string">&quot;AUTH_102&quot;</span>, <span class="hljs-string">&quot;í•„ìˆ˜ ì‚¬ìš©ì ì •ë³´ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤&quot;</span>),
    EMAIL_NOT_VERIFIED(<span class="hljs-string">&quot;AUTH_103&quot;</span>, <span class="hljs-string">&quot;ì´ë©”ì¼ ì¸ì¦ì´ ì™„ë£Œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤&quot;</span>),
    
    <span class="hljs-comment">// íšŒì›ê°€ì… ê´€ë ¨ ì˜¤ë¥˜</span>
    DUPLICATE_USER_ID(<span class="hljs-string">&quot;AUTH_201&quot;</span>, <span class="hljs-string">&quot;ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤&quot;</span>),
    DUPLICATE_EMAIL(<span class="hljs-string">&quot;AUTH_202&quot;</span>, <span class="hljs-string">&quot;ì´ë¯¸ ê°€ì…ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤&quot;</span>),
    TERMS_NOT_AGREED(<span class="hljs-string">&quot;AUTH_203&quot;</span>, <span class="hljs-string">&quot;í•„ìˆ˜ ì•½ê´€ì— ë™ì˜í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤&quot;</span>),
    INVALID_PHONE_FORMAT(<span class="hljs-string">&quot;AUTH_204&quot;</span>, <span class="hljs-string">&quot;íœ´ëŒ€í° ë²ˆí˜¸ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤&quot;</span>),
    
    <span class="hljs-comment">// í”Œë«í¼ë³„ ì˜¤ë¥˜</span>
    GOOGLE_API_ERROR(<span class="hljs-string">&quot;AUTH_301&quot;</span>, <span class="hljs-string">&quot;Google API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤&quot;</span>),
    KAKAO_API_ERROR(<span class="hljs-string">&quot;AUTH_302&quot;</span>, <span class="hljs-string">&quot;ì¹´ì¹´ì˜¤ API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤&quot;</span>),
    NAVER_API_ERROR(<span class="hljs-string">&quot;AUTH_303&quot;</span>, <span class="hljs-string">&quot;ë„¤ì´ë²„ API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤&quot;</span>),
    
    <span class="hljs-comment">// ì‹œìŠ¤í…œ ì˜¤ë¥˜</span>
    DATABASE_ERROR(<span class="hljs-string">&quot;SYS_001&quot;</span>, <span class="hljs-string">&quot;ë°ì´í„°ë² ì´ìŠ¤ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤&quot;</span>),
    REDIS_CONNECTION_ERROR(<span class="hljs-string">&quot;SYS_002&quot;</span>, <span class="hljs-string">&quot;Redis ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤&quot;</span>),
    JWT_GENERATION_FAILED(<span class="hljs-string">&quot;SYS_003&quot;</span>, <span class="hljs-string">&quot;JWT í† í° ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤&quot;</span>);
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String code;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String message;
    
    SocialAuthErrorCode(String code, String message) {
        <span class="hljs-built_in">this</span>.code = code;
        <span class="hljs-built_in">this</span>.message = message;
    }
}
</code></pre>
<h3 id="6-ë¡œê¹…-ì „ëµ">6. ë¡œê¹… ì „ëµ</h3>
<h4 id="61-ì‹¤ì œ-ë¡œê¹…-ì„¤ì •">6.1 ì‹¤ì œ ë¡œê¹… ì„¤ì •</h4>
<pre><code class="language-yaml"><span class="hljs-comment"># application.ymlì˜ ë¡œê¹… ì„¤ì •</span>
<span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">com.akc.b2c.authservice:</span> <span class="hljs-string">DEBUG</span>                    <span class="hljs-comment"># AuthService ì „ì²´ DEBUG</span>
    <span class="hljs-attr">com.akc.b2c.authservice.service.social:</span> <span class="hljs-string">INFO</span>      <span class="hljs-comment"># ì†Œì…œ ë¡œê·¸ì¸ë§Œ INFO</span>
    <span class="hljs-attr">org.springframework.security:</span> <span class="hljs-string">DEBUG</span>               <span class="hljs-comment"># Spring Security DEBUG</span>
    <span class="hljs-attr">org.hibernate.SQL:</span> <span class="hljs-string">DEBUG</span>                          <span class="hljs-comment"># SQL ì¿¼ë¦¬ ë¡œê¹…</span>
    <span class="hljs-attr">org.hibernate.type.descriptor.sql.BasicBinder:</span> <span class="hljs-string">TRACE</span>  <span class="hljs-comment"># SQL íŒŒë¼ë¯¸í„°</span>
    
  <span class="hljs-attr">pattern:</span>
    <span class="hljs-attr">file:</span> <span class="hljs-string">&quot;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n&quot;</span>
    
  <span class="hljs-attr">file:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">logs/authservice.log</span>
    <span class="hljs-attr">max-size:</span> <span class="hljs-string">100MB</span>
    <span class="hljs-attr">max-history:</span> <span class="hljs-number">30</span>
</code></pre>
<h4 id="62-ë¡œê·¸-ë ˆë²¨ë³„-ì¶œë ¥-ë‚´ìš©">6.2 ë¡œê·¸ ë ˆë²¨ë³„ ì¶œë ¥ ë‚´ìš©</h4>
<pre><code class="language-java"><span class="hljs-comment">// ì‹¤ì œ ë¡œê·¸ ì¶œë ¥ ì˜ˆì‹œ (SocialAuthService.java)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocialAuthService</span> {
    
    <span class="hljs-keyword">public</span> SocialLoginResponse <span class="hljs-title function_">googleLogin</span><span class="hljs-params">(GoogleLoginRequest request)</span> {
        log.info(<span class="hljs-string">&quot;ğŸ” Google ë¡œê·¸ì¸ ì²˜ë¦¬ ì‹œì‘ - Platform: {}&quot;</span>, 
                request.getDeviceInfo().getPlatform());
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">SocialUserInfo</span> <span class="hljs-variable">socialUserInfo</span> <span class="hljs-operator">=</span> googleAuthService.getUserInfo(request.getIdToken());
            log.debug(<span class="hljs-string">&quot;Google ì‚¬ìš©ì ì •ë³´ ìˆ˜ì‹ : {}&quot;</span>, socialUserInfo.toMaskedString());
            
            <span class="hljs-type">UserSocialResult</span> <span class="hljs-variable">userResult</span> <span class="hljs-operator">=</span> socialUserService.findOrCreateUserBySocial(socialUserInfo);
            log.info(<span class="hljs-string">&quot;ì‚¬ìš©ì DB ì²˜ë¦¬ ì™„ë£Œ - NewUser: {}, NewSocial: {}&quot;</span>, 
                    userResult.isNewUser(), userResult.isNewSocialAccount());
            
            <span class="hljs-type">String</span> <span class="hljs-variable">accessToken</span> <span class="hljs-operator">=</span> jwtTokenProvider.generateAccessToken(<span class="hljs-comment">/*...*/</span>);
            log.debug(<span class="hljs-string">&quot;JWT í† í° ìƒì„± ì™„ë£Œ - TokenLength: {}&quot;</span>, accessToken.length());
            
            <span class="hljs-keyword">return</span> buildSuccessResponse(userResult, accessToken, refreshToken);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">&quot;âŒ Google ë¡œê·¸ì¸ ì²˜ë¦¬ ì‹¤íŒ¨ - Error: {}&quot;</span>, e.getMessage(), e);
            <span class="hljs-keyword">throw</span> e;
        }
    }
}
</code></pre>
<h3 id="7-ë°°í¬-ê´€ë ¨-ì„¤ì •">7. ë°°í¬ ê´€ë ¨ ì„¤ì •</h3>
<h4 id="71-docker-í™˜ê²½-ì„¤ì •">7.1 Docker í™˜ê²½ ì„¤ì •</h4>
<pre><code class="language-yaml"><span class="hljs-comment"># docker-compose.yml (AuthService ë¶€ë¶„)</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">auth-service:</span>
    <span class="hljs-attr">build:</span> <span class="hljs-string">./AuthService</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">akc-auth-service</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;8082:8082&quot;</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">SPRING_PROFILES_ACTIVE:</span> <span class="hljs-string">docker</span>
      <span class="hljs-attr">DB_USERNAME:</span> <span class="hljs-string">antsome</span>
      <span class="hljs-attr">DB_PASSWORD:</span> <span class="hljs-string">Q1w2e3r4%^</span>
      <span class="hljs-attr">GOOGLE_CLIENT_SECRET:</span> <span class="hljs-string">${GOOGLE_CLIENT_SECRET}</span>
      <span class="hljs-attr">NAVER_CLIENT_SECRET:</span> <span class="hljs-string">${NAVER_CLIENT_SECRET}</span>
      <span class="hljs-attr">JWT_SECRET:</span> <span class="hljs-string">${JWT_SECRET}</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">akc-network</span>
</code></pre>
<h4 id="72-í™˜ê²½ë³€ìˆ˜-ê´€ë¦¬">7.2 í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬</h4>
<pre><code class="language-bash"><span class="hljs-comment"># .env íŒŒì¼ (ì‹¤ì œ ë°°í¬ ì‹œ í•„ìš”í•œ í™˜ê²½ë³€ìˆ˜)</span>
GOOGLE_CLIENT_SECRET=your-google-client-secret
NAVER_CLIENT_SECRET=your-naver-client-secret
JWT_SECRET=akc-b2c-jwt-secret-key-2024-very-long-and-secure
DB_USERNAME=antsome
DB_PASSWORD=Q1w2e3r4%^
SMS_PROVIDER=<span class="hljs-built_in">test</span>
AWS_ACCESS_KEY=your-aws-access-key
AWS_SECRET_KEY=your-aws-secret-key
</code></pre>
<h3 id="8-í† í°-ê´€ë¦¬-ë°©ì‹">8. í† í° ê´€ë¦¬ ë°©ì‹</h3>
<h4 id="81-jwt-í† í°-ìƒì„±-ë¡œì§-ì‹¤ì œ-êµ¬í˜„">8.1 JWT í† í° ìƒì„± ë¡œì§ (ì‹¤ì œ êµ¬í˜„)</h4>
<pre><code class="language-java"><span class="hljs-comment">// JwtTokenProvider.java</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtTokenProvider</span> {
    
    <span class="hljs-meta">@Value(&quot;${jwt.secret}&quot;)</span>
    <span class="hljs-keyword">private</span> String secretKey;
    
    <span class="hljs-meta">@Value(&quot;${jwt.access-token-expiration}&quot;)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> accessTokenExpiration;
    
    <span class="hljs-meta">@Value(&quot;${jwt.refresh-token-expiration}&quot;)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> refreshTokenExpiration;
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateAccessToken</span><span class="hljs-params">(String userId, String email, String role)</span> {
        Map&lt;String, Object&gt; claims = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        claims.put(<span class="hljs-string">&quot;userId&quot;</span>, userId);
        claims.put(<span class="hljs-string">&quot;email&quot;</span>, email);
        claims.put(<span class="hljs-string">&quot;role&quot;</span>, role);
        claims.put(<span class="hljs-string">&quot;type&quot;</span>, <span class="hljs-string">&quot;access&quot;</span>);
        
        <span class="hljs-keyword">return</span> Jwts.builder()
                .setClaims(claims)
                .setSubject(userId)
                .setIssuedAt(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>())
                .setExpiration(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(System.currentTimeMillis() + accessTokenExpiration))
                .signWith(Keys.hmacShaKeyFor(secretKey.getBytes()), SignatureAlgorithm.HS256)
                .compact();
    }
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateRefreshToken</span><span class="hljs-params">(String userId)</span> {
        Map&lt;String, Object&gt; claims = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        claims.put(<span class="hljs-string">&quot;userId&quot;</span>, userId);
        claims.put(<span class="hljs-string">&quot;type&quot;</span>, <span class="hljs-string">&quot;refresh&quot;</span>);
        
        <span class="hljs-keyword">return</span> Jwts.builder()
                .setClaims(claims)
                .setSubject(userId)
                .setIssuedAt(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>())
                .setExpiration(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(System.currentTimeMillis() + refreshTokenExpiration))
                .signWith(Keys.hmacShaKeyFor(secretKey.getBytes()), SignatureAlgorithm.HS256)
                .compact();
    }
}
</code></pre>
<h4 id="82-redis-í† í°-ìºì‹±-ë°©ì‹-ì‹¤ì œ-êµ¬í˜„">8.2 Redis í† í° ìºì‹± ë°©ì‹ (ì‹¤ì œ êµ¬í˜„)</h4>
<pre><code class="language-java"><span class="hljs-comment">// RedisTokenService.java</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisTokenService</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedisTemplate&lt;String, String&gt; redisTemplate;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cacheAccessToken</span><span class="hljs-params">(String userId, String token, <span class="hljs-type">long</span> expiration)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;access_token:&quot;</span> + userId;
        redisTemplate.opsForValue().set(key, token, Duration.ofMillis(expiration));
        log.debug(<span class="hljs-string">&quot;Access Token ìºì‹± ì™„ë£Œ - UserId: {}, TTL: {}ms&quot;</span>, userId, expiration);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cacheRefreshToken</span><span class="hljs-params">(String userId, String token, <span class="hljs-type">long</span> expiration)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;refresh_token:&quot;</span> + userId;
        redisTemplate.opsForValue().set(key, token, Duration.ofMillis(expiration));
        log.debug(<span class="hljs-string">&quot;Refresh Token ìºì‹± ì™„ë£Œ - UserId: {}, TTL: {}ms&quot;</span>, userId, expiration);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">validateCachedToken</span><span class="hljs-params">(String userId, String token)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">cachedToken</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(<span class="hljs-string">&quot;access_token:&quot;</span> + userId);
        <span class="hljs-keyword">return</span> token.equals(cachedToken);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invalidateUserTokens</span><span class="hljs-params">(String userId)</span> {
        redisTemplate.delete(<span class="hljs-string">&quot;access_token:&quot;</span> + userId);
        redisTemplate.delete(<span class="hljs-string">&quot;refresh_token:&quot;</span> + userId);
        log.info(<span class="hljs-string">&quot;ì‚¬ìš©ì í† í° ë¬´íš¨í™” ì™„ë£Œ - UserId: {}&quot;</span>, userId);
    }
}
</code></pre>
<h3 id="9-í”„ë¡ íŠ¸ì—”ë“œ-ë°±ì—”ë“œ-ì¸í„°í˜ì´ìŠ¤-ëª…í™•í™”">9. í”„ë¡ íŠ¸ì—”ë“œ-ë°±ì—”ë“œ ì¸í„°í˜ì´ìŠ¤ ëª…í™•í™”</h3>
<h4 id="91-ê°œë°œ-í™˜ê²½ì—ì„œì˜-cors-ë°-í†µì‹ -ì„¤ì •">9.1 ê°œë°œ í™˜ê²½ì—ì„œì˜ CORS ë° í†µì‹  ì„¤ì •</h4>
<pre><code class="language-java"><span class="hljs-comment">// SecurityConfig.javaì—ì„œ CORS ì„¤ì •</span>
<span class="hljs-meta">@Bean</span>
<span class="hljs-keyword">public</span> CorsConfigurationSource <span class="hljs-title function_">corsConfigurationSource</span><span class="hljs-params">()</span> {
    <span class="hljs-type">CorsConfiguration</span> <span class="hljs-variable">configuration</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CorsConfiguration</span>();
    
    <span class="hljs-comment">// í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì„œë²„ í—ˆìš© (ì‹¤ì œ ê°’)</span>
    configuration.setAllowedOriginPatterns(Arrays.asList(
        <span class="hljs-string">&quot;http://localhost:3000&quot;</span>,    <span class="hljs-comment">// Next.js ê°œë°œ ì„œë²„</span>
        <span class="hljs-string">&quot;http://localhost:3011&quot;</span>,    <span class="hljs-comment">// ê¸°ì¡´ ê°œë°œ ì„œë²„</span>
        <span class="hljs-string">&quot;http://localhost:3010&quot;</span>,    <span class="hljs-comment">// ê¸°ì¡´ ê°œë°œ ì„œë²„</span>
        <span class="hljs-string">&quot;http://192.168.0.9:3011&quot;</span>,  <span class="hljs-comment">// ë¡œì»¬ ë„¤íŠ¸ì›Œí¬</span>
        <span class="hljs-string">&quot;file://*&quot;</span>                  <span class="hljs-comment">// ë¡œì»¬ HTML íŒŒì¼</span>
    ));
    
    configuration.setAllowedMethods(Arrays.asList(<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;POST&quot;</span>, <span class="hljs-string">&quot;PUT&quot;</span>, <span class="hljs-string">&quot;DELETE&quot;</span>, <span class="hljs-string">&quot;OPTIONS&quot;</span>));
    configuration.setAllowedHeaders(Arrays.asList(<span class="hljs-string">&quot;*&quot;</span>));
    configuration.setAllowCredentials(<span class="hljs-literal">true</span>);
    
    <span class="hljs-comment">// í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë…¸ì¶œí•  í—¤ë”</span>
    configuration.setExposedHeaders(Arrays.asList(
        <span class="hljs-string">&quot;X-User-Id&quot;</span>, <span class="hljs-string">&quot;X-User-Email&quot;</span>, <span class="hljs-string">&quot;X-User-Role&quot;</span>, <span class="hljs-string">&quot;Authorization&quot;</span>
    ));
    
    <span class="hljs-type">UrlBasedCorsConfigurationSource</span> <span class="hljs-variable">source</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UrlBasedCorsConfigurationSource</span>();
    source.registerCorsConfiguration(<span class="hljs-string">&quot;/api/**&quot;</span>, configuration);
    <span class="hljs-keyword">return</span> source;
}
</code></pre>
<h4 id="92-ì‹¤ì œ-ë„¤ì´ë²„-íŒì—…-í†µì‹ -ë°©ì‹-postmessage">9.2 ì‹¤ì œ ë„¤ì´ë²„ íŒì—… í†µì‹  ë°©ì‹ (postMessage)</h4>
<pre><code class="language-html"><span class="hljs-comment">&lt;!-- ë„¤ì´ë²„ ì½œë°±ì—ì„œ ì‹¤ì œ ìƒì„±ë˜ëŠ” HTML --&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ë„¤ì´ë²„ ë¡œê·¸ì¸ ì²˜ë¦¬<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ì‹¤ì œ ë°±ì—”ë“œì—ì„œ ìƒì„±í•˜ëŠ” ë©”ì‹œì§€ í˜•ì‹</span>
            <span class="hljs-variable language_">window</span>.<span class="hljs-property">opener</span>.<span class="hljs-title function_">postMessage</span>({
                <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;NAVER_LOGIN_SUCCESS&#x27;</span>,  <span class="hljs-comment">// ë˜ëŠ” &#x27;NAVER_SIGNUP_NEEDED&#x27;, &#x27;NAVER_LOGIN_ERROR&#x27;</span>
                <span class="hljs-attr">result</span>: {
                    <span class="hljs-attr">member</span>: {
                        <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;&lt;%=member.getId()%&gt;&#x27;</span>,
                        <span class="hljs-attr">email</span>: <span class="hljs-string">&#x27;&lt;%=member.getEmail()%&gt;&#x27;</span>,
                        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;&lt;%=member.getName()%&gt;&#x27;</span>,
                        <span class="hljs-attr">profileImageUrl</span>: <span class="hljs-string">&#x27;&lt;%=member.getProfileImageUrl()%&gt;&#x27;</span>
                    },
                    <span class="hljs-attr">token</span>: <span class="hljs-string">&#x27;&lt;%=jwtToken%&gt;&#x27;</span>,
                    <span class="hljs-attr">isNewMember</span>: &lt;%=userResult.<span class="hljs-title function_">isNewUser</span>()%&gt;
                }
            }, <span class="hljs-string">&#x27;*&#x27;</span>);
            <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">close</span>();
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;ë¶€ëª¨ ì°½ìœ¼ë¡œ ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨:&#x27;</span>, error);
            <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&#x27;&lt;h2&gt;ì²˜ë¦¬ ì™„ë£Œ&lt;/h2&gt;&lt;p&gt;ì´ ì°½ì„ ë‹«ê³  ë©”ì¸ í˜ì´ì§€ë¡œ ëŒì•„ê°€ì„¸ìš”.&lt;/p&gt;&#x27;</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 id="10-ì‹¤ì œ-ê°œë°œ-í™˜ê²½-í…ŒìŠ¤íŠ¸-ë°©ë²•">10. ì‹¤ì œ ê°œë°œ í™˜ê²½ í…ŒìŠ¤íŠ¸ ë°©ë²•</h3>
<h4 id="101-ê°œë°œ-ëª¨ë“œ-í™œì„±í™”-ë°©ë²•">10.1 ê°œë°œ ëª¨ë“œ í™œì„±í™” ë°©ë²•</h4>
<pre><code class="language-yaml"><span class="hljs-comment"># application-local.ymlì—ì„œ ê°œë°œ ëª¨ë“œ ì„¤ì •</span>
<span class="hljs-attr">social:</span>
  <span class="hljs-attr">google:</span>
    <span class="hljs-attr">dev-mode:</span> <span class="hljs-literal">true</span>     <span class="hljs-comment"># Google ê°œë°œ ëª¨ë“œ í™œì„±í™”</span>
  <span class="hljs-attr">kakao:</span>
    <span class="hljs-attr">dev-mode:</span> <span class="hljs-literal">true</span>     <span class="hljs-comment"># ì¹´ì¹´ì˜¤ ê°œë°œ ëª¨ë“œ í™œì„±í™”  </span>
  <span class="hljs-attr">naver:</span>
    <span class="hljs-attr">dev-mode:</span> <span class="hljs-literal">true</span>     <span class="hljs-comment"># ë„¤ì´ë²„ ê°œë°œ ëª¨ë“œ í™œì„±í™”</span>
</code></pre>
<h4 id="102-ê°œë°œ-í™˜ê²½-í…ŒìŠ¤íŠ¸ìš©-ë”ë¯¸-í† í°">10.2 ê°œë°œ í™˜ê²½ í…ŒìŠ¤íŠ¸ìš© ë”ë¯¸ í† í°</h4>
<pre><code class="language-javascript"><span class="hljs-comment">// í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê°œë°œìš© í† í°ë“¤</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DEV_TOKENS</span> = {
  <span class="hljs-attr">google</span>: <span class="hljs-string">&#x27;dummy_google_token_dev_mode&#x27;</span>,
  <span class="hljs-attr">kakao</span>: <span class="hljs-string">&#x27;dummy_kakao_token_dev_mode&#x27;</span>, 
  <span class="hljs-attr">naver</span>: <span class="hljs-string">&#x27;dummy_naver_token_dev_mode&#x27;</span>
};

<span class="hljs-comment">// ê°œë°œ í™˜ê²½ì—ì„œ ì‹¤ì œ ì†Œì…œ ë¡œê·¸ì¸ ì—†ì´ í…ŒìŠ¤íŠ¸</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">testSocialLogin</span> = (<span class="hljs-params">provider</span>) =&gt; {
  <span class="hljs-keyword">const</span> token = <span class="hljs-variable constant_">DEV_TOKENS</span>[provider];
  
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`http://localhost:8082/api/auth/social/<span class="hljs-subst">${provider}</span>`</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span> },
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">idToken</span>: provider === <span class="hljs-string">&#x27;google&#x27;</span> ? token : <span class="hljs-literal">undefined</span>,
      <span class="hljs-attr">accessToken</span>: provider !== <span class="hljs-string">&#x27;google&#x27;</span> ? token : <span class="hljs-literal">undefined</span>,
      <span class="hljs-attr">deviceInfo</span>: {
        <span class="hljs-attr">platform</span>: <span class="hljs-string">&#x27;WEB_BROWSER&#x27;</span>,
        <span class="hljs-attr">deviceId</span>: <span class="hljs-string">&#x27;test-device-&#x27;</span> + <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
        <span class="hljs-attr">appVersion</span>: <span class="hljs-string">&#x27;1.0.0&#x27;</span>
      }
    })
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">json</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${provider}</span> ê°œë°œ ëª¨ë“œ í…ŒìŠ¤íŠ¸ ê²°ê³¼:`</span>, data);
  });
};
</code></pre>
<hr>
<p>ì´ ë¬¸ì„œëŠ” ì‹¤ì œ êµ¬í˜„ëœ ë°±ì—”ë“œ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìœ¼ë©°, í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìë“¤ì´ ì •í™•í•œ API ìŠ¤í™ê³¼ ì„¤ì • ì •ë³´ë¥¼ ì°¸ê³ í•  ìˆ˜ ìˆë„ë¡ ìƒì„¸íˆ ê¸°ìˆ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì´ ë„ì‹í™”ë¥¼ í†µí•´ ì†Œì…œ ë¡œê·¸ì¸ ë° íšŒì›ê°€ì…ì˜ ì „ì²´ì ì¸ íë¦„ê³¼ ë°ì´í„° ì²˜ë¦¬ ê³¼ì •ì„ ëª…í™•í•˜ê²Œ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê° ë‹¨ê³„ì—ì„œ í•„ìš”í•œ ë°ì´í„°ì™€ ì²˜ë¦¬ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

            <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
            
        </body>
        </html>